!function(){angular.module("marcuraUI.services",[]),angular.module("marcuraUI.components",["marcuraUI.services"]),angular.module("marcuraUI",["marcuraUI.components"]),angular.element(document).ready(function(){var e=function(){for(var e=3,a=document.createElement("div"),n=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:null}();if(e){var a=angular.element(document.getElementsByTagName("body")[0]);a.addClass("ma-ie"+e)}$.fn.modal&&($.fn.modal.Constructor.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal"),0===$(".modal").length&&e.$body.removeClass("modal-open")})})})}();
!function(){angular.module("marcuraUI.components").directive("maButton",[function(){return{restrict:"E",scope:{text:"@",kind:"@",leftIcon:"@",rightIcon:"@",isDisabled:"=",click:"&",size:"@",modifier:"@"},replace:!0,template:function(){var n='            <button class="ma-button{{cssClass}}"                ng-click="onClick()"                ng-disabled="isDisabled"                ng-class="{                    \'ma-button-link\': isLink(),                    \'ma-button-has-left-icon\': hasLeftIcon,                    \'ma-button-has-right-icon\': hasRightIcon,                    \'ma-button-is-disabled\': isDisabled,                    \'ma-button-has-text\': hasText                }">                <span ng-if="leftIcon" class="ma-button-icon ma-button-icon-left">                    <i class="fa fa-{{leftIcon}}"></i>                    <span class="ma-button-rim" ng-if="isLink()"></span>                </span><span class="ma-button-text">{{text || \'&nbsp;\'}}</span><span ng-if="rightIcon" class="ma-button-icon ma-button-icon-right">                    <i class="fa fa-{{rightIcon}}"></i>                    <span class="ma-button-rim" ng-if="isLink()"></span>                </span>                <span class="ma-button-rim" ng-if="!isLink()"></span>            </button>';return n},link:function(n){n.hasText=!1,n.hasLeftIcon=!1,n.hasRightIcon=!1,n.size=n.size?n.size:"md",n.cssClass=" ma-button-"+n.size,n.hasLeftIcon=!!n.leftIcon,n.hasRightIcon=!!n.rightIcon,n.hasText=!!n.text,n.modifier&&(n.cssClass+=" ma-button-"+n.modifier),n.onClick=function(){n.isDisabled||n.click()},n.isLink=function(){return"link"===n.kind}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCheckBox",["maHelper","$timeout",function(e,s){return{restrict:"E",scope:{text:"@",value:"=",isDisabled:"=",change:"&",size:"@",rtl:"="},replace:!0,template:function(){var e='            <div class="ma-check-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-check-box-is-checked\': value === true,                    \'ma-check-box-is-disabled\': isDisabled,                    \'ma-check-box-has-text\': hasText,                    \'ma-check-box-rtl\': rtl,                    \'ma-check-box-is-focused\': isFocused                }">                <span class="ma-check-box-text">{{text || \'&nbsp;\'}}</span>                <div class="ma-check-box-inner"></div>                <i class="ma-check-box-icon fa fa-check" ng-show="value === true"></i>            </div>';return e},link:function(c,a){var n=function(){c.isDisabled?a.removeAttr("tabindex"):a.attr("tabindex","0")};c._size=c.size?c.size:"xs",c.cssClass=" ma-check-box-"+c._size,c.hasText=!!c.text,c.isFocused=!1,c.onChange=function(){c.isDisabled||(c.value=!c.value,s(function(){c.change({value:c.value})}))},c.onFocus=function(){c.isDisabled||(c.isFocused=!0)},c.onBlur=function(){c.isDisabled||(c.isFocused=!1)},c.onKeypress=function(s){s.keyCode===e.keyCode.space&&(s.preventDefault(),c.isDisabled||c.onChange())},c.$watch("isDisabled",function(e,s){e!==s&&(e&&(c.isFocused=!1),n())}),n()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCostsGrid",[function(){return{restrict:"E",scope:{costItems:"="},replace:!0,template:function(){var t='            <div class="ma-grid ma-grid-costs"                costs grid            </div>';return t},link:function(t){console.log("scope.costItems:",t.costItems)}}}])}();
!function(){angular.module("marcuraUI.components").provider("maDateBoxConfiguration",function(){this.$get=function(){return this}}).directive("maDateBox",["$timeout","maDateConverter","maHelper","maValidators",function(e,t,a,n){return{restrict:"E",scope:{id:"@",date:"=",timeZone:"=",culture:"=",isDisabled:"=",isRequired:"=",change:"&",isResettable:"=",displayFormat:"=",format:"=",hasTime:"=",parser:"=",validators:"=",instance:"=",minDate:"=",maxDate:"="},replace:!0,template:function(){var e='                <div class="ma-date-box" ng-class="{                        \'ma-date-box-has-time\': hasTime,                        \'ma-date-box-is-invalid\': !_isValid,                        \'ma-date-box-is-disabled\': isDisabled,                        \'ma-date-box-is-resettable\': _isResettable,                        \'ma-date-box-is-focused\': isFocused,                        \'ma-date-box-is-touched\': isTouched                    }">                    <input class="ma-date-box-date" type="text" id="{{id}}"                        ng-disabled="isDisabled"                        ng-focus="onFocus()"                        ng-keydown="onKeydown($event)"                        ng-keyup="onKeyup($event)"                        ng-blur="onBlur()"/><input class="ma-date-box-hours"                            maxlength="2"                            ng-disabled="isDisabled"                            ng-show="hasTime"                            ng-focus="onFocus()"                            ng-keydown="onKeydown($event)"                            ng-keyup="onKeyup($event)"                            ng-blur="onBlur()"                            ng-keydown="onTimeKeydown($event)"                            /><div class="ma-date-box-colon" ng-if="hasTime">:</div><input                             class="ma-date-box-minutes" type="text"                            maxlength="2"                            ng-disabled="isDisabled"                            ng-show="hasTime"                            ng-focus="onFocus()"                            ng-keydown="onKeydown($event)"                            ng-keyup="onKeyup($event)"                            ng-blur="onBlur()"                            ng-keydown="onTimeKeydown($event)"/>                    <i class="ma-date-box-icon fa fa-calendar"></i>                    <ma-reset-value                        is-disabled="!isResetEnabled()"                        click="onReset()"                        ng-show="_isResettable">                    </ma-reset-value>                </div>';return e},controller:["$scope","maDateBoxConfiguration",function(e,t){e.configuration={},e.configuration.displayFormat=(e.displayFormat||t.displayFormat||"dd MMM yyyy").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.format=(e.format||t.format||"yyyy-MM-ddTHH:mm:ssZ").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.timeZone=(e.timeZone||t.timeZone||"Z").replace(/GMT/g,"")}],link:function(o,i){var d,s,l,u=null,r=o.configuration.displayFormat,c=o.configuration.format,f=o.configuration.timeZone,m=angular.element(i[0].querySelector(".ma-date-box-date")),y=angular.element(i[0].querySelector(".ma-date-box-hours")),v=angular.element(i[0].querySelector(".ma-date-box-minutes")),g=null,b=moment().utcOffset(f).utcOffset(),h=0,p=o.validators?angular.copy(o.validators):[],k=o.isRequired,D=t.parse(o.minDate),x=t.parse(o.maxDate),C=function(e){var a=null;e&&(a=moment(new Date),a.year(e.year()).month(e.month()).date(e.date()).hours(e.hours()).minutes(e.minutes()).seconds(0)),o.date=a?t.format(a,c,f):null,o.change({date:o.date})},T=function(e){return!(null===g&&null===e||g&&e&&0===g.diff(e))&&(o.isTouched=!0,!0)},w=function(e,a){var n=null;e&&e.date?(n=t.offsetUtc(e.date,b-e.offset),m.val(t.format(n,r)),y.val(t.format(n,"HH")),v.val(t.format(n,"mm")),d||(d=m.val())):(m.val(""),y.val("00"),v.val("00")),_(n)},_=function(e){u&&u.setDate(e?e.toDate():null,!0)},V=function(e){if(!e)return null;var a=null;if(o.parser)a=o.parser(e);else if(a=t.parse(e,o.culture),!a)return null;return{date:moment(a.date),offset:a.offset}},F=function(e){var t=moment(e);return moment([t.year(),t.month(),t.date(),Number(y.val()),Number(v.val()),0])},K=function(){h=b},R=function(){u=new Pikaday({field:angular.element(i[0].querySelector(".ma-date-box-icon"))[0],position:"bottom right",minDate:D?D.date:null,maxDate:x?x.date:null,onSelect:function(){var a=t.offsetUtc(u.getDate());e(function(){o._isValid=!0}),o.hasTime&&(a=F(a),K()),T(a)&&(g=a,e(function(){C(a)}))}}),_(g)},q=function(){u&&u.destroy()},B=function(e){if(p&&p.length)for(var t=0;t<p.length;t++)if(!p[t].method(e)){o._isValid=!1;break}},E=function(){for(var e=!1,t=0;t<p.length;t++)if("IsNotEmpty"===p[t].name){e=!0;break}!e&&k&&p.unshift(n.isNotEmpty()),e&&(k=!0),D&&p.push(n.isGreaterThanOrEqual(D.date)),x&&p.push(n.isLessThanOrEqual(x.date))};if(E(),o._isResettable=o.isResettable!==!1,o.isFocused=!1,o._isValid=!0,o.isTouched=!1,o.isResetEnabled=function(){return!o.isDisabled&&(m.val()||"00"!==y.val()||"00"!==v.val())},o.onFocus=function(){o.isFocused=!0},o.onBlur=function(){o.isFocused=!1;var e=m.val().trim(),a=""===e,n=Number(y.val()),i=Number(v.val()),s={date:null,offset:0};return n>=0&&n<=23&&i>=0&&i<=59?(s=V(e)||s,s.offset=h,!a&&!s.date||a&&o.isTouched&&k?void(o._isValid=!1):(s.date&&(o.hasTime||!o.isTouched&&d===e)&&(s.date=F(s.date),s.date=t.offsetUtc(s.date,-(b-h))),T(s.date)?(s.date&&(w(s),g=s.date),p&&p.length&&(o._isValid=!0,B(s.date)),void(o._isValid&&C(s.date))):(w(s),o._isValid=!0,void B(s.date)))):void(o._isValid=!1)},o.onKeydown=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(s=angular.element(e.target).val())},o.onKeyup=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(l=angular.element(e.target).val(),s!==l&&(o.isTouched=!0,K()))},o.onTimeKeydown=function(e){$.inArray(e.keyCode,[a.keyCode.backspace,a.keyCode.tab,a.keyCode["delete"]])===-1&&37!==e.keyCode&&39!==e.keyCode&&(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},o.onReset=function(){o.isDisabled||(g=null,k?(o._isValid=!1,w()):C())},o.date){var Z={date:null,offset:0};if(Z=t.parse(o.date,o.culture)||Z,Z.date=t.offsetUtc(Z.date),!Z.date)return;w(Z),g=Z.date,h=Z.offset}e(function(){o.isDisabled||R(),i.removeAttr("id"),m.attr("id",o.id)}),o.$watch("date",function(e,t){if(null!==e||null!==t){var a={date:null,offset:0};if(a=V(e)||a,null===a.date&&(g=null,w(null)),!T(a.date))return void w(a);w(a),g=a.date,h=a.offset}}),o.$watch("isDisabled",function(e,t){e!==t&&(o.isDisabled?q():R())}),o.instance&&(o.instance.validate=function(){return o.isTouched=!0,k&&!o.date?void(o._isValid=!1):void B(V(o.date))},o.instance.isValid=function(){return o._isValid})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maGridOrder",[function(){return{restrict:"E",scope:{orderBy:"@",sorting:"="},replace:!0,template:function(){var r='            <div class="ma-grid-order ma-grid-order-{{sorting.direction}}"                ng-show="sorting.orderedBy === orderBy || (sorting.orderedBy === \'-\' + orderBy)">                <i class="fa fa-sort-{{sorting.direction}}"></i>            </div>';return r}}}])}();
!function(){angular.module("marcuraUI.components").directive("maProgress",[function(){return{restrict:"E",scope:{steps:"=",currentStep:"="},replace:!0,template:function(){var e='            <div class="ma-progress">                <div class="ma-progress-inner">                    <div class="ma-progress-background"></div>                    <div class="ma-progress-bar" ng-style="{                        width: (calculateProgress() + \'%\')                    }">                    </div>                    <div class="ma-progress-steps">                        <div class="ma-progress-step"                            ng-style="{                                left: (calculateLeft($index) + \'%\')                            }"                            ng-repeat="step in steps"                            ng-class="{                                \'ma-progress-step-is-current\': isCurrentStep($index)                            }">                            <div class="ma-progress-text">{{$index + 1}}</div>                        </div>                    </div>                </div>                <div class="ma-progress-labels">                    <div ng-repeat="step in steps"                        class="ma-progress-label">                        {{step.text}}                    </div>                </div>            </div>';return e},link:function(e){e.calculateLeft=function(s){return 100/(e.steps.length-1)*s},e.calculateProgress=function(){return e.currentStep?e.currentStep>e.steps.length?100:100/(e.steps.length-1)*(e.currentStep-1):0},e.isCurrentStep=function(s){return s+1<=e.currentStep}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maRadioBox",["maHelper","$timeout","$sce",function(e,s,a){return{restrict:"E",scope:{text:"=",value:"=",selectedValue:"=",isDisabled:"=",change:"&",size:"@",comparer:"="},replace:!0,template:function(){var e='            <div class="ma-radio-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-radio-box-is-checked\': isChecked(),                    \'ma-radio-box-is-disabled\': isDisabled,                    \'ma-radio-box-has-text\': hasText,                    \'ma-radio-box-is-focused\': isFocused                }">                <span class="ma-radio-box-text" ng-bind-html="_text"></span>                <div class="ma-radio-box-inner"></div>                <i class="ma-radio-box-icon" ng-show="isChecked()"></i>            </div>';return e},link:function(i,n,t){var o=null,l=function(){i.isDisabled?n.removeAttr("tabindex"):n.attr("tabindex","0")},c=function(){var e=null,s=i.$parent,a=t.selectedValue;for(a.indexOf(".")!==-1&&(o=a.split("."),a=o[0]);s&&!e;)s.hasOwnProperty(a)?e=s:s=s.$parent;return e},r=c();i._size=i.size?i.size:"xs",i.cssClass=" ma-radio-box-"+i._size,i.hasText=!!i.text,i.isFocused=!1,i._text=a.trustAsHtml(i.text||"&nbsp;"),i.isChecked=function(){return i.comparer?i.comparer(i.value,i.selectedValue):JSON.stringify(i.value)===JSON.stringify(i.selectedValue)},i.onChange=function(){if(!i.isDisabled){var e,a=i.selectedValue;if(i.selectedValue=i.value,r&&o){e=r;for(var n=0;n<o.length;n++)e=e[o[n]];e=i.value}else e=r[t.selectedValue],r[t.selectedValue]=i.value;s(function(){i.change({value:i.value,oldValue:a})})}},i.onFocus=function(){i.isDisabled||(i.isFocused=!0)},i.onBlur=function(){i.isDisabled||(i.isFocused=!1)},i.onKeypress=function(s){s.keyCode===e.keyCode.space&&(s.preventDefault(),i.isDisabled||i.isChecked()||i.onChange())},i.$watch("isDisabled",function(e,s){e!==s&&(e&&(i.isFocused=!1),l())}),l()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maResetValue",[function(){return{restrict:"E",scope:{isDisabled:"=",click:"&"},replace:!0,template:function(){var i='            <div class="ma-reset-value" ng-class="{                    \'ma-reset-value-is-disabled\': isDisabled                }"                ng-click="onClick()">                <i class="fa fa-times"></i>            </div>';return i},link:function(i,e,a){i.onClick=function(){i.isDisabled||i.click()}}}}])}();
!function(){angular.module("marcuraUI.components").filter("maSelectBoxOrderBy",["orderByFilter",function(e){return function(t,i){return i?e(t,i):t}}]).directive("maSelectBox",["$document","$timeout","maHelper","maValidators",function(e,t,i,s){return{restrict:"E",scope:{id:"@",items:"=",selectedItem:"=",isLoading:"=",change:"&",blur:"&",focus:"&",itemTemplate:"=",itemTextField:"@",itemValueField:"@",isDisabled:"=",isRequired:"=",validators:"=",canSearch:"=",canAddItem:"=",addItemTooltip:"@",showAddItemTooltip:"=",instance:"=",orderBy:"=",ajax:"=",canReset:"=",placeholder:"@",textPlaceholder:"@"},replace:!0,template:function(e,t){var s=!i.isNullOrWhiteSpace(t.ajax),l="                    <div class=\"ma-select-box\"                        ng-class=\"{                            'ma-select-box-can-add-item': canAddItem,                            'ma-select-box-is-text-focused': isTextFocused,                            'ma-select-box-is-disabled': isDisabled,                            'ma-select-box-is-invalid': !isValid,                            'ma-select-box-is-touched': isTouched,                            'ma-select-box-mode-add': isAddMode,                            'ma-select-box-mode-select': !isAddMode,                            'ma-select-box-can-reset': canReset,                            'ma-select-box-is-reset-disabled': canReset && !isDisabled && !isResetEnabled()                        }\">                        <div class=\"ma-select-box-spinner\" ng-if=\"isLoading && !isDisabled\">                            <div class=\"pace\">                                <div class=\"pace-activity\"></div>                            </div>                        </div>";return l+=s?'<input ui-select2="options"                        ng-show="!isAddMode"                        ng-disabled="isDisabled"                        ng-change="onChange()"                        ng-model="value"                        placeholder="{{placeholder}}"/>':'                        <select ui-select2="options"                            ng-show="!isAddMode"                            ng-disabled="isDisabled"                            ng-model="value"                            ng-change="onChange()"                            placeholder="{{placeholder}}">                            <option></option>                            <option ng-repeat="item in items | maSelectBoxOrderBy:orderBy" value="{{getItemValue(item)}}">                                {{formatItem(item)}}                            </option>                        </select>',l+='                    <input class="ma-select-box-text" type="text" ng-show="isAddMode"                        ng-model="text"                        ng-disabled="isDisabled"                        ng-focus="onFocus(\'text\')"                        placeholder="{{textPlaceholder}}"/>                    <ma-button class="ma-button-switch"                        ng-if="canAddItem" size="xs" modifier="simple"                        tooltip="{{getAddItemTooltip()}}"                        right-icon="{{isAddMode ? \'bars\' : \'plus\'}}"                        click="toggleMode()"                        ng-focus="onFocus()"                        is-disabled="isDisabled">                    </ma-button>                    <ma-button class="ma-button-reset"                        ng-show="canReset" size="xs" modifier="simple"                        right-icon="times-circle"                        click="onReset()"                        ng-focus="onFocus()"                        is-disabled="!isResetEnabled()">                    </ma-button>                </div>'},controller:["$scope",function(e){e.options={},e.canSearch||(e.options.minimumResultsForSearch=-1),e.ajax&&(e.options.ajax=e.ajax,e.options.minimumInputLength=3,e.options.escapeMarkup=function(e){return e},e.options.initSelection=function t(i,s){if(t.runs=t.runs?t.runs:1,1===t.runs&&e.selectedItem&&e.selectedItem[e.itemValueField]){var l=angular.copy(e.selectedItem);l.text=e.itemTemplate?e.itemTemplate(l):l[e.itemTextField],l.id=l[e.itemValueField],e.previousSelectedItem=l,s(l)}else s();t.runs++})}],link:function(l,o){var n,d,c,a,u,r=angular.element(o[0].querySelector(".ma-select-box-text")),m=null,f=!0,g=!1,p=l.showAddItemTooltip!==!1,x=l.validators?angular.copy(l.validators):[],I=l.isRequired,h=!1;l.previousSelectedItem=l.previousSelectedItem||null,l.isAddMode=!1,l.formatItem=l.itemTemplate||function(e){return e?l.itemTextField?e[l.itemTextField]:e.toString():""},l.isTextFocused=!1,l.isValid=!0,l.isTouched=!1,l.isAjax=angular.isObject(l.ajax);var b=function(e){if(!angular.isArray(l.items))return!1;for(var t=l.itemValueField&&e[l.itemValueField],i=0;i<l.items.length;i++)if(t){if(l.items[i][l.itemValueField]===e[l.itemValueField])return!0}else if(l.items[i]===e)return!0;return!1},v=function(e){if(!e)return null;if(!l.itemTextField)return e;if(angular.isArray(l.items))for(var t=0;t<l.items.length;t++)if(l.items[t][l.itemValueField].toString()===e.toString())return l.items[t];return null},F=function(e){if(!l.itemTextField)return e;if(e){var t={};return t[l.itemTextField]=e,t}return null},A=function(e){l.canAddItem&&e&&(l.isAddMode=!b(e)),S(e),l.isAddMode?(e?l.itemTextField&&e[l.itemTextField]?l.text=e[l.itemTextField].toString():l.text=e:l.text=null,m=e,l.toggleMode("add")):(e?l.isAjax||(l.itemValueField&&e[l.itemValueField]?l.value=e[l.itemValueField].toString():"string"==typeof e&&(l.value=e)):l.value=null,l.previousSelectedItem=e,l.toggleMode("select"))},T=function(e,i){var s=angular.element(e.relatedTarget),o=angular.element(a.dropdown[0].querySelector(".select2-input"));l.isTextFocused=!1,"text"===i?(g=!1,l.$apply(function(){if(l.isTouched=!0,l.itemTextField){if(l.selectedItem&&l.selectedItem[l.itemTextField]===l.text)return;l.selectedItem=F(l.text)}else{if(l.selectedItem===l.text)return;l.selectedItem=l.text}m=l.selectedItem,l.isValid&&t(function(){l.change({item:l.selectedItem})})})):"select"===i&&l.$apply(function(){l.isTouched=!0}),f=l.canAddItem?!g&&s[0]!==n[0]&&s[0]!==d[0]&&s[0]!==r[0]&&s[0]!==a.focusser[0]&&s[0]!==o[0]:!g&&s[0]!==d[0]&&s[0]!==r[0]&&s[0]!==a.focusser[0]&&s[0]!==o[0],f&&l.blur({item:l.selectedItem}),g=!1},S=function(e){if(l.isValid=!0,x&&x.length)for(var t=0;t<x.length;t++)if(!x[t].method(e)){l.isValid=!1;break}},M=function(){l.isAddMode?(r.focus(),l.isTextFocused=!0):c.select2("focus")};l.isResetEnabled=function(){return!l.isDisabled&&(l.isAddMode?!i.isNullOrWhiteSpace(l.text):!i.isNullOrUndefined(l.selectedItem))},l.onReset=function(){l.selectedItem=null,M(),t(function(){l.change({item:l.selectedItem})})},l.onFocus=function(e){"text"===e&&(l.isTextFocused=!0),f&&l.focus({item:l.selectedItem}),f=!1},r.focusout(function(e){T(e,"text")}),l.getAddItemTooltip=function(){return p?l.isAddMode?"Back to the list":l.addItemTooltip?l.addItemTooltip:"Add new item":""},l.getItemValue=function(e){return l.itemValueField?e[l.itemValueField].toString():e},l.toggleMode=function(e){if(l.canAddItem&&!(l.isAddMode&&"add"===e||!l.isAddMode&&"select"===e)){var i=!1;"select"===e?(l.isAddMode=!1,i=!0):"add"===e?(l.isAddMode=!0,i=!0):l.isAddMode=!l.isAddMode,l.isAddMode?(c&&c.select2("close"),l.previousSelectedItem=v(l.value),l.selectedItem=m,l.selectedItem&&(l.text="string"==typeof l.selectedItem?l.selectedItem:l.selectedItem[l.itemTextField])):(m=F(l.text),l.selectedItem=l.previousSelectedItem),i||t(function(){l.change({item:l.selectedItem}),M()})}},l.onChange=function(){var e=i.isJson(l.value)?JSON.parse(l.value):l.value;if(l.isAjax){if(e===l.previousSelectedItem)return;if(!angular.isObject(e))return}if(!l.isAjax&&l.itemValueField&&e)for(var s=0;s<l.items.length;s++)if(l.items[s][l.itemValueField].toString()===e.toString()){e=l.items[s];break}if(e||l.selectedItem){if(l.itemValueField){if(l.selectedItem&&l.selectedItem[l.itemValueField]&&l.selectedItem[l.itemValueField].toString()===e[l.itemValueField].toString())return}else if(e===l.selectedItem)return;l.selectedItem=e,l.previousSelectedItem=e,t(function(){l.change({item:e})})}},l.$watch("selectedItem",function(e,t){e!==t&&A(e)}),l.$watch("text",function(e,t){e!==t&&(l.isTouched=!0,S(e))}),l.instance&&(l.instance.switchToSelectMode=function(){l.isAddMode&&l.toggleMode("select")},l.instance.switchToAddMode=function(){l.isAddMode||l.toggleMode("add")},l.instance.isValid=function(){return l.isValid});for(var V=0;V<x.length;V++)if("IsNotEmpty"===x[V].name){h=!0;break}!h&&I&&x.unshift(s.isNotEmpty()),h&&(I=!0),t(function(){A(l.selectedItem),c=angular.element(o[0].querySelector(".select2-container")),a=c.data().select2,u=$('label[for="'+l.id+'"]'),n=angular.element(o[0].querySelector(".ma-button-switch")),d=angular.element(o[0].querySelector(".ma-button-reset")),u.length>0&&$(e).on("click",'label[for="'+l.id+'"]',function(){M()}),a.focusser.on("focus",function(){l.onFocus("select")}),a.focusser.on("focusout",function(e){T(e,"select")}),a.dropdown.on("focus",".select2-input",function(){g=!0,l.onFocus()}),a.dropdown.on("focusout",".select2-input",function(e){T(e,"select")}),n.focusout(function(e){T(e)}),d.focusout(function(e){T(e)}),a.dropdown.on("mouseenter",".select2-result",function(){g=!0}),$(e).on("mouseenter",".select2-drop-mask",function(){g=!0})})}}}])}();
!function(){angular.module("marcuraUI.services").factory("maDateConverter",[function(){var e=[{language:"en",items:["January","February","March","April","May","June","July","August","September","October","November","December"]}],r=[31,28,31,30,31,30,31,31,30,31,30,31],t=function(e){return!!e&&("[object Date]"===Object.prototype.toString.call(e)&&e.getTime&&!isNaN(e.getTime()))},n=function(e,r){return e.match(new RegExp(r,"i"))},a=function(t,a,u,s,i,l,c){var d;u=u.toString(),a=a.toString(),s=s||0,i=i||0,l=l||0,c=c||0,t<=99&&(t=t>=0&&t<30?"20"+t:"19"+t);var m=1===new Date(t,1,29).getMonth();if(m?r[1]=29:r[1]=28,null!==a.match(/([^\u0000-\u0080]|[a-zA-Z])$/)){for(var o=0;o<e.length;o++)for(var f=0;f<e[o].items.length;f++)if(n(a,e[o].items[f].slice(0,3))){d=f+1;break}if(!d)return null;a=d}return a>12?null:u>r[a-1]?null:{date:new Date(t,a-1,u,s,i,l),offset:c}},u=function(e,r,t){var n={day:e,month:r,isValid:!0};return"en-GB"===t&&r>12&&(n.isValid=!1),"en-US"===t&&(n.day=r,n.month=e,e>12&&(n.isValid=!1)),!t&&r>12&&(n.day=r,n.month=e),n},s=function(e,r){var t,n,s;if(e instanceof Date)return e;if(e&&e.date&&angular.isNumber(e.offset))return e;if(!angular.isString(e))return null;if(t=/^\d{1,2}$/,null!==e.match(t)){var i=new Date;return a(i.getFullYear(),i.getMonth()+1,e)}if(t=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})$/,null!==e.match(t))return n=t.exec(e),s=u(n[1],n[3],r),s.isValid?a((new Date).getFullYear(),s.month,s.day):null;if(t=/^(\d{1,2})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==e.match(t))return n=t.exec(e),a(n[5],n[3],n[1]);if(t=/([^\u0000-\u0080]|[a-zA-Z]{3})(\s|)(\d{1,2})(,)(\s|)(\d{2,4})$/,null!==e.match(t))return n=t.exec(e),a(n[6],n[1],n[3]);if(t=/^([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==e.match(t))return n=t.exec(e),a(n[5],n[1],n[3]);if(t=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})$/,null!==e.match(t))return n=t.exec(e),a(n[1],n[3],n[5]);if(t=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4})$/,null!==e.match(t))return n=t.exec(e),s=u(n[1],n[3],r),s.isValid?a(n[5],s.month,s.day):null;if(t=/^(\d{4})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})$/,null!==e.match(t))return n=t.exec(e),a(n[1],n[3],n[5]);if(t=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})T(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)(?:Z|([+-])(2[0-3]|[01][0-9]):([0-5][0-9]))$/,null!==e.match(t)){n=t.exec(e);var l=0;return 12===n.length&&(l=60*(Number(n[10])||0)+(Number(n[11])||0),"-"===n[9]&&0!==l&&(l=-l)),a(n[1],n[3],n[5],n[6],n[7],n[8],l)}return null},i=function(r,n,a){var u=0,s=r&&r.isValid&&r.isValid();if(a=a||"",!t(r)&&!s)return null;if(!angular.isString(n))return null;var i={s:["ss"],m:["mm"],H:["HH"],d:["d","dd"],M:["M","MM","MMM","MMMM"],y:["yy","yyyy"],Z:["Z"]},l=function(e){var r="";try{r=n.match(new RegExp(e+"+",""))[0]}catch(t){}return i[e].indexOf(r)},c=function(e,r){for(var t="",n=0;n<r;n++)t+="0";return(t+e).slice(-r)},d=s?r.date():r.getDate(),m=s?r.month():r.getMonth(),o=s?r.year():r.getFullYear(),f=s?r.hours():r.getHours(),h=s?r.minutes():r.getMinutes(),g=s?r.seconds():r.getSeconds(),y=function(r){var t="";switch(r){case i.d[0]:t=d;break;case i.d[1]:t=c(d,2);break;case i.M[0]:t=m+1;break;case i.M[1]:t=c(m+1,2);break;case i.M[2]:t=e[u].items[m].substr(0,3);break;case i.M[3]:t=e[u].items[m];break;case i.y[0]:t=c(o,2);break;case i.y[1]:t=o;break;case i.H[0]:t=c(f,2);break;case i.m[0]:t=c(h,2);break;case i.s[0]:t=c(g,2);break;case i.Z[0]:t=a||"Z";break;default:return""}return t},b={days:y(i.d[l("d")]),months:y(i.M[l("M")]),years:y(i.y[l("y")]),hours:y(i.H[l("H")]),minutes:y(i.m[l("m")]),seconds:y(i.s[l("s")]),timeZone:y(i.Z[0]),separator:/^\w+([^\w])/.exec(n)};return n.replace(/d+/,b.days).replace(/y+/,b.years).replace(/M+/,b.months).replace(/H+/,b.hours).replace(/m+/,b.minutes).replace(/s+/,b.seconds).replace(/Z+/,b.timeZone)},l=function(e,r){if(!e)return null;if(r=r||0,t(e)||e.isValid&&e.isValid())return moment(e).add(r,"m");if("string"==typeof e){var n=moment(e).minute(moment(e).minute()+moment().utcOffset()*-1+r);return n.isValid()?n:null}};return{parse:s,format:i,offsetUtc:l,isDate:t}}])}();
!function(){angular.module("marcuraUI.services").factory("maHelper",["maDateConverter",function(e){return{keyCode:{backspace:8,comma:188,"delete":46,down:40,end:35,enter:13,escape:27,home:36,left:37,pageDown:34,pageUp:33,period:190,right:39,shift:16,space:32,tab:9,up:38},isEmail:function(e){var r=/^([\+\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return r.test(e)},isNullOrWhiteSpace:function(e){return null===e||void 0===e||!angular.isArray(e)&&e.toString().replace(/\s/g,"").length<1},isNullOrUndefined:function(e){return null===e||angular.isUndefined(e)},formatString:function(e){for(var r="",t=0;;){var n=e.indexOf("{",t),a=e.indexOf("}",t);if(n<0&&a<0){r+=e.slice(t);break}if(a>0&&(a<n||n<0)){if("}"!==e.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");r+=e.slice(t,a+1),t=a+2}else if(r+=e.slice(t,n),t=n+1,"{"!==e.charAt(t)){if(a<0)throw new Error("The format string contains an unmatched opening or closing brace.");if(a<0)break;var i=e.substring(t,a),o=i.indexOf(":"),s=parseInt(o<0?i:i.substring(0,o),10)+1;if(isNaN(s))throw new Error("The format string is invalid.");var d=arguments[s];"undefined"!=typeof d&&null!==d||(d=""),r+=d.toString(),t=a+1}else r+="{",t++}return r},changeSortingOrder:function(e,r){"-"===r.charAt(0)?e.orderedBy!==r?(e.direction="desc",e.orderedBy=r):(e.direction="asc",e.orderedBy=r.substr(1)):e.orderedBy!==r?(e.direction="asc",e.orderedBy=r):(e.direction="desc",e.orderedBy="-"+r)},getTextHeight:function(e,r,t,n){if(!r)return 0;var a=document.createElement("TEXTAREA");a.setAttribute("rows",1),a.style.font=r,a.style.width=t||"0px",a.style.border="0",a.style.overflow="hidden",a.style.padding="0",a.style.outline="0",a.style.resize="none",a.style.lineHeight=n||"normal",a.value=e,angular.element(document.querySelector("body")).append(a),a.style.height="auto",a.style.height=a.scrollHeight+"px";var i=parseInt(a.style.height);return angular.element(a).remove(),i},isGreaterThan:function(r,t){var n=e.parse(r),a=e.parse(t);if(n&&a){var i=moment(n.date).add(-n.offset,"minute"),o=moment(a.date).add(-a.offset,"minute");return i.diff(o)>0}return r>t},isGreaterThanOrEqual:function(r,t){var n=e.parse(r),a=e.parse(t);if(n&&a){var i=moment(n.date).add(-n.offset,"minute"),o=moment(a.date).add(-a.offset,"minute");return i.diff(o)>=0}return r>=t},isLessThan:function(r,t){var n=e.parse(r),a=e.parse(t);if(n&&a){var i=moment(n.date).add(-n.offset,"minute"),o=moment(a.date).add(-a.offset,"minute");return i.diff(o)<0}return r<t},isLessThanOrEqual:function(r,t){var n=e.parse(r),a=e.parse(t);if(n&&a){var i=moment(n.date).add(-n.offset,"minute"),o=moment(a.date).add(-a.offset,"minute");return i.diff(o)<=0}return r<=t},isJson:function(e){try{return JSON.parse(e),!0}catch(r){return!1}}}}])}();
!function(){angular.module("marcuraUI.services").factory("maValidators",["maHelper",function(n){return{isNotEmpty:function(){return{name:"IsNotEmpty",method:function(r){return angular.isArray(r)?r.length>0:!n.isNullOrWhiteSpace(r)}}},isGreaterThan:function(r){return{name:"IsGreaterThan",method:function(e){return n.isGreaterThan(e,r)}}},isGreaterThanOrEqual:function(r){return{name:"IsGreaterThanOrEqual",method:function(e){return n.isGreaterThanOrEqual(e,r)}}},isLessThan:function(r){return{name:"IsLessThan",method:function(e){return n.isLessThan(e,r)}}},isLessThanOrEqual:function(r){return{name:"IsLessThanOrEqual",method:function(e){return n.isLessThanOrEqual(e,r)}}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maSideMenu",["$state",function(e){return{restrict:"E",scope:{items:"=",select:"&",useState:"="},replace:!0,template:function(){var e='            <div class="ma-side-menu">                <div class="ma-side-menu-item" ng-repeat="item in items" ng-class="{                        \'ma-side-menu-item-is-selected\': isItemSelected(item),                        \'ma-side-menu-item-is-disabled\': item.isDisabled                    }"                    ng-click="onSelect(item)">                    <i ng-if="item.icon" class="fa fa-{{item.icon}}"></i>                    <div class="ma-side-menu-text">{{item.text}}</div>                    <div class="ma-side-menu-new" ng-if="item.new">{{item.new}}</div>                </div>            </div>';return e},link:function(t,i,s){t.$state=e;var a=t.useState!==!1;t.isItemSelected=function(t){return t.selector?t.selector():a?!(!t.state||!t.state.name)&&e.includes(t.state.name):t.isSelected},t.onSelect=function(i){i.isDisabled||(a?i.state&&i.state.name&&e.go(i.state.name,i.state.parameters):(angular.forEach(t.items,function(e){e.isSelected=!1}),i.isSelected=!0,t.select({item:i})))}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTabs",["$state","maHelper","$timeout",function(e,t,s){return{restrict:"E",scope:{items:"=",select:"&",useState:"="},replace:!0,template:function(){var e='            <div class="ma-tabs">                <ul class="ma-tabs-list clearfix">                    <li class="ma-tabs-item" ng-repeat="item in items"                        ng-focus="onFocus(item)"                        ng-blur="onBlur(item)"                        ng-keypress="onKeypress($event, item)"                        ng-class="{                            \'ma-tabs-item-is-selected\': isItemSelected(item),                            \'ma-tabs-item-is-disabled\': item.isDisabled,                            \'ma-tabs-item-is-focused\': item.isFocused                        }"                        ng-click="onSelect(item)">                        <a class="ma-tabs-link" href="" tabindex="-1">                            <span class="ma-tabs-text">{{item.text}}</span>                        </a>                    </li>                </ul>            </div>';return e},link:function(a,i,n){a.$state=e;var c=a.useState!==!1;a.isItemSelected=function(t){return t.selector?t.selector():c?!(!t.state||!t.state.name)&&e.includes(t.state.name):t.isSelected},a.onSelect=function(t){t.isDisabled||t.isSelected||(c?t.state&&t.state.name&&e.go(t.state.name,t.state.parameters):(angular.forEach(a.items,function(e){e.isSelected=!1}),t.isSelected=!0,a.select({item:t})))},a.onKeypress=function(e,s){e.keyCode===t.keyCode.enter&&a.onSelect(s)},a.onFocus=function(e){e.isFocused=!0},a.onBlur=function(e){e.isFocused=!1},s(function(){var e=angular.element(i[0].querySelectorAll(".ma-tabs-item"));e.each(function(e,t){var s=a.items[e];s.isDisabled||angular.element(t).attr("tabindex","0")})})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTextArea",["$timeout","$window","maHelper","maValidators",function(e,t,a,i){return{restrict:"E",scope:{id:"@",value:"=",isDisabled:"=",fitContentHeight:"=",isResizable:"=",isRequired:"=",validators:"=",instance:"=",updateOn:"@"},replace:!0,template:function(){var e='            <div class="ma-text-area"                ng-class="{                    \'ma-text-area-is-disabled\': isDisabled,                    \'ma-text-area-is-focused\': isFocused,                    \'ma-text-area-fit-content-height\': fitContentHeight,                    \'ma-text-area-is-invalid\': !isValid,                    \'ma-text-area-is-touched\': isTouched                }">                <textarea class="ma-text-area-value"                    type="text"                    ng-focus="onFocus()"                    ng-blur="onBlur()"                    ng-keydown="onKeydown($event)"                    ng-keyup="onKeyup($event)"                    ng-disabled="isDisabled">                </textarea>            </div>';return e},link:function(n,r){var o,l,d=angular.element(r[0].querySelector(".ma-text-area-value")),u=n.validators?angular.copy(n.validators):[],s=n.isRequired,g=!1,p=n.updateOn?n.updateOn:"input",c=function(){var e=t.getComputedStyle(d[0],null),a={},i=parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom")),n=parseInt(e.getPropertyValue("padding-left"))+parseInt(e.getPropertyValue("padding-right")),r=parseInt(e.getPropertyValue("border-top-width"))+parseInt(e.getPropertyValue("border-bottom-width")),o=parseInt(e.getPropertyValue("border-left-width"))+parseInt(e.getPropertyValue("border-right-width"));return a.width=parseInt(t.getComputedStyle(d[0],null).getPropertyValue("width"))-n,a.height=parseInt(t.getComputedStyle(d[0],null).getPropertyValue("height"))-i,a.paddingHeight=i,a.paddingWidth=n,a.borderHeight=r,a.borderWidth=o,a.lineHeight=e.getPropertyValue("line-height"),a.font=e.getPropertyValue("font"),a},h=function(){if(n.fitContentHeight){var e=c(),t=a.getTextHeight(d.val(),e.font,e.width+"px",e.lineHeight),i=t+e.paddingHeight+e.borderHeight;i<40&&(i=30),d[0].style.height=i+"px",r[0].style.height=i+"px"}},f=function(){if(n.isValid=!0,u&&u.length)for(var e=0;e<u.length;e++)if(!u[e].method(d.val())){n.isValid=!1;break}};n.isFocused=!1,n.isTouched=!1;for(var y=0;y<u.length;y++)if("IsNotEmpty"===u[y].name){g=!0;break}!g&&s&&u.unshift(i.isNotEmpty()),g&&(s=!0),n.onFocus=function(){n.isFocused=!0},n.onBlur=function(){n.isFocused=!1,n.isTouched=!0,n.isValid&&"blur"===p&&(n.value=d.val()),f()},n.onKeydown=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(o=angular.element(e.target).val())},n.onKeyup=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(l=angular.element(e.target).val(),o!==l&&(n.isTouched=!0))},d.on("input",function(e){f(),h(),n.isValid&&"input"===p&&n.$apply(function(){n.value=d.val()})}),angular.element(t).on("resize",function(){h()}),e(function(){if(h(),n.isResizable===!1&&d.css("resize","none"),r.removeAttr("id"),d.attr("id",n.id),n.fitContentHeight){var t=$(r[0]).closest(".ng-hide[ng-show]");if(1===t.length){var a=t.scope();a.$watch(t.attr("ng-show"),function(t){t&&e(function(){h()})})}}}),n.$watch("value",function(e,t){e!==t&&(n.isValid=!0,n.isTouched=!1,d.val(e),h())}),d.val(n.value),f(),n.instance&&(n.instance.isValid=function(){return n.isValid})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTextBox",["$timeout",function(e){return{restrict:"E",scope:{id:"@",value:"=",size:"=",change:"&",isDisabled:"="},replace:!0,template:function(e){var t='            <div class="ma-text-box"                ng-class="{                    \'ma-text-box-is-disabled\': isDisabled                }">                <input class="ma-text-box-value form-control input-{{_size}}"                    ng-disabled="isDisabled"                    type="text"                    ng-model="value"/>            </div>';return t},link:function(t,i){var a=angular.element(i[0].querySelector(".ma-text-box-value"));t._size=t.size?t.size:"sm",e(function(){i.removeAttr("id"),a.attr("id",t.id)})}}}])}();