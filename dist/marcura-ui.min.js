!function(){angular.module("marcuraUI.services",[]),angular.module("marcuraUI.components",["marcuraUI.services"]),angular.module("marcuraUI",["marcuraUI.components"]),angular.element(document).ready(function(){var e=function(){for(var e=3,a=document.createElement("div"),n=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:null}();if(e){var a=angular.element(document.getElementsByTagName("body")[0]);a.addClass("ma-ie"+e)}$.fn.modal&&($.fn.modal.Constructor.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal"),0===$(".modal").length&&e.$body.removeClass("modal-open")})})})}();
!function(){angular.module("marcuraUI.components").directive("maButton",["maHelper",function(n){return{restrict:"E",scope:{text:"@",kind:"@",leftIcon:"@",rightIcon:"@",isDisabled:"=",click:"&",size:"@",modifier:"@"},replace:!0,template:function(){var n='                <button class="ma-button"                    ng-click="onClick()"                    ng-disabled="isDisabled"                    ng-class="{                        \'ma-button-link\': isLink(),                        \'ma-button-has-left-icon\': hasLeftIcon,                        \'ma-button-has-right-icon\': hasRightIcon,                        \'ma-button-is-disabled\': isDisabled,                        \'ma-button-has-text\': hasText                    }">                    <span ng-if="leftIcon" class="ma-button-icon ma-button-icon-left">                        <i class="fa fa-{{leftIcon}}"></i>                        <span class="ma-button-rim" ng-if="isLink()"></span>                    </span><span class="ma-button-text">{{text || \'&nbsp;\'}}</span><span ng-if="rightIcon" class="ma-button-icon ma-button-icon-right">                        <i class="fa fa-{{rightIcon}}"></i>                        <span class="ma-button-rim" ng-if="isLink()"></span>                    </span>                    <span class="ma-button-rim" ng-if="!isLink()"></span>                </button>';return n},link:function(t,i){t.hasText=!1,t.hasLeftIcon=!1,t.hasRightIcon=!1,t.size=t.size?t.size:"md",t.hasLeftIcon=!!t.leftIcon,t.hasRightIcon=!!t.rightIcon,t.hasText=!!t.text;var a="";n.isNullOrWhiteSpace(t.modifier)||(a=t.modifier.split(" "));for(var s=0;s<a.length;s++)i.addClass("ma-button-"+a[s]);i.addClass("ma-button-"+t.size),t.onClick=function(){t.isDisabled||t.click()},t.isLink=function(){return"link"===t.kind}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCheckBox",["maHelper","$timeout",function(e,s){return{restrict:"E",scope:{text:"@",value:"=",isDisabled:"=",change:"&",size:"@",rtl:"="},replace:!0,template:function(){var e='            <div class="ma-check-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-check-box-is-checked\': value === true,                    \'ma-check-box-is-disabled\': isDisabled,                    \'ma-check-box-has-text\': hasText,                    \'ma-check-box-rtl\': rtl,                    \'ma-check-box-is-focused\': isFocused                }">                <span class="ma-check-box-text">{{text || \'&nbsp;\'}}</span>                <div class="ma-check-box-inner"></div>                <i class="ma-check-box-icon fa fa-check" ng-show="value === true"></i>            </div>';return e},link:function(c,a){var n=function(){c.isDisabled?a.removeAttr("tabindex"):a.attr("tabindex","0")},i=function(){c.hasText=!!c.text};c._size=c.size?c.size:"xs",c.cssClass=" ma-check-box-"+c._size,c.isFocused=!1,c.onChange=function(){c.isDisabled||(c.value=!c.value,s(function(){c.change({value:c.value})}))},c.onFocus=function(){c.isDisabled||(c.isFocused=!0)},c.onBlur=function(){c.isDisabled||(c.isFocused=!1)},c.onKeypress=function(s){s.keyCode===e.keyCode.space&&(s.preventDefault(),c.isDisabled||c.onChange())},c.$watch("isDisabled",function(e,s){e!==s&&(e&&(c.isFocused=!1),n())}),c.$watch("text",function(e,s){e!==s&&i()}),n(),i()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCostsGrid",[function(){return{restrict:"E",scope:{costItems:"="},replace:!0,template:function(){var t='            <div class="ma-grid ma-grid-costs"                costs grid            </div>';return t},link:function(t){console.log("scope.costItems:",t.costItems)}}}])}();
!function(){angular.module("marcuraUI.components").provider("maDateBoxConfiguration",function(){this.$get=function(){return this}}).directive("maDateBox",["$timeout","MaDate","maHelper","maValidators",function(e,a,t,n){return{restrict:"E",scope:{id:"@",value:"=",timeZone:"=",culture:"=",isDisabled:"=",isRequired:"=",change:"&",validate:"&",canReset:"=",displayFormat:"=",format:"=",hasTime:"=",parser:"=",validators:"=",instance:"=",minDate:"=",maxDate:"=",changeTimeout:"=",placeholder:"@"},replace:!0,template:function(e){var a='                <div class="ma-date-box" ng-class="{                        \'ma-date-box-has-time\': hasTime,                        \'ma-date-box-is-invalid\': !isValid,                        \'ma-date-box-is-disabled\': isDisabled,                        \'ma-date-box-is-focused\': isFocused,                        \'ma-date-box-is-touched\': isTouched,                        \'ma-date-box-can-reset\': canReset,                        \'ma-date-box-is-reset-disabled\': canReset && !isDisabled && !isResetEnabled()                    }">                    <div class="ma-date-box-inner">                        <input class="ma-date-box-date" type="text" id="{{id}}"                            placeholder="{{placeholder}}"                            ng-disabled="isDisabled"                            ng-keydown="onKeydown($event)"                            ng-keyup="onKeyup($event)"/><input class="ma-date-box-hour"                                maxlength="2"                                ng-disabled="isDisabled"                                ng-show="hasTime"                                ng-keyup="onKeyup($event)"                                ng-keydown="onTimeKeydown($event)"                                /><div class="ma-date-box-colon" ng-if="hasTime">:</div><input                                 class="ma-date-box-minute" type="text"                                maxlength="2"                                ng-disabled="isDisabled"                                ng-show="hasTime"                                ng-keyup="onKeyup($event)"                                ng-keydown="onTimeKeydown($event)"/>                        <i class="ma-date-box-icon fa fa-calendar"></i>                    </div>                    <ma-button class="ma-button-reset"                        ng-show="canReset" size="xs" modifier="simple"                        right-icon="times-circle"                        click="onReset()"                        is-disabled="!isResetEnabled()">                    </ma-button>                </div>';return a},controller:["$scope","maDateBoxConfiguration",function(e,a){e.configuration={},e.configuration.displayFormat=(e.displayFormat||a.displayFormat||"dd MMM yyyy").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.format=(e.format||a.format||"yyyy-MM-ddTHH:mm:ssZ").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.timeZone=(e.timeZone||a.timeZone||"Z").replace(/GMT/g,"")}],link:function(i,o){var s,u,l,r,d,c,m,f=null,y=i.configuration.displayFormat,p=i.configuration.format,v=i.configuration.timeZone,b=angular.element(o[0].querySelector(".ma-date-box-date")),h=angular.element(o[0].querySelector(".ma-date-box-hour")),g=angular.element(o[0].querySelector(".ma-date-box-minute")),x=a.createEmpty(),D=a.parseTimeZone(v),E=0,k=[],w=i.isRequired,T=new a(i.minDate),C=new a(i.maxDate),V=null,F=Number(i.changeTimeout),q=0,R=0,S=0,K=function(e){return!x.isEqual(e)&&(i.isTouched=!0,!0)},M=function(a){var t=null;a&&!a.isEmpty()?(t=a.copy().toUtc().add(D,"minute"),b.val(t.format(y)),h.val(t.format("HH")),g.val(t.format("mm")),s||(s=b.val())):(b.val(""),h.val("00"),g.val("00")),i.isFocused&&(ee(),te(),d&&b.prop({selectionStart:q,selectionEnd:q}),c&&h.prop({selectionStart:R,selectionEnd:R}),m&&g.prop({selectionStart:S,selectionEnd:S}),e(function(){_(),ae()})),f&&f.setDate(t?t.toDate():null,!0)},Z=function(){f&&(C=new a(i.maxDate),C.isEmpty()&&(C=(new a).add(100,"year")),f.setMaxDate(C.toDate()))},B=function(){f&&(T=new a(i.minDate),T.isEmpty()&&(T=(new a).subtract(100,"year")),f.setMinDate(T.toDate()))},I=function(e){var t=a.createEmpty();return e?t=i.parser?i.parser(e):a.parse(e,i.culture):t},N=function(e){e.hour(Number(h.val())).minute(Number(g.val())).second(0)},O=function(){E=D},H=function(){f=new Pikaday({field:angular.element(o[0].querySelector(".ma-date-box-icon"))[0],position:"bottom right",onSelect:function(){var t=new a(f.getDate());return t.offset(D),i.hasTime&&(N(t),O()),e(function(){L(t)}),K(t)?void A(t):void M(t)}}),M(x),Z(),B()},G=function(){f&&f.destroy()},L=function(e,a){i.isValid=!0,V=null;var t=e?e.format(p):null;if(k&&k.length)for(var n=0;n<k.length;n++)if(!k[n].validate(t)){i.isValid=!1,V=k[n];break}a!==!1&&U(e)},z=function(){var e=!1;k=i.validators?angular.copy(i.validators):[];for(var a=0;a<k.length;a++)if("IsNotEmpty"===k[a].name){e=!0;break}!e&&w&&k.unshift(n.isNotEmpty()),e&&(w=!0),T.isEmpty()||k.push(n.isGreaterOrEqual(T,!0)),C.isEmpty()||k.push(n.isLessOrEqual(C,!0))},A=function(t){x=t||a.createEmpty(),i.value=t?t.format(p):null,e(function(){i.change({maValue:i.value})})},U=function(a){e(function(){i.validate({maValue:a?a.format(p):null})})},Y=function(){i.isTouched=!0;var e=b.val().trim(),t=""===e,n=Number(h.val()),o=Number(g.val()),u=a.createEmpty();return n>=0&&n<=23&&o>=0&&o<=59?(u=I(e),u.offset(E),t&&x.isEmpty()?void L(null):t?(L(u),void(i.isValid&&(M(null),A()))):u.isEmpty()?void(i.isValid=!1):(u.isEmpty()||!i.hasTime&&s!==e||(N(u),u.subtract(D-E,"minute")),L(u),K(u)?(u.isEmpty()||M(u),void(i.isValid&&A(u))):void M(u))):void(i.isValid=!1)},P=function(){d=!0,c=!1,m=!1,i.onFocus()},j=function(){c=!0,d=!1,m=!1,i.onFocus()},J=function(){m=!0,d=!1,c=!1,i.onFocus()},Q=function(){d=!1,i.onBlur()},W=function(){c=!1,i.onBlur()},X=function(){m=!1,i.onBlur()},_=function(){ee(),$(".ma-date-box-date",o).on("focus",P),$(".ma-date-box-hour",o).on("focus",j),$(".ma-date-box-minute",o).on("focus",J)},ee=function(){$(".ma-date-box-date",o).off("focus",P),$(".ma-date-box-hour",o).off("focus",j),$(".ma-date-box-minute",o).off("focus",J)},ae=function(){te(),$(".ma-date-box-date",o).on("blur",Q),$(".ma-date-box-hour",o).on("blur",W),$(".ma-date-box-minute",o).on("blur",X)},te=function(){$(".ma-date-box-date",o).off("blur",Q),$(".ma-date-box-hour",o).off("blur",W),$(".ma-date-box-minute",o).off("blur",X)};if(z(),i.isFocused=!1,i.isValid=!0,i.isTouched=!1,i.isResetEnabled=function(){return!i.isDisabled&&(b.val()||"00"!==h.val()||"00"!==g.val())},i.onFocus=function(){i.$apply(function(){i.isFocused=!0})},i.onBlur=function(){r&&e.cancel(r),i.$apply(function(){i.isFocused=!1,Y()})},i.onKeydown=function(e){e.keyCode!==t.keyCode.tab&&e.keyCode!==t.keyCode.shift&&(u=angular.element(e.target).val())},i.onKeyup=function(a){if(a.keyCode!==t.keyCode.tab&&a.keyCode!==t.keyCode.shift){var n=!1;l=angular.element(a.target).val(),u!==l&&(n=!0,i.isTouched=!0,O()),n&&F>0&&(q=b.prop("selectionStart"),R=h.prop("selectionStart"),S=g.prop("selectionStart"),r&&e.cancel(r),r=e(function(){Y()},F))}},i.onTimeKeydown=function(e){$.inArray(e.keyCode,[t.keyCode.backspace,t.keyCode.tab,t.keyCode["delete"]])===-1&&37!==e.keyCode&&39!==e.keyCode&&(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},i.onReset=function(){i.isDisabled||(x=a.createEmpty(),i.isTouched=!0,L(null),A(),M(null),b.focus())},i.value){var ne=I(i.value);if(ne.isEmpty())return;M(ne),x=ne,E=ne.offset()}_(),ae(),e(function(){i.isDisabled||H(),o.removeAttr("id"),b.attr("id",i.id)}),i.$watch("value",function(e,t){if(null!==e||null!==t){var n=I(e);if(n.isEmpty()&&(x=a.createEmpty(),M(null)),!K(n))return void M(n);L(n,!1),M(n),x=n,E=n.offset()}}),i.$watch("isDisabled",function(e,a){e!==a&&(i.isDisabled?G():H())});var ie=function(e,a,t){if(e!==a){var n=I(b.val().trim());n.offset(D),"maxDate"===t?Z():B(),z();for(var o=[],s=0;s<k.length;s++)"IsGreaterOrEqual"!==k[s].name&&"IsLessOrEqual"!==k[s].name||o.push(k[s]);if(o.length){var u=n.format(p);for(!V||"IsGreaterOrEqual"!==V.name&&"IsLessOrEqual"!==V.name||(V=null,i.isValid=!0),s=0;s<o.length;s++)if(!o[s].validate(u)){i.isValid=!1,V=o[s];break}i.isValid||(i.isTouched=!0),U(n)}i.isValid&&K(n)&&A(n)}};i.$watch("maxDate",function(e,a){ie(e,a,"maxDate")}),i.$watch("minDate",function(e,a){ie(e,a,"minDate")}),i.instance&&(i.instance.isInitialized=!0,i.instance.validate=function(){return i.isTouched=!0,w&&!i.value?void(i.isValid=!1):void L(I(i.value))},i.instance.isValid=function(){return i.isValid},i.instance.failedValidator=function(){return V},i.instance.refresh=function(){var e=I(i.value);M(e),L(e,!1)})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maGridOrder",[function(){return{restrict:"E",scope:{orderBy:"@",sorting:"="},replace:!0,template:function(){var r='            <div class="ma-grid-order ma-grid-order-{{sorting.direction}}"                ng-show="sorting.orderedBy === orderBy || (sorting.orderedBy === \'-\' + orderBy)">                <i class="fa fa-sort-{{sorting.direction}}"></i>            </div>';return r}}}])}();
!function(){angular.module("marcuraUI.components").directive("maMultiCheckBox",["$timeout","maValidators",function(e,i){return{restrict:"E",scope:{items:"=",itemTemplate:"=",itemTextField:"@",itemValueField:"@",value:"=",change:"&",isDisabled:"=",isRequired:"=",validators:"=",instance:"="},replace:!0,template:function(){var e='                <div class="ma-multi-check-box" ng-class="{                        \'ma-multi-check-box-is-disabled\': isDisabled,                        \'ma-multi-check-box-is-invalid\': !isValid,                        \'ma-multi-check-box-is-touched\': isTouched                    }">                    <div class="ma-multi-check-box-item" ng-repeat="item in items">                        <div class="ma-multi-check-box-background" ng-click="onChange(item)"></div>                        <div class="ma-multi-check-box-text">{{getItemText(item)}}</div><ma-check-box                            size="sm"                            value="getItemMetadata(item).isSelected"                            is-disabled="isDisabled">                        </ma-check-box>                    </div>                </div>';return e},link:function(t,a){var l=t.itemTextField||t.itemValueField,s=t.validators?angular.copy(t.validators):[],n=t.isRequired,m=!1,c={};t.isFocused=!1,t.isValid=!0,t.isTouched=!1;var d=function(e){if(t.isValid=!0,s&&s.length)for(var i=0;i<s.length;i++)if(!s[i].validate(e)){t.isValid=!1;break}};t.getItemMetadata=function(e){var i=l?e[t.itemValueField]:e;return c[i]||(c[i]={},c[i].item=e),c[i]},t.getItemText=function(e){return t.itemTemplate?t.itemTemplate(e):l?t.itemTextField?e[t.itemTextField]:void 0:e},t.onChange=function(i){if(!t.isDisabled){var a=t.value,l=[],s=t.getItemMetadata(i);s.isSelected=!s.isSelected;for(var n in c)c.hasOwnProperty(n)&&c[n].isSelected&&l.push(c[n].item);t.value=l.length?l:null,e(function(){d(t.value),t.change({maValue:t.value,maOldValue:a})})}},e(function(){if(t.value&&t.value.length&&t.items&&t.items.length)for(var e=0;e<t.value.length;e++)for(var i=0;i<t.items.length;i++)l?t.itemValueField&&t.items[i][t.itemValueField]===t.value[e][t.itemValueField]&&(t.getItemMetadata(t.items[i]).isSelected=!0):t.items[i]===t.value[e]&&(t.getItemMetadata(t.items[i]).isSelected=!0)});for(var u=0;u<s.length;u++)if("IsNotEmpty"===s[u].name){m=!0;break}!m&&n&&s.unshift(i.isNotEmpty()),m&&(n=!0),t.instance&&(t.instance.isInitialized=!0,t.instance.isValid=function(){return t.isValid},t.instance.validate=function(){d(t.value)})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maPager",["$timeout",function(e){return{restrict:"E",scope:{page:"=",totalPages:"=",change:"&"},replace:!0,template:function(){var e='<div class="ma-pager"                ><ma-button                    class="ma-button-previous"                    right-icon="chevron-left"                    size="xs"                    modifier="default"                    click="previousClick()"                    is-disabled="getPage(internalPage) <= 1"                ></ma-button                ><ma-text-box                    class="ma-pager-value"                    change="onChange(maValue, maOldValue)"                    value="internalPage">                </ma-text-box><div class="ma-pager-text">of {{getPage(totalPages)}} pages</div                ><ma-button                    class="ma-button-next"                    right-icon="chevron-right"                    size="xs"                    modifier="default"                    click="nextClick()"                    is-disabled="getPage(internalPage) >= getPage(totalPages)">                </ma-button></div>';return e},link:function(a){var t=!1;a.previousClick=function(){var e=a.getPage(a.internalPage);a.internalPage=e<=1?1:e-1},a.nextClick=function(){var e=a.getPage(a.internalPage);a.internalPage=e>=a.totalPages?1:e+1},a.onChange=function(n,i){var g=a.getPage(n),r=a.getPage(i);if(g!==r){if(g<1||g>a.getPage(a.totalPages))return a.internalPage=r,void(t=!0);t||(a.page=g,e(function(){a.change({maPage:g})})),t=!1}},e(function(){a.internalPage=a.page}),a.getPage=function(e){return e=Number(e),"number"!=typeof e||isNaN(e)?0:e}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maProgress",[function(){return{restrict:"E",scope:{steps:"=",currentStep:"="},replace:!0,template:function(){var e='            <div class="ma-progress">                <div class="ma-progress-inner">                    <div class="ma-progress-background"></div>                    <div class="ma-progress-bar" ng-style="{                        width: (calculateProgress() + \'%\')                    }">                    </div>                    <div class="ma-progress-steps">                        <div class="ma-progress-step"                            ng-style="{                                left: (calculateLeft($index) + \'%\')                            }"                            ng-repeat="step in steps"                            ng-class="{                                \'ma-progress-step-is-current\': isCurrentStep($index)                            }">                            <div class="ma-progress-text">{{$index + 1}}</div>                        </div>                    </div>                </div>                <div class="ma-progress-labels">                    <div ng-repeat="step in steps"                        class="ma-progress-label">                        {{step.text}}                    </div>                </div>            </div>';return e},link:function(e){e.calculateLeft=function(s){return 100/(e.steps.length-1)*s},e.calculateProgress=function(){return e.currentStep?e.currentStep>e.steps.length?100:100/(e.steps.length-1)*(e.currentStep-1):0},e.isCurrentStep=function(s){return s+1<=e.currentStep}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maRadioBox",["maHelper","$timeout","$sce","maValidators",function(e,i,a,t){var s={};return{restrict:"E",scope:{item:"=",itemTemplate:"=",itemTextField:"@",itemValueField:"@",value:"=",isDisabled:"=",hideText:"=",change:"&",size:"@",isRequired:"=",validators:"=",instance:"=",id:"@"},replace:!0,template:function(){var e='            <div class="ma-radio-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-radio-box-is-checked\': isChecked(),                    \'ma-radio-box-is-disabled\': isDisabled,                    \'ma-radio-box-has-text\': hasText(),                    \'ma-radio-box-is-focused\': isFocused,                    \'ma-radio-box-is-invalid\': !isValid,                    \'ma-radio-box-is-touched\': isTouched                }">                <span class="ma-radio-box-text" ng-bind-html="getItemText()"></span>                <div class="ma-radio-box-inner"></div>                <i class="ma-radio-box-icon" ng-show="isChecked()"></i>            </div>';return e},link:function(n,l,d){var o="&nbsp;",r=null,u=!n.itemTextField&&!n.itemValueField,c=n.validators?angular.copy(n.validators):[],m=n.isRequired,v=!1,f=function(){n.isDisabled?l.removeAttr("tabindex"):l.attr("tabindex","0")},h=function(){var e=null,i=n.$parent,a=d.value;for(a.indexOf(".")!==-1&&(r=a.split("."),a=r[0]);i&&!e;)i.hasOwnProperty(a)?e=i:i=i.$parent;return e},x=h();n._size=n.size?n.size:"xs",n.cssClass=" ma-radio-box-"+n._size,n.isFocused=!1,n.isValid=!0,n.isTouched=!1,n.id&&(s[n.id]||(s[n.id]=[]),s[n.id].push(n));var b=function(e){if(s[n.id])for(var i=0;i<s[n.id].length;i++){var a=s[n.id][i];a.isTouched=!0,a.validateThis(a.value)}else n.isTouched=!0,n.validateThis(e)};n.validateThis=function(e){if(n.isValid=!0,c&&c.length)for(var i=0;i<c.length;i++)if(!c[i].validate(e)){n.isValid=!1;break}},n.getItemText=function(){if(n.hideText)return o;var e;return n.itemTemplate?e=n.itemTemplate(n.item):u?e=n.item:n.itemTextField&&(e=n.item[n.itemTextField]),angular.isString(e)&&e||(e=o),a.trustAsHtml(e)},n.hasText=function(){return n.getItemText()!==o},n.isChecked=function(){return u?n.item===n.value:!!n.itemValueField&&(n.item&&n.value&&n.item[n.itemValueField]===n.value[n.itemValueField])},n.onChange=function(){if(!n.isDisabled){var e,a=n.value;if(n.value=n.item,x&&r){e=x;for(var t=0;t<r.length;t++)e=e[r[t]];e=n.item}else e=x[d.value],x[d.value]=n.item;var s=!0;s=u?a!==n.item:n.itemValueField?!(a||!n.item[n.itemValueField])||a[n.itemValueField]!==n.item[n.itemValueField]:!(a||!n.item)||JSON.stringify(a)===JSON.stringify(n.item),s&&i(function(){b(n.value),n.change({maValue:n.item,maOldValue:a})})}},n.onFocus=function(){n.isDisabled||(n.isFocused=!0)},n.onBlur=function(){n.isDisabled||(n.isFocused=!1,b(n.value))},n.onKeypress=function(i){i.keyCode===e.keyCode.space&&(i.preventDefault(),n.isDisabled||n.isChecked()||n.onChange())},n.$watch("isDisabled",function(e,i){e!==i&&(e&&(n.isFocused=!1),f())});for(var g=0;g<c.length;g++)if("IsNotEmpty"===c[g].name){v=!0;break}!v&&m&&c.unshift(t.isNotEmpty()),v&&(m=!0),n.instance&&(n.instance.isInitialized=!0,n.instance.isValid=function(){return n.isValid},n.instance.validate=function(){b(n.value)}),i(function(){n.id&&l.removeAttr("id")}),f()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maResetValue",[function(){return{restrict:"E",scope:{isDisabled:"=",click:"&"},replace:!0,template:function(){var i='            <div class="ma-reset-value" ng-class="{                    \'ma-reset-value-is-disabled\': isDisabled                }"                ng-click="onClick()">                <i class="fa fa-times"></i>            </div>';return i},link:function(i,e,a){i.onClick=function(){i.isDisabled||i.click()}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maRadioButton",["$timeout","maValidators","maHelper",function(e,i,t){return{restrict:"E",scope:{items:"=",itemTemplate:"=",itemTextField:"@",itemValueField:"@",value:"=",change:"&",isDisabled:"=",isRequired:"=",validators:"=",instance:"=",canUnselect:"="},replace:!0,template:function(){var e='                <div class="ma-radio-button" ng-class="{                        \'ma-radio-button-is-disabled\': isDisabled,                        \'ma-radio-button-is-invalid\': !isValid,                        \'ma-radio-button-is-touched\': isTouched,                        \'ma-radio-button-can-unselect\': canUnselect                    }">                    <div class="ma-radio-button-item" ng-class="{                            \'ma-radio-button-item-is-selected\': isItemSelected(item)                        }"                        ng-repeat="item in items">                        <ma-button                            class="ma-button-radio"                            text="{{getItemText(item)}}"                            modifier="simple"                            size="xs"                            is-disabled="isDisabled"                            click="onChange(item)">                        </ma-button>                    </div>                </div>';return e},link:function(a,l){var n=a.itemTextField||a.itemValueField,s=a.validators?angular.copy(a.validators):[],d=a.isRequired,u=!1;a.isFocused=!1,a.isValid=!0,a.isTouched=!1;var m=function(e){if(a.isValid=!0,s&&s.length)for(var i=0;i<s.length;i++)if(!s[i].validate(e)){a.isValid=!1;break}};a.getItemText=function(e){return a.itemTemplate?a.itemTemplate(e):n?a.itemTextField?e[a.itemTextField]:void 0:e},a.isItemSelected=function(e){return n?!!a.itemValueField&&(e&&a.value&&e[a.itemValueField]===a.value[a.itemValueField]):e===a.value},a.onChange=function(i){if(!a.isDisabled){var l=a.value,s=!0;a.value=i,s=n?a.itemValueField?!(!t.isNullOrUndefined(l)||t.isNullOrUndefined(i[a.itemValueField]))||l[a.itemValueField]!==i[a.itemValueField]:!(!t.isNullOrUndefined(l)||t.isNullOrUndefined(i))||JSON.stringify(l)===JSON.stringify(i):l!==i,a.canUnselect&&!s&&(a.value=null),(s||a.canUnselect&&!s)&&e(function(){m(a.value),a.change({maValue:a.value,maOldValue:l})})}};for(var o=0;o<s.length;o++)if("IsNotEmpty"===s[o].name){u=!0;break}!u&&d&&s.unshift(i.isNotEmpty()),u&&(d=!0),a.instance&&(a.instance.isInitialized=!0,a.instance.isValid=function(){return a.isValid},a.instance.validate=function(){m(a.value)})}}}])}();
!function(){angular.module("marcuraUI.services").factory("MaDate",[function(){function t(){var t,e=arguments;this._date=null,this._offset=0,this._isMaDate=!0,0===e.length?this._date=new Date:1===e.length?(t=e[0],i(t)?this._date=new Date(t.valueOf()):a(t)?(t.isEmpty()||(this._date=new Date(t.toDate().valueOf())),this._offset=t.offset()):"string"==typeof t?(t=c(t),this._date=t.toDate(),this._offset=t.offset()):s(t)&&(this._date=new Date(t,0,1,0,0,0))):2===e.length?"string"==typeof e[0]&&"string"==typeof e[1]?(t=c(e[0],e[1]),this._date=t.toDate(),this._offset=t.offset()):s(e[0])&&s(e[1])&&(this._date=new Date(e[0],e[1],1,0,0,0)):3===e.length&&s(e[0])&&s(e[1])&&s(e[2])?this._date=new Date(e[0],e[1],e[2],0,0,0):4===e.length&&s(e[0])&&s(e[1])&&s(e[2])&&s(e[3])?this._date=new Date(e[0],e[1],e[2],e[3],0,0):5===e.length&&s(e[0])&&s(e[1])&&s(e[2])&&s(e[3])&&s(e[4])?this._date=new Date(e[0],e[1],e[2],e[3],e[4],0):6===e.length&&s(e[0])&&s(e[1])&&s(e[2])&&s(e[3])&&s(e[4])&&s(e[5])&&(this._date=new Date(e[0],e[1],e[2],e[3],e[4],e[5]))}var e=[{language:"en",full:["January","February","March","April","May","June","July","August","September","October","November","December"],"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}],r=[{language:"en",full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}],n=[31,28,31,30,31,30,31,31,30,31,30,31],s=function(t){return t===parseInt(t,10)},i=function(t){return!!t&&("[object Date]"===Object.prototype.toString.call(t)&&t.getTime&&!isNaN(t.getTime()))},a=function(e){return e instanceof t||!!e&&e._isMaDate},u=function(t,e){return t.match(new RegExp(e,"i"))},o=function(r,s,i,a,o,h,c,f){var l,d=t.createEmpty();i=i.toString(),s=s.toString(),a=Number(a)||0,o=Number(o)||0,h=Number(h)||0,c=Number(c)||0,f=f||0,r<=99&&(r=r>=0&&r<30?"20"+r:"19"+r);var p=1===new Date(r,1,29).getMonth();if(p?n[1]=29:n[1]=28,null!==s.match(/([^\u0000-\u0080]|[a-zA-Z])$/)){for(var y=0;y<e.length;y++)for(var m=0;m<e[y].full.length;m++)if(u(s,e[y].full[m].slice(0,3))){l=m+1;break}if(!l)return d;s=l}if(s>12)return d;if(i>n[s-1])return d;var g=new Date(Number(r),Number(s-1),Number(i),a,o,h);return g.setMilliseconds(c),d=new t(g),d.offset(f),d},h=function(t,e,r){var n={day:t,month:e,isValid:!0};return"en-GB"===r&&e>12&&(n.isValid=!1),"en-US"===r&&(n.day=e,n.month=t,t>12&&(n.isValid=!1)),!r&&e>12&&(n.day=e,n.month=t),n},c=function(e,r){var n,s,u,c=t.createEmpty();if(i(e)||a(e))return e;if("string"!=typeof e)return c;if(e=e.replace(/\s+/g," "),n=/^\d{1,2}$/,null!==e.match(n)){var f=new Date;return o(f.getFullYear(),f.getMonth()+1,e)}if(n=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})$/,null!==e.match(n))return s=n.exec(e),u=h(s[1],s[3],r),u.isValid?o((new Date).getFullYear(),u.month,u.day):c;if(n=/^(\d{1,2})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==e.match(n))return s=n.exec(e),o(s[5],s[3],s[1]);if(n=/([^\u0000-\u0080]|[a-zA-Z]{3})(\s|)(\d{1,2})(,)(\s|)(\d{2,4})$/,null!==e.match(n))return s=n.exec(e),o(s[6],s[1],s[3]);if(n=/^([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==e.match(n))return s=n.exec(e),o(s[5],s[1],s[3]);if(n=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})$/,null!==e.match(n))return s=n.exec(e),o(s[1],s[3],s[5]);if(n=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4})$/,null!==e.match(n))return s=n.exec(e),u=h(s[1],s[3],r),u.isValid?o(s[5],u.month,u.day):c;if(n=/^(\d{4})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})$/,null!==e.match(n))return s=n.exec(e),o(s[1],s[3],s[5]);if(n=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})T(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)(\.(\d{3}))?(?:Z|([+-])(2[0-3]|[01][0-9]):([0-5][0-9]))$/,null!==e.match(n)){s=n.exec(e);var l=0;return 14===s.length&&(l=60*(Number(s[12])||0)+(Number(s[13])||0),"-"===s[11]&&0!==l&&(l=-l)),o(s[1],s[3],s[5],s[6],s[7],s[8],s[10],l)}return c},f=function(t,e){for(var r="",n=0;n<e;n++)r+="0";return(r+t).slice(-e)},l=function(t){return t>=-720&&t<=840},d=function(t){if(0===t)return"Z";if(!s(t))return null;if(t<-720||t>840)return null;var e="+";t<0&&(t*=-1,e="-");var r=t%60,n=(t-r)/60;return e+f(n,2)+":"+f(r,2)},p=function(t){if(!i(t)&&!a(t))return null;var n,s=arguments,u=0;if(2===s.length){if("string"==typeof s[1])n=s[1];else if(u=s[1],!l(u))return null}else if(3===s.length&&(n=s[1],u=s[2],!l(u)))return null;n=n||"yyyy-MM-ddTHH:mm:ssZ";var o=0,h=d(u),c=a(t)?t.toDate():t,p={f:["fff"],s:["ss"],m:["mm"],H:["HH"],d:["d","dd","ddd","dddd"],M:["M","MM","MMM","MMMM"],y:["yy","yyyy"],Z:["Z"]},y=c.getDate(),m=c.getDay(),g=c.getMonth(),b=c.getFullYear(),M=c.getHours(),_=c.getMinutes(),D=c.getSeconds(),v=c.getMilliseconds(),w=function(t){var e="";try{e=n.match(new RegExp(t+"+",""))[0]}catch(r){}return p[t].indexOf(e)},E=function(t){var n="";switch(t){case p.d[0]:n=y;break;case p.d[1]:n=f(y,2);break;case p.d[2]:n=r[o]["short"][m];break;case p.d[3]:n=r[o].full[m];break;case p.M[0]:n=g+1;break;case p.M[1]:n=f(g+1,2);break;case p.M[2]:n=e[o]["short"][g];break;case p.M[3]:n=e[o].full[g];break;case p.y[0]:n=f(b,2);break;case p.y[1]:n=b;break;case p.H[0]:n=f(M,2);break;case p.m[0]:n=f(_,2);break;case p.s[0]:n=f(D,2);break;case p.f[0]:n=f(v,3);break;case p.Z[0]:n=h||"Z";break;default:return""}return n},k={days:E(p.d[w("d")]),months:E(p.M[w("M")]),years:E(p.y[w("y")]),hours:E(p.H[w("H")]),minutes:E(p.m[w("m")]),seconds:E(p.s[w("s")]),milliseconds:E(p.f[w("f")]),timeZone:E(p.Z[0]),separator:/^\w+([^\w])/.exec(n)};return n.replace(/d+/,k.days).replace(/y+/,k.years).replace(/M+/,k.months).replace(/H+/,k.hours).replace(/m+/,k.minutes).replace(/s+/,k.seconds).replace(/f+/,k.milliseconds).replace(/Z+/,k.timeZone)},y=function(t){if(!t)return 0;t=t.replace(/GMT/gi,"");var e=/^(?:Z|([+-]?)(2[0-3]|[01][0-9]):([0-5][0-9]))$/.exec(t);if(!e||4!==e.length)return 0;if("Z"===e[0])return 0;var r=60*Number(e[2])+Number(e[3]);return 0!==r&&"-"===e[1]&&(r*=-1),r};return t.createEmpty=function(){return new t(null)},t.prototype.copy=function(){return new t(this)},t.prototype.toDate=function(){return this._date},t.prototype.offset=function(t){return 0===arguments.length?this._offset:(this._offset=t,this)},t.prototype.toUtc=function(){return this.isEmpty()||0===this._offset?this:(this.subtract(this._offset,"minute"),this._offset=0,this)},t.prototype.isEmpty=function(){return!this._date},t.prototype.isUtc=function(){return!this.isEmpty()&&0===this._offset},t.prototype.isEqual=function(t){return 0===this.difference(t)},t.prototype.isLess=function(t){return this.difference(t)<0},t.prototype.isLessOrEqual=function(t){return this.difference(t)<=0},t.prototype.isGreater=function(t){return this.difference(t)>0},t.prototype.isGreaterOrEqual=function(t){return this.difference(t)>=0},t.prototype.isBetween=function(e,r,n){var s=new t(e),i=new t(r);return!(this.isEmpty()||s.isEmpty()||i.isEmpty())&&(n?this.isGreaterOrEqual(s)&&this.isLessOrEqual(i):this.isGreater(s)&&this.isLess(i))},t.prototype.difference=function(e){return this.valueOf()-new t(e).valueOf()},t.prototype.valueOf=function(){if(this.isEmpty())return 0;var t=this._date.valueOf();return 0!==this._offset&&(t-=6e4*this._offset),t},t.prototype.format=function(t){return this.isEmpty()?null:p(this._date,t,this._offset)},t.prototype.add=function(t,e){if(this.isEmpty()||!t)return this;var r=new Date(this._date);switch(e){case"year":r.setFullYear(r.getFullYear()+t);break;case"quarter":r.setMonth(r.getMonth()+3*t);break;case"month":r.setMonth(r.getMonth()+t);break;case"week":r.setDate(r.getDate()+7*t);break;case"day":r.setDate(r.getDate()+t);break;case"hour":r.setTime(r.getTime()+36e5*t);break;case"minute":r.setTime(r.getTime()+6e4*t);break;case"second":r.setTime(r.getTime()+1e3*t);break;case"millisecond":r.setTime(r.getTime()+t)}return this._date=r,this},t.prototype.subtract=function(t,e){return this.add(t*-1,e)},t.prototype.millisecond=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getMilliseconds():(this._date.setMilliseconds(t),this)},t.prototype.second=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getSeconds():(this._date.setSeconds(t),this)},t.prototype.minute=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getMinutes():(this._date.setMinutes(t),this)},t.prototype.hour=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getHours():(this._date.setHours(t),this)},t.prototype.date=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getDate():(this._date.setDate(t),this)},t.prototype.month=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getMonth():(this._date.setMonth(t),this)},t.prototype.year=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getFullYear():(this._date.setFullYear(t),this)},t.prototype.startOf=function(t){switch(t){case"year":this.month(0);case"month":this.date(1);case"day":this.hour(0);case"hour":this.minute(0);case"minute":this.second(0);case"second":this.millisecond(0)}return this},t.prototype.endOf=function(t){return t?this.startOf(t).add(1,t).subtract(1,"millisecond"):this},t.parse=c,t.parseTimeZone=y,t.offsetToTimeZone=d,t.isDate=i,t.isMaDate=a,t}])}();
!function(){angular.module("marcuraUI.services").factory("maHelper",["MaDate",function(e){return{keyCode:{backspace:8,comma:188,"delete":46,down:40,end:35,enter:13,escape:27,home:36,left:37,pageDown:34,pageUp:33,period:190,right:39,shift:16,space:32,tab:9,up:38},isEmail:function(e){var r=/^([\+\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return r.test(e)},isNullOrWhiteSpace:function(e){return null===e||void 0===e||!angular.isArray(e)&&e.toString().replace(/\s/g,"").length<1},isNullOrUndefined:function(e){return null===e||angular.isUndefined(e)},formatString:function(e){for(var r="",t=0;;){var n=e.indexOf("{",t),i=e.indexOf("}",t);if(n<0&&i<0){r+=e.slice(t);break}if(i>0&&(i<n||n<0)){if("}"!==e.charAt(i+1))throw new Error("The format string contains an unmatched opening or closing brace.");r+=e.slice(t,i+1),t=i+2}else if(r+=e.slice(t,n),t=n+1,"{"!==e.charAt(t)){if(i<0)throw new Error("The format string contains an unmatched opening or closing brace.");if(i<0)break;var a=e.substring(t,i),s=a.indexOf(":"),o=parseInt(s<0?a:a.substring(0,s),10)+1;if(isNaN(o))throw new Error("The format string is invalid.");var l=arguments[o];"undefined"!=typeof l&&null!==l||(l=""),r+=l.toString(),t=i+1}else r+="{",t++}return r},changeSortingOrder:function(e,r){"-"===r.charAt(0)?e.orderedBy!==r?(e.direction="desc",e.orderedBy=r):(e.direction="asc",e.orderedBy=r.substr(1)):e.orderedBy!==r?(e.direction="asc",e.orderedBy=r):(e.direction="desc",e.orderedBy="-"+r)},getTextHeight:function(e,r,t,n){if(!r)return 0;var i=document.createElement("TEXTAREA");i.setAttribute("rows",1),i.style.font=r,i.style.width=t||"0px",i.style.border="0",i.style.overflow="hidden",i.style.padding="0",i.style.outline="0",i.style.resize="none",i.style.lineHeight=n||"normal",i.value=e,angular.element(document.querySelector("body")).append(i),i.style.height="auto",i.style.height=i.scrollHeight+"px";var a=parseInt(i.style.height);return angular.element(i).remove(),a},isGreater:function(r,t){var n=new e(r),i=new e(t);return n.isEmpty()||i.isEmpty()?r>t:n.isGreater(i)},isGreaterOrEqual:function(r,t){var n=new e(r),i=new e(t);return n.isEmpty()||i.isEmpty()?r>=t:n.isGreaterOrEqual(i)},isLess:function(r,t){var n=new e(r),i=new e(t);return n.isEmpty()||i.isEmpty()?r<t:n.isLess(i)},isLessOrEqual:function(r,t){var n=new e(r),i=new e(t);return n.isEmpty()||i.isEmpty()?r<=t:n.isLessOrEqual(i)},isJson:function(e){try{return JSON.parse(e),!0}catch(r){return!1}}}}])}();
!function(){angular.module("marcuraUI.services").factory("maValidators",["maHelper","MaDate",function(e,a){var r=function(e){if(!e)return null;var r=e.toString();return a.isMaDate(e)&&(r=e.format("dd MMM yyyy")),r};return{isNotEmpty:function(){return{name:"IsNotEmpty",message:"This field can not be empty.",validate:function(a){return angular.isArray(a)?a.length>0:!e.isNullOrWhiteSpace(a)}}},isGreater:function(a,t){var n=null;return a&&(n="This field can not be less than or equal to "+r(a)+"."),{name:"IsGreater",message:n,validate:function(r){return!(!t||!e.isNullOrWhiteSpace(r))||e.isGreater(r,a)}}},isGreaterOrEqual:function(a,t){var n=null;return a&&(n="This field can not be less than "+r(a)+"."),{name:"IsGreaterOrEqual",message:n,validate:function(r){return!(!t||!e.isNullOrWhiteSpace(r))||e.isGreaterOrEqual(r,a)}}},isLess:function(a,t){var n=null;return a&&(n="This field can not be greater than or equal to "+r(a)+"."),{name:"IsLess",message:n,validate:function(r){return!(!t||!e.isNullOrWhiteSpace(r))||e.isLess(r,a)}}},isLessOrEqual:function(a,t){var n=null;return a&&(n="This field can not be greater than "+r(a)+"."),{name:"IsLessOrEqual",message:n,validate:function(r){return!(!t||!e.isNullOrWhiteSpace(r))||e.isLessOrEqual(r,a)}}}}}])}();
!function(){angular.module("marcuraUI.components").filter("maSelectBoxOrderBy",["orderByFilter",function(e){return function(t,i){return i?e(t,i):t}}]).directive("maSelectBox",["$document","$timeout","maHelper","maValidators",function(e,t,i,l){return{restrict:"E",scope:{id:"@",items:"=",value:"=",isLoading:"=",change:"&",blur:"&",focus:"&",itemTemplate:"=",itemTextField:"@",itemValueField:"@",isDisabled:"=",isRequired:"=",validators:"=",canAddItem:"=",addItemTooltip:"@",showAddItemTooltip:"=",instance:"=",orderBy:"=",ajax:"=",canReset:"=",placeholder:"@",textPlaceholder:"@"},replace:!0,template:function(e,t){var l=!i.isNullOrWhiteSpace(t.ajax),n="                    <div class=\"ma-select-box\"                        ng-class=\"{                            'ma-select-box-can-add-item': canAddItem,                            'ma-select-box-is-text-focused': isTextFocused,                            'ma-select-box-is-disabled': isDisabled,                            'ma-select-box-is-invalid': !isValid,                            'ma-select-box-is-touched': isTouched,                            'ma-select-box-mode-add': isAddMode,                            'ma-select-box-mode-select': !isAddMode,                            'ma-select-box-can-reset': canReset,                            'ma-select-box-is-reset-disabled': canReset && !isDisabled && !isResetEnabled(),                            'ma-select-box-is-loading': isLoading                        }\">                        <div class=\"ma-select-box-spinner\" ng-if=\"isLoading && !isDisabled\">                            <div class=\"pace\">                                <div class=\"pace-activity\"></div>                            </div>                        </div>";return n+=l?'<input class="ma-select-box-input" ui-select2="options"                        ng-show="!isAddMode"                        ng-disabled="isDisabled"                        ng-change="onChange()"                        ng-model="selectedItem"/>':'                        <select ui-select2="options"                            ng-show="!isAddMode"                            ng-disabled="isDisabled"                            ng-model="selectedItem"                            ng-change="onChange()"                            placeholder="{{placeholder}}">                            <option></option>                            <option ng-repeat="item in _items | maSelectBoxOrderBy:orderBy" value="{{getOptionValue(item)}}">                                {{formatItem(item)}}                            </option>                        </select>',n+='                    <input class="ma-select-box-text" type="text" ng-show="isAddMode"                        ng-model="text"                        ng-disabled="isDisabled"                        ng-focus="onFocus(\'text\')"                        placeholder="{{textPlaceholder}}"/>                    <ma-button class="ma-button-switch"                        ng-if="canAddItem" size="xs" modifier="simple"                        tooltip="{{getAddItemTooltip()}}"                        right-icon="{{isAddMode ? \'bars\' : \'plus\'}}"                        click="toggleMode()"                        ng-focus="onFocus()"                        is-disabled="isDisabled">                    </ma-button>                    <ma-button class="ma-button-reset"                        ng-show="canReset" size="xs" modifier="simple"                        right-icon="times-circle"                        click="onReset()"                        ng-focus="onFocus()"                        is-disabled="!isResetEnabled()">                    </ma-button>                </div>'},controller:["$scope",function(e){e.getItemValue=function(t){if(!t||!e.itemValueField)return null;for(var l=e.itemValueField.split("."),n=t[l[0]],a=1;a<l.length;a++)n=n[l[a]];return i.isNullOrUndefined(n)?null:n.toString()},e.options={},e.runInitSelection=!0,e.ajax&&(e.options.ajax=e.ajax,e.options.minimumInputLength=3,e.options.escapeMarkup=function(e){return e},e.options.initSelection=function(t,i){if(e.runInitSelection&&e.getItemValue(e.value)){var l=angular.copy(e.value);l.text=e.itemTemplate?e.itemTemplate(l):l[e.itemTextField],l.id=e.getItemValue(l),e.previousSelectedItem=l,i(l)}else i();e.runInitSelection=!1})}],link:function(l,n){var a,o,s,u,d,c,r=angular.element(n[0].querySelector(".ma-select-box-text")),m=null,f=!0,g=!1,p=l.showAddItemTooltip!==!1,v=l.validators?angular.copy(l.validators):[],x=l.isRequired,h=!1;l._items=angular.isArray(l.items)?angular.copy(l.items):[],l.previousSelectedItem=l.previousSelectedItem||null,l.isAddMode=!1,l.formatItem=l.itemTemplate||function(e){return e?l.itemTextField?e[l.itemTextField]:e.toString():""},l.isTextFocused=!1,l.isValid=!0,l.isTouched=!1,l.isAjax=angular.isObject(l.ajax);var I=function(e){if(!angular.isArray(l._items))return!1;for(var t=null!==l.getItemValue(e),i=0;i<l._items.length;i++)if(t){if(l.getItemValue(l._items[i])===l.getItemValue(e))return!0}else if(l._items[i]===e)return!0;return!1},b=function(e){if(!e)return null;if(!l.itemTextField)return e;if(angular.isArray(l._items))for(var t=0;t<l._items.length;t++)if(l.getItemValue(l._items[t])===e.toString())return l._items[t];return null},A=function(e){if(!l.itemTextField)return e;if(e){var t={};return t[l.itemTextField]=e,t}return null},T=function(e){l.canAddItem&&e&&(l.isAddMode=!I(e)),S(e),l.isAddMode?(e?l.itemTextField&&e[l.itemTextField]?l.text=e[l.itemTextField].toString():l.text=e:l.text=null,m=e,l.toggleMode("add")):(e?l.isAjax||(null!==l.getItemValue(e)?l.selectedItem=l.getItemValue(e):"string"==typeof e&&(l.selectedItem=e)):l.selectedItem=null,l.previousSelectedItem=e,l.toggleMode("select"))},V=function(e,i){var n=angular.element(e.relatedTarget),s=angular.element(u.dropdown[0].querySelector(".select2-input"));l.isTextFocused=!1,"text"===i?(g=!1,l.$apply(function(){l.isTouched=!0;var e;if(l.itemTextField){if(l.value&&l.value[l.itemTextField]===l.text)return;e=A(l.text)}else{if(l.value===l.text)return;e=l.text}S(e),l.isValid&&(c=l.value||null,l.value=e,m=l.value,l.isValid&&t(function(){l.change({maValue:l.value,maOldValue:c})}))})):"select"===i&&l.$apply(function(){l.isTouched=!0}),f=l.canAddItem?!g&&n[0]!==a[0]&&n[0]!==o[0]&&n[0]!==r[0]&&n[0]!==u.focusser[0]&&n[0]!==s[0]:!g&&n[0]!==o[0]&&n[0]!==r[0]&&n[0]!==u.focusser[0]&&n[0]!==s[0],f&&l.blur({maValue:l.value}),g=!1},S=function(e){if(l.isValid=!0,v&&v.length)for(var t=0;t<v.length;t++)if(!v[t].validate(e)){l.isValid=!1;break}},F=function(){l.isAddMode?(r.focus(),l.isTextFocused=!0):s.select2("focus")};l.isResetEnabled=function(){return!l.isDisabled&&(l.isAddMode?!i.isNullOrWhiteSpace(l.text):!i.isNullOrUndefined(l.value))},l.onReset=function(){c=l.value,l.value=null,F(),t(function(){l.change({maValue:l.value,maOldValue:c})})},l.onFocus=function(e){"text"===e&&(l.isTextFocused=!0),f&&l.focus({maValue:l.value}),f=!1},r.focusout(function(e){V(e,"text")}),l.getAddItemTooltip=function(){return p?l.isAddMode?"Back to the list":l.addItemTooltip?l.addItemTooltip:"Add new item":""},l.getOptionValue=function(e){return l.itemValueField?l.getItemValue(e):e},l.toggleMode=function(e){if(l.canAddItem&&!(l.isAddMode&&"add"===e||!l.isAddMode&&"select"===e)){var i=!1;c=l.value||null,"select"===e?(l.isAddMode=!1,i=!0):"add"===e?(l.isAddMode=!0,i=!0):l.isAddMode=!l.isAddMode,l.isAddMode?(s&&s.select2("close"),l.previousSelectedItem=b(l.selectedItem),l.value=m,l.value&&(l.text="string"==typeof l.value?l.value:l.value[l.itemTextField])):(m=A(l.text),l.value=l.previousSelectedItem),i||t(function(){l.change({maValue:l.value,maOldValue:c}),F()})}},l.onChange=function(){var e=i.isJson(l.selectedItem)?JSON.parse(l.selectedItem):l.selectedItem;if("number"==typeof e&&(e=l.selectedItem),l.isAjax){if(e===l.previousSelectedItem)return;if(!angular.isObject(e))return}if(!l.isAjax&&l.itemValueField&&!i.isNullOrWhiteSpace(e))for(var n=0;n<l._items.length;n++)if(l.getItemValue(l._items[n])===e.toString()){e=l._items[n];break}if(e||l.value){if(l.itemValueField){var a=l.getItemValue(l.value);if(a&&a===l.getItemValue(e))return}else if(e===l.value)return;c=l.value,l.value=e,l.previousSelectedItem=e,t(function(){l.change({maValue:e,maOldValue:c})})}};var M=function(){l.isAjax&&u&&(u.opts.placeholder=l.value?"":l.placeholder,u.setPlaceholder(),l.runInitSelection=!0,u.initSelection())};l.$watch("items",function(e,i){angular.equals(e,i)||(l._items.splice(0,l._items.length),Array.prototype.push.apply(l._items,e),l.canAddItem&&(T(l.value),t(function(){if(angular.isObject(l.value)){var e=angular.copy(l.value);e.text=l.itemTemplate?l.itemTemplate(e):e[l.itemTextField],e.id=l.getItemValue(e),u.data(e)}else l.value?u.val(l.value):u.data(null)})))},!0),l.$watch("value",function(e,t){e!==t&&(M(),T(e))}),l.$watch("text",function(e,t){e!==t&&(l.isTouched=!0,S(e))}),l.instance&&(l.instance.isInitialized=!0,l.instance.switchToSelectMode=function(){l.isAddMode&&l.toggleMode("select")},l.instance.switchToAddMode=function(){l.isAddMode||l.toggleMode("add")},l.instance.isValid=function(){return l.isValid},l.instance.validate=function(){l.isTouched=!0,S(l.value)});for(var y={name:"IsNotEmpty",validate:function(e){return!i.isNullOrWhiteSpace(e)&&!!(l.isAjax||l.isAddMode||I(e))}},w=0;w<v.length;w++)if("IsNotEmpty"===v[w].name){h=!0,v[w]=y;break}!h&&x&&v.unshift(y),h&&(x=!0),t(function(){T(l.value),s=angular.element(n[0].querySelector(".select2-container")),u=s.data().select2,d=$('label[for="'+l.id+'"]'),a=angular.element(n[0].querySelector(".ma-button-switch")),o=angular.element(n[0].querySelector(".ma-button-reset")),M(),d.length>0&&$(e).on("click",'label[for="'+l.id+'"]',function(){F()}),u.focusser.on("focus",function(){l.onFocus("select")}),u.focusser.on("focusout",function(e){V(e,"select")}),u.dropdown.on("focus",".select2-input",function(){g=!0,l.onFocus()}),u.dropdown.on("focusout",".select2-input",function(e){V(e,"select")}),a.focusout(function(e){V(e)}),o.focusout(function(e){V(e)}),u.dropdown.on("mouseenter",".select2-result",function(){g=!0}),$(e).on("mouseenter",".select2-drop-mask",function(){g=!0})})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maSideMenu",["$state",function(e){return{restrict:"E",scope:{items:"=",select:"&",useState:"="},replace:!0,template:function(){var e='            <div class="ma-side-menu">                <div class="ma-side-menu-item" ng-repeat="item in items" ng-hide="item.hidden" ng-class="{                        \'ma-side-menu-item-is-selected\': isItemSelected(item),                        \'ma-side-menu-item-is-disabled\': item.isDisabled                    }"                    ng-click="onSelect(item)">                    <i ng-if="item.icon" class="fa fa-{{item.icon}}"></i>                    <div class="ma-side-menu-text">{{item.text}}</div>                    <div class="ma-side-menu-new" ng-if="item.new">{{item.new}}</div>                </div>            </div>';return e},link:function(t,i,s){t.$state=e;var n=t.useState!==!1;t.isItemSelected=function(t){return t.selector?t.selector():n?!(!t.state||!t.state.name)&&e.includes(t.state.name):t.isSelected},t.onSelect=function(i){i.isDisabled||(n?i.state&&i.state.name&&e.go(i.state.name,i.state.parameters):(angular.forEach(t.items,function(e){e.isSelected=!1}),i.isSelected=!0,t.select({item:i})))}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTextArea",["$timeout","$window","maHelper","maValidators",function(e,t,a,i){return{restrict:"E",scope:{id:"@",value:"=",isDisabled:"=",fitContentHeight:"=",isResizable:"=",isRequired:"=",validators:"=",instance:"=",updateOn:"@",change:"&"},replace:!0,template:function(){var e='            <div class="ma-text-area"                ng-class="{                    \'ma-text-area-is-disabled\': isDisabled,                    \'ma-text-area-is-focused\': isFocused,                    \'ma-text-area-fit-content-height\': fitContentHeight,                    \'ma-text-area-is-invalid\': !isValid,                    \'ma-text-area-is-touched\': isTouched                }">                <textarea class="ma-text-area-value"                    type="text"                    ng-focus="onFocus()"                    ng-blur="onBlur()"                    ng-keydown="onKeydown($event)"                    ng-keyup="onKeyup($event)"                    ng-disabled="isDisabled">                </textarea>            </div>';return e},link:function(n,o){var r,l,u,s=angular.element(o[0].querySelector(".ma-text-area-value")),d=n.validators?angular.copy(n.validators):[],g=n.isRequired,p=!1,c=n.updateOn?n.updateOn:"input",h=function(){var e=t.getComputedStyle(s[0],null),a={},i=parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom")),n=parseInt(e.getPropertyValue("padding-left"))+parseInt(e.getPropertyValue("padding-right")),o=parseInt(e.getPropertyValue("border-top-width"))+parseInt(e.getPropertyValue("border-bottom-width")),r=parseInt(e.getPropertyValue("border-left-width"))+parseInt(e.getPropertyValue("border-right-width"));return a.width=parseInt(t.getComputedStyle(s[0],null).getPropertyValue("width"))-n,a.height=parseInt(t.getComputedStyle(s[0],null).getPropertyValue("height"))-i,a.paddingHeight=i,a.paddingWidth=n,a.borderHeight=o,a.borderWidth=r,a.lineHeight=e.getPropertyValue("line-height"),a.font=e.getPropertyValue("font-style")+" "+e.getPropertyValue("font-variant")+" "+e.getPropertyValue("font-weight")+" "+e.getPropertyValue("font-size")+" "+e.getPropertyValue("font-height")+" "+e.getPropertyValue("font-family"),a},f=function(){if(n.fitContentHeight){var e=h(),t=a.getTextHeight(s.val(),e.font,e.width+"px",e.lineHeight),i=t+e.paddingHeight+e.borderHeight;i<40&&(i=30),s[0].style.height=i+"px",o[0].style.height=i+"px"}},y=function(){if(n.isValid=!0,d&&d.length)for(var e=0;e<d.length;e++)if(!d[e].validate(s.val())){n.isValid=!1;break}},v=function(t){u!==t&&(u=t,e(function(){n.change({maValue:t})}))};n.isFocused=!1,n.isTouched=!1;for(var m=0;m<d.length;m++)if("IsNotEmpty"===d[m].name){p=!0;break}!p&&g&&d.unshift(i.isNotEmpty()),p&&(g=!0),n.onFocus=function(){n.isFocused=!0},n.onBlur=function(){n.isFocused=!1,n.isTouched=!0,n.isValid&&"blur"===c&&(n.value=s.val(),v(n.value)),y()},n.onKeydown=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(r=angular.element(e.target).val())},n.onKeyup=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(l=angular.element(e.target).val(),r!==l&&(n.isTouched=!0))},s.on("input",function(e){y(),f(),n.isValid&&"input"===c&&n.$apply(function(){n.value=s.val()})}),angular.element(t).on("resize",function(){f()}),e(function(){if(f(),n.isResizable===!1&&s.css("resize","none"),o.removeAttr("id"),s.attr("id",n.id),n.fitContentHeight){var t=$(o[0]).closest(".ng-hide[ng-show]");if(1===t.length){var a=t.scope();a.$watch(t.attr("ng-show"),function(t){t&&e(function(){f()})})}}}),n.$watch("value",function(e,t){if(e!==t){n.isValid=!0,n.isTouched=!1;var a=s.prop("selectionStart");s.val(e),s.prop({selectionStart:a,selectionEnd:a}),f()}}),s.val(n.value),y(),u=n.value,n.instance&&(n.instance.isInitialized=!0,n.instance.isValid=function(){return n.isValid},n.instance.focus=function(){n.isFocused||s.focus()})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTextBox",["$timeout","maHelper","maValidators",function(e,a,t){return{restrict:"E",scope:{id:"@",type:"@",value:"=",isDisabled:"=",isRequired:"=",validators:"=",instance:"=",change:"&",blur:"&",focus:"&",changeTimeout:"=",canReset:"=",placeholder:"@"},replace:!0,template:function(e,a){var t="password"===a.type?"password":"text",i="            <div class=\"ma-text-box\"                ng-class=\"{                    'ma-text-box-is-disabled': isDisabled,                    'ma-text-box-is-focused': isFocused,                    'ma-text-box-is-invalid': !isValid,                    'ma-text-box-is-touched': isTouched,                    'ma-text-box-can-reset': canReset,                    'ma-text-box-is-reset-disabled': canReset && !isDisabled && !isResetEnabled()                }\">                <input class=\"ma-text-box-value\" type=\""+t+'" id="{{id}}"                    type="text"                    placeholder="{{placeholder}}"                    ng-focus="onFocus()"                    ng-blur="onBlur()"                    ng-keydown="onKeydown($event)"                    ng-disabled="isDisabled"/>                <ma-button class="ma-button-reset"                    ng-show="canReset" size="xs" modifier="simple"                    right-icon="times-circle"                    click="onReset()"                    is-disabled="!isResetEnabled()">                </ma-button>            </div>';return i},link:function(i,n){var s,o,l,u,c=angular.element(n[0].querySelector(".ma-text-box-value")),d=i.validators?angular.copy(i.validators):[],r=i.isRequired,f=!1,v=Number(i.changeTimeout),m=function(){i.isValid=!0;var e=c.val();if(d&&d.length)for(var a=0;a<d.length;a++)if(!d[a].validate(e)){i.isValid=!1;break}},b=function(a){if(l!==a){var t=l;i.value=a,l=a,e(function(){i.change({maValue:a,maOldValue:t})})}},p=function(){var e=c.val();return(!a.isNullOrUndefined(l)||""!==e)&&l!==e},x=function(){i.isTouched=!0,p()&&(m(),i.isValid&&b(c.val()))};i.isFocused=!1,i.isTouched=!1;for(var h=0;h<d.length;h++)if("IsNotEmpty"===d[h].name){f=!0;break}!f&&r&&d.unshift(t.isNotEmpty()),f&&(r=!0),i.isResetEnabled=function(){return!i.isDisabled&&""!==c.val()},i.onReset=function(){i.isDisabled||(l=c.val(),i.isTouched=!0,b(null),m(),c.focus())},i.onFocus=function(){i.isFocused=!0,i.focus({maValue:i.value})},i.onBlur=function(){u&&e.cancel(u),i.isFocused=!1,x(),i.blur({maValue:i.value})},i.onKeydown=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(s=angular.element(e.target).val())},c.on("input",function(t){if(t.keyCode!==a.keyCode.tab&&t.keyCode!==a.keyCode.shift){var i=!1;o=angular.element(t.target).val(),s!==o&&(i=!0),i&&(u&&e.cancel(u),u=e(function(){x()},v))}}),e(function(){n.removeAttr("id"),c.attr("id",i.id)}),i.$watch("value",function(e,a){if(e!==a){var t=c.prop("selectionStart");l=e,c.val(e),m(),i.isFocused&&c.prop({selectionStart:t,selectionEnd:t})}}),c.val(i.value),m(),l=i.value,i.instance&&(i.instance.isInitialized=!0,i.instance.validate=function(){i.isTouched=!0,m()},i.instance.isValid=function(){return i.isValid})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTabs",["$state","maHelper","$timeout",function(e,t,s){return{restrict:"E",scope:{items:"=",select:"&",useState:"="},replace:!0,template:function(){var e='            <div class="ma-tabs">                <ul class="ma-tabs-list clearfix">                    <li class="ma-tabs-item" ng-repeat="item in items"                        ng-focus="onFocus(item)"                        ng-blur="onBlur(item)"                        ng-keypress="onKeypress($event, item)"                        ng-class="{                            \'ma-tabs-item-is-selected\': isItemSelected(item),                            \'ma-tabs-item-is-disabled\': item.isDisabled,                            \'ma-tabs-item-is-focused\': item.isFocused                        }"                        ng-click="onSelect(item)">                        <a class="ma-tabs-link" href="" tabindex="-1">                            <span class="ma-tabs-text">{{item.text}}</span>                        </a>                    </li>                </ul>            </div>';return e},link:function(a,i,n){a.$state=e;var c=a.useState!==!1;a.isItemSelected=function(t){return t.selector?t.selector():c?!(!t.state||!t.state.name)&&e.includes(t.state.name):t.isSelected},a.onSelect=function(t){t.isDisabled||t.isSelected||(c?t.state&&t.state.name&&e.go(t.state.name,t.state.parameters):(angular.forEach(a.items,function(e){e.isSelected=!1}),t.isSelected=!0,a.select({item:t})))},a.onKeypress=function(e,s){e.keyCode===t.keyCode.enter&&a.onSelect(s)},a.onFocus=function(e){e.isFocused=!0},a.onBlur=function(e){e.isFocused=!1},s(function(){var e=angular.element(i[0].querySelectorAll(".ma-tabs-item"));e.each(function(e,t){var s=a.items[e];s.isDisabled||angular.element(t).attr("tabindex","0")})})}}}])}();