!function(){angular.module("marcuraUI.services",[]),angular.module("marcuraUI.components",["marcuraUI.services"]),angular.module("marcuraUI",["marcuraUI.components"]),angular.element(document).ready(function(){var e=function(){for(var e=3,a=document.createElement("div"),n=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:null}();if(e){var a=angular.element(document.getElementsByTagName("body")[0]);a.addClass("ma-ie"+e)}$.fn.modal&&($.fn.modal.Constructor.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal"),0===$(".modal").length&&e.$body.removeClass("modal-open")})})})}();
!function(){angular.module("marcuraUI.components").directive("maButton",[function(){return{restrict:"E",scope:{text:"@",kind:"@",leftIcon:"@",rightIcon:"@",isDisabled:"=",click:"&",size:"@",modifier:"@"},replace:!0,template:function(){var n='            <button class="ma-button{{cssClass}}"                ng-click="onClick()"                ng-disabled="isDisabled"                ng-class="{                    \'ma-button-link\': isLink(),                    \'ma-button-has-left-icon\': hasLeftIcon,                    \'ma-button-has-right-icon\': hasRightIcon,                    \'ma-button-is-disabled\': isDisabled,                    \'ma-button-has-text\': hasText                }">                <span ng-if="leftIcon" class="ma-button-icon ma-button-icon-left">                    <i class="fa fa-{{leftIcon}}"></i>                    <span class="ma-button-rim" ng-if="isLink()"></span>                </span><span class="ma-button-text">{{text || \'&nbsp;\'}}</span><span ng-if="rightIcon" class="ma-button-icon ma-button-icon-right">                    <i class="fa fa-{{rightIcon}}"></i>                    <span class="ma-button-rim" ng-if="isLink()"></span>                </span>                <span class="ma-button-rim" ng-if="!isLink()"></span>            </button>';return n},link:function(n){n.hasText=!1,n.hasLeftIcon=!1,n.hasRightIcon=!1,n.size=n.size?n.size:"md",n.cssClass=" ma-button-"+n.size,n.hasLeftIcon=!!n.leftIcon,n.hasRightIcon=!!n.rightIcon,n.hasText=!!n.text,n.modifier&&(n.cssClass+=" ma-button-"+n.modifier),n.onClick=function(){n.isDisabled||n.click()},n.isLink=function(){return"link"===n.kind}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCheckBox",["maHelper","$timeout",function(e,s){return{restrict:"E",scope:{text:"@",value:"=",isDisabled:"=",change:"&",size:"@",rtl:"="},replace:!0,template:function(){var e='            <div class="ma-check-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-check-box-is-checked\': value === true,                    \'ma-check-box-is-disabled\': isDisabled,                    \'ma-check-box-has-text\': hasText,                    \'ma-check-box-rtl\': rtl,                    \'ma-check-box-is-focused\': isFocused                }">                <span class="ma-check-box-text">{{text || \'&nbsp;\'}}</span>                <div class="ma-check-box-inner"></div>                <i class="ma-check-box-icon fa fa-check" ng-show="value === true"></i>            </div>';return e},link:function(c,a){var n=function(){c.isDisabled?a.removeAttr("tabindex"):a.attr("tabindex","0")};c._size=c.size?c.size:"xs",c.cssClass=" ma-check-box-"+c._size,c.hasText=!!c.text,c.isFocused=!1,c.onChange=function(){c.isDisabled||(c.value=!c.value,s(function(){c.change({value:c.value})}))},c.onFocus=function(){c.isDisabled||(c.isFocused=!0)},c.onBlur=function(){c.isDisabled||(c.isFocused=!1)},c.onKeypress=function(s){s.keyCode===e.keyCode.space&&(s.preventDefault(),c.isDisabled||c.onChange())},c.$watch("isDisabled",function(e,s){e!==s&&(e&&(c.isFocused=!1),n())}),n()}}}])}();
!function(){angular.module("marcuraUI.components").provider("maDateBoxConfiguration",function(){this.$get=function(){return this}}).directive("maDateBox",["$timeout","MaDate","maHelper","maValidators",function(e,a,t,n){return{restrict:"E",scope:{id:"@",value:"=",timeZone:"=",culture:"=",isDisabled:"=",isRequired:"=",change:"&",canReset:"=",displayFormat:"=",format:"=",hasTime:"=",parser:"=",validators:"=",instance:"=",minDate:"=",maxDate:"="},replace:!0,template:function(e,a){var t='                <div class="ma-date-box" ng-class="{                        \'ma-date-box-has-time\': hasTime,                        \'ma-date-box-is-invalid\': !isValid,                        \'ma-date-box-is-disabled\': isDisabled,                        \'ma-date-box-is-focused\': isFocused,                        \'ma-date-box-is-touched\': isTouched,                        \'ma-date-box-can-reset\': canReset,                        \'ma-date-box-is-reset-disabled\': canReset && !isDisabled && !isResetEnabled()                    }">                    <div class="ma-date-box-inner">                        <input class="ma-date-box-date" type="text" id="{{id}}"                            ng-disabled="isDisabled"                            ng-focus="onFocus()"                            ng-keydown="onKeydown($event)"                            ng-keyup="onKeyup($event)"                            ng-blur="onBlur()"/><input class="ma-date-box-hours"                                maxlength="2"                                ng-disabled="isDisabled"                                ng-show="hasTime"                                ng-focus="onFocus()"                                ng-keydown="onKeydown($event)"                                ng-keyup="onKeyup($event)"                                ng-blur="onBlur()"                                ng-keydown="onTimeKeydown($event)"                                /><div class="ma-date-box-colon" ng-if="hasTime">:</div><input                                 class="ma-date-box-minutes" type="text"                                maxlength="2"                                ng-disabled="isDisabled"                                ng-show="hasTime"                                ng-focus="onFocus()"                                ng-keydown="onKeydown($event)"                                ng-keyup="onKeyup($event)"                                ng-blur="onBlur()"                                ng-keydown="onTimeKeydown($event)"/>                        <i class="ma-date-box-icon fa fa-calendar"></i>                    </div>                    <ma-button class="ma-button-reset"                        ng-show="canReset" size="xs" modifier="simple"                        right-icon="times-circle"                        click="onReset()"                        is-disabled="!isResetEnabled()">                    </ma-button>                </div>';return t},controller:["$scope","maDateBoxConfiguration",function(e,a){e.configuration={},e.configuration.displayFormat=(e.displayFormat||a.displayFormat||"dd MMM yyyy").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.format=(e.format||a.format||"yyyy-MM-ddTHH:mm:ssZ").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.timeZone=(e.timeZone||a.timeZone||"Z").replace(/GMT/g,"")}],link:function(i,o){var s,l,d,r=null,u=i.configuration.displayFormat,c=i.configuration.format,m=i.configuration.timeZone,f=angular.element(o[0].querySelector(".ma-date-box-date")),v=angular.element(o[0].querySelector(".ma-date-box-hours")),y=angular.element(o[0].querySelector(".ma-date-box-minutes")),g=null,h=a.parseTimeZone(m),b=0,p=[],D=i.isRequired,w=new a(i.minDate),k=new a(i.maxDate),x=function(t){var n=null;g=t,t&&(n=moment(new Date),n.year(t.year()).month(t.month()).date(t.date()).hours(t.hours()).minutes(t.minutes()).seconds(0)),i.value=n?a.format(n,c,m):null,e(function(){i.change({maValue:i.value})})},T=function(e){return!(null===g&&null===e||g&&e&&0===g.diff(e))&&(i.isTouched=!0,!0)},C=function(e){var t=null;e&&e.date?(t=a.offsetUtc(e.date,h-e.offset),f.val(a.format(t,u)),v.val(a.format(t,"HH")),y.val(a.format(t,"mm")),s||(s=f.val())):(f.val(""),v.val("00"),y.val("00")),V(t)},V=function(e){r&&r.setDate(e?e.toDate():null,!0)},F=function(){if(r){k=new a(i.maxDate);var e=k.date;e||(e=new Date,e=new Date(e.setFullYear(e.getFullYear()+100)),k=new a(e)),r.setMaxDate(e)}},E=function(){if(r){w=new a(i.minDate);var e=w.date;e||(e=new Date,e=new Date(e.setFullYear(e.getFullYear()-100)),w=new a(e)),r.setMinDate(e)}},q=function(e){var t=new a;return e?(t=i.parser?i.parser(e):a.parse(e,i.culture),t.isEmpty()||(t.date=moment(t.date)),t):t},K=function(e){var a=moment(e);return moment([a.year(),a.month(),a.date(),Number(v.val()),Number(y.val()),0])},R=function(){b=h},M=function(){r=new Pikaday({field:angular.element(o[0].querySelector(".ma-date-box-icon"))[0],position:"bottom right",onSelect:function(){var t=new a(r.getDate());return t.date=a.offsetUtc(t.date),i.hasTime&&(t.date=K(t.date),R()),e(function(){I(t.date)}),T(t.date)?void x(t.date):void C(t)}}),V(g),F(),E()},Z=function(){r&&r.destroy()},B=null,I=function(e){i.isValid=!0,B=null;var t=e?a.format(e,c):null;if(p&&p.length)for(var n=0;n<p.length;n++)if(!p[n].validate(t)){i.isValid=!1,B=p[n];break}},N=function(){var e=!1;p=i.validators?angular.copy(i.validators):[];for(var a=0;a<p.length;a++)if("IsNotEmpty"===p[a].name){e=!0;break}!e&&D&&p.unshift(n.isNotEmpty()),e&&(D=!0),w.isEmpty()||p.push(n.isGreaterThanOrEqual(w,!0)),k.isEmpty()||p.push(n.isLessThanOrEqual(k,!0))};if(N(),i.isFocused=!1,i.isValid=!0,i.isTouched=!1,i.isResetEnabled=function(){return!i.isDisabled&&(f.val()||"00"!==v.val()||"00"!==y.val())},i.onFocus=function(){i.isFocused=!0},i.onBlur=function(){i.isFocused=!1,i.isTouched=!0;var e=f.val().trim(),t=""===e,n=Number(v.val()),o=Number(y.val()),l=new a;return n>=0&&n<=23&&o>=0&&o<=59?(l=q(e),l.offset=b,t&&null===g?void I(null):t?(I(l.date),void(i.isValid&&(C(),x()))):l.date?(l.date&&(i.hasTime||s===e)&&(l.date=K(l.date),l.date=a.offsetUtc(l.date,-(h-b))),I(l.date),T(l.date)?(l.date&&C(l),void(i.isValid&&x(l.date))):void C(l)):void(i.isValid=!1)):void(i.isValid=!1)},i.onKeydown=function(e){e.keyCode!==t.keyCode.tab&&e.keyCode!==t.keyCode.shift&&(l=angular.element(e.target).val())},i.onKeyup=function(e){e.keyCode!==t.keyCode.tab&&e.keyCode!==t.keyCode.shift&&(d=angular.element(e.target).val(),l!==d&&(i.isTouched=!0,R()))},i.onTimeKeydown=function(e){$.inArray(e.keyCode,[t.keyCode.backspace,t.keyCode.tab,t.keyCode["delete"]])===-1&&37!==e.keyCode&&39!==e.keyCode&&(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},i.onReset=function(){i.isDisabled||(g=null,i.isTouched=!0,I(null),x(),C(),f.focus())},i.value){var O=a.parse(i.value,i.culture);if(O.date=a.offsetUtc(O.date),O.isEmpty())return;C(O),g=O.date,b=O.offset}e(function(){i.isDisabled||M(),o.removeAttr("id"),f.attr("id",i.id)}),i.$watch("value",function(e,a){if(null!==e||null!==a){var t=q(e);if(null===t.date&&(g=null,C(null)),!T(t.date))return void C(t);C(t),g=t.date,b=t.offset}}),i.$watch("isDisabled",function(e,a){e!==a&&(i.isDisabled?Z():M())});var Y=function(e,t,n){if(e!==t){var o=q(f.val().trim());"maxDate"===n?F():E(),N();for(var s=[],l=0;l<p.length;l++)"IsGreaterThanOrEqual"!==p[l].name&&"IsLessThanOrEqual"!==p[l].name||s.push(p[l]);if(s.length){var d=o.date?a.format(o.date,c):null;for(!B||"IsGreaterThanOrEqual"!==B.name&&"IsLessThanOrEqual"!==B.name||(B=null,i.isValid=!0),l=0;l<s.length;l++)if(!s[l].validate(d)){i.isValid=!1,B=s[l];break}i.isValid||(i.isTouched=!0)}i.isValid&&T(o.date)&&x(o.date)}};i.$watch("maxDate",function(e,a){Y(e,a,"maxDate")}),i.$watch("minDate",function(e,a){Y(e,a,"minDate")}),i.instance&&(i.instance.isInitialized=!0,i.instance.validate=function(){return i.isTouched=!0,D&&!i.value?void(i.isValid=!1):void I(q(i.value).date)},i.instance.isValid=function(){return i.isValid},i.instance.failedValidator=function(){return B})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCostsGrid",[function(){return{restrict:"E",scope:{costItems:"="},replace:!0,template:function(){var t='            <div class="ma-grid ma-grid-costs"                costs grid            </div>';return t},link:function(t){console.log("scope.costItems:",t.costItems)}}}])}();
!function(){angular.module("marcuraUI.components").directive("maGridOrder",[function(){return{restrict:"E",scope:{orderBy:"@",sorting:"="},replace:!0,template:function(){var r='            <div class="ma-grid-order ma-grid-order-{{sorting.direction}}"                ng-show="sorting.orderedBy === orderBy || (sorting.orderedBy === \'-\' + orderBy)">                <i class="fa fa-sort-{{sorting.direction}}"></i>            </div>';return r}}}])}();
!function(){angular.module("marcuraUI.components").directive("maProgress",[function(){return{restrict:"E",scope:{steps:"=",currentStep:"="},replace:!0,template:function(){var e='            <div class="ma-progress">                <div class="ma-progress-inner">                    <div class="ma-progress-background"></div>                    <div class="ma-progress-bar" ng-style="{                        width: (calculateProgress() + \'%\')                    }">                    </div>                    <div class="ma-progress-steps">                        <div class="ma-progress-step"                            ng-style="{                                left: (calculateLeft($index) + \'%\')                            }"                            ng-repeat="step in steps"                            ng-class="{                                \'ma-progress-step-is-current\': isCurrentStep($index)                            }">                            <div class="ma-progress-text">{{$index + 1}}</div>                        </div>                    </div>                </div>                <div class="ma-progress-labels">                    <div ng-repeat="step in steps"                        class="ma-progress-label">                        {{step.text}}                    </div>                </div>            </div>';return e},link:function(e){e.calculateLeft=function(s){return 100/(e.steps.length-1)*s},e.calculateProgress=function(){return e.currentStep?e.currentStep>e.steps.length?100:100/(e.steps.length-1)*(e.currentStep-1):0},e.isCurrentStep=function(s){return s+1<=e.currentStep}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maRadioBox",["maHelper","$timeout","$sce","maValidators",function(e,i,a,t){var s={};return{restrict:"E",scope:{item:"=",itemTemplate:"=",itemTextField:"@",itemValueField:"@",value:"=",isDisabled:"=",hideText:"=",change:"&",size:"@",isRequired:"=",validators:"=",instance:"=",id:"@"},replace:!0,template:function(){var e='            <div class="ma-radio-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-radio-box-is-checked\': isChecked(),                    \'ma-radio-box-is-disabled\': isDisabled,                    \'ma-radio-box-has-text\': hasText(),                    \'ma-radio-box-is-focused\': isFocused,                    \'ma-radio-box-is-invalid\': !isValid,                    \'ma-radio-box-is-touched\': isTouched                }">                <span class="ma-radio-box-text" ng-bind-html="getItemText()"></span>                <div class="ma-radio-box-inner"></div>                <i class="ma-radio-box-icon" ng-show="isChecked()"></i>            </div>';return e},link:function(n,l,d){var o="&nbsp;",r=null,u=!n.itemTextField&&!n.itemValueField,c=n.validators?angular.copy(n.validators):[],m=n.isRequired,v=!1,f=function(){n.isDisabled?l.removeAttr("tabindex"):l.attr("tabindex","0")},h=function(){var e=null,i=n.$parent,a=d.value;for(a.indexOf(".")!==-1&&(r=a.split("."),a=r[0]);i&&!e;)i.hasOwnProperty(a)?e=i:i=i.$parent;return e},x=h();n._size=n.size?n.size:"xs",n.cssClass=" ma-radio-box-"+n._size,n.isFocused=!1,n.isValid=!0,n.isTouched=!1,n.id&&(s[n.id]||(s[n.id]=[]),s[n.id].push(n));var b=function(e){if(s[n.id])for(var i=0;i<s[n.id].length;i++){var a=s[n.id][i];a.isTouched=!0,a.validateThis(a.value)}else n.isTouched=!0,n.validateThis(e)};n.validateThis=function(e){if(n.isValid=!0,c&&c.length)for(var i=0;i<c.length;i++)if(!c[i].validate(e)){n.isValid=!1;break}},n.getItemText=function(){if(n.hideText)return o;var e;return n.itemTemplate?e=n.itemTemplate(n.item):u?e=n.item:n.itemTextField&&(e=n.item[n.itemTextField]),angular.isString(e)&&e||(e=o),a.trustAsHtml(e)},n.hasText=function(){return n.getItemText()!==o},n.isChecked=function(){return u?n.item===n.value:!!n.itemValueField&&(n.item&&n.value&&n.item[n.itemValueField]===n.value[n.itemValueField])},n.onChange=function(){if(!n.isDisabled){var e,a=n.value;if(n.value=n.item,x&&r){e=x;for(var t=0;t<r.length;t++)e=e[r[t]];e=n.item}else e=x[d.value],x[d.value]=n.item;var s=!0;s=u?a!==n.item:n.itemValueField?!(a||!n.item[n.itemValueField])||a[n.itemValueField]!==n.item[n.itemValueField]:!(a||!n.item)||JSON.stringify(a)===JSON.stringify(n.item),s&&i(function(){b(n.value),n.change({maValue:n.item,maOldValue:a})})}},n.onFocus=function(){n.isDisabled||(n.isFocused=!0)},n.onBlur=function(){n.isDisabled||(n.isFocused=!1,b(n.value))},n.onKeypress=function(i){i.keyCode===e.keyCode.space&&(i.preventDefault(),n.isDisabled||n.isChecked()||n.onChange())},n.$watch("isDisabled",function(e,i){e!==i&&(e&&(n.isFocused=!1),f())});for(var g=0;g<c.length;g++)if("IsNotEmpty"===c[g].name){v=!0;break}!v&&m&&c.unshift(t.isNotEmpty()),v&&(m=!0),n.instance&&(n.instance.isValid=function(){return n.isValid},n.instance.validate=function(){b(n.value)}),i(function(){n.id&&l.removeAttr("id")}),f()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maResetValue",[function(){return{restrict:"E",scope:{isDisabled:"=",click:"&"},replace:!0,template:function(){var i='            <div class="ma-reset-value" ng-class="{                    \'ma-reset-value-is-disabled\': isDisabled                }"                ng-click="onClick()">                <i class="fa fa-times"></i>            </div>';return i},link:function(i,e,a){i.onClick=function(){i.isDisabled||i.click()}}}}])}();
!function(){angular.module("marcuraUI.components").filter("maSelectBoxOrderBy",["orderByFilter",function(e){return function(t,i){return i?e(t,i):t}}]).directive("maSelectBox",["$document","$timeout","maHelper","maValidators",function(e,t,i,n){return{restrict:"E",scope:{id:"@",items:"=",value:"=",isLoading:"=",change:"&",blur:"&",focus:"&",itemTemplate:"=",itemTextField:"@",itemValueField:"@",isDisabled:"=",isRequired:"=",validators:"=",canSearch:"=",canAddItem:"=",addItemTooltip:"@",showAddItemTooltip:"=",instance:"=",orderBy:"=",ajax:"=",canReset:"=",placeholder:"@",textPlaceholder:"@"},replace:!0,template:function(e,t){var n=!i.isNullOrWhiteSpace(t.ajax),l="                    <div class=\"ma-select-box\"                        ng-class=\"{                            'ma-select-box-can-add-item': canAddItem,                            'ma-select-box-is-text-focused': isTextFocused,                            'ma-select-box-is-disabled': isDisabled,                            'ma-select-box-is-invalid': !isValid,                            'ma-select-box-is-touched': isTouched,                            'ma-select-box-mode-add': isAddMode,                            'ma-select-box-mode-select': !isAddMode,                            'ma-select-box-can-reset': canReset,                            'ma-select-box-is-reset-disabled': canReset && !isDisabled && !isResetEnabled(),                            'ma-select-box-is-loading': isLoading                        }\">                        <div class=\"ma-select-box-spinner\" ng-if=\"isLoading && !isDisabled\">                            <div class=\"pace\">                                <div class=\"pace-activity\"></div>                            </div>                        </div>";return l+=n?'<input ui-select2="options"                        ng-show="!isAddMode"                        ng-disabled="isDisabled"                        ng-change="onChange()"                        ng-model="selectedItem"                        placeholder="{{placeholder}}"/>':'                        <select ui-select2="options"                            ng-show="!isAddMode"                            ng-disabled="isDisabled"                            ng-model="selectedItem"                            ng-change="onChange()"                            placeholder="{{placeholder}}">                            <option></option>                            <option ng-repeat="item in items | maSelectBoxOrderBy:orderBy" value="{{getOptionValue(item)}}">                                {{formatItem(item)}}                            </option>                        </select>',l+='                    <input class="ma-select-box-text" type="text" ng-show="isAddMode"                        ng-model="text"                        ng-disabled="isDisabled"                        ng-focus="onFocus(\'text\')"                        placeholder="{{textPlaceholder}}"/>                    <ma-button class="ma-button-switch"                        ng-if="canAddItem" size="xs" modifier="simple"                        tooltip="{{getAddItemTooltip()}}"                        right-icon="{{isAddMode ? \'bars\' : \'plus\'}}"                        click="toggleMode()"                        ng-focus="onFocus()"                        is-disabled="isDisabled">                    </ma-button>                    <ma-button class="ma-button-reset"                        ng-show="canReset" size="xs" modifier="simple"                        right-icon="times-circle"                        click="onReset()"                        ng-focus="onFocus()"                        is-disabled="!isResetEnabled()">                    </ma-button>                </div>'},controller:["$scope",function(e){e.getItemValue=function(t){if(!t||!e.itemValueField)return null;for(var n=e.itemValueField.split("."),l=t[n[0]],o=1;o<n.length;o++)l=l[n[o]];return i.isNullOrUndefined(l)?null:l.toString()},e.options={},e.canSearch||(e.options.minimumResultsForSearch=-1),e.ajax&&(e.options.ajax=e.ajax,e.options.minimumInputLength=3,e.options.escapeMarkup=function(e){return e},e.options.initSelection=function t(i,n){if(t.runs=t.runs?t.runs:1,1===t.runs&&e.getItemValue(e.value)){var l=angular.copy(e.value);l.text=e.itemTemplate?e.itemTemplate(l):l[e.itemTextField],l.id=e.getItemValue(l),e.previousSelectedItem=l,n(l)}else n();t.runs++})}],link:function(n,l){var o,s,a,d,u,c=angular.element(l[0].querySelector(".ma-select-box-text")),r=null,m=!0,f=!1,g=n.showAddItemTooltip!==!1,p=n.validators?angular.copy(n.validators):[],x=n.isRequired,v=!1;n.previousSelectedItem=n.previousSelectedItem||null,n.isAddMode=!1,n.formatItem=n.itemTemplate||function(e){return e?n.itemTextField?e[n.itemTextField]:e.toString():""},n.isTextFocused=!1,n.isValid=!0,n.isTouched=!1,n.isAjax=angular.isObject(n.ajax);var h=function(e){if(!angular.isArray(n.items))return!1;for(var t=null!==n.getItemValue(e),i=0;i<n.items.length;i++)if(t){if(n.getItemValue(n.items[i])===n.getItemValue(e))return!0}else if(n.items[i]===e)return!0;return!1},b=function(e){if(!e)return null;if(!n.itemTextField)return e;if(angular.isArray(n.items))for(var t=0;t<n.items.length;t++)if(n.getItemValue(n.items[t])===e.toString())return n.items[t];return null},I=function(e){if(!n.itemTextField)return e;if(e){var t={};return t[n.itemTextField]=e,t}return null},A=function(e){n.canAddItem&&e&&(n.isAddMode=!h(e)),V(e),n.isAddMode?(e?n.itemTextField&&e[n.itemTextField]?n.text=e[n.itemTextField].toString():n.text=e:n.text=null,r=e,n.toggleMode("add")):(e?n.isAjax||(null!==n.getItemValue(e)?n.selectedItem=n.getItemValue(e):"string"==typeof e&&(n.selectedItem=e)):n.selectedItem=null,n.previousSelectedItem=e,n.toggleMode("select"))},T=function(e,i){var l=angular.element(e.relatedTarget),a=angular.element(d.dropdown[0].querySelector(".select2-input"));n.isTextFocused=!1,"text"===i?(f=!1,n.$apply(function(){n.isTouched=!0;var e;if(n.itemTextField){if(n.value&&n.value[n.itemTextField]===n.text)return;e=I(n.text)}else{if(n.value===n.text)return;e=n.text}V(e),n.isValid&&(n.value=e,r=n.value,n.isValid&&t(function(){n.change({maValue:n.value})}))})):"select"===i&&n.$apply(function(){n.isTouched=!0}),m=n.canAddItem?!f&&l[0]!==o[0]&&l[0]!==s[0]&&l[0]!==c[0]&&l[0]!==d.focusser[0]&&l[0]!==a[0]:!f&&l[0]!==s[0]&&l[0]!==c[0]&&l[0]!==d.focusser[0]&&l[0]!==a[0],m&&n.blur({item:n.value}),f=!1},V=function(e){if(n.isValid=!0,p&&p.length)for(var t=0;t<p.length;t++)if(!p[t].validate(e)){n.isValid=!1;break}},F=function(){n.isAddMode?(c.focus(),n.isTextFocused=!0):a.select2("focus")};n.isResetEnabled=function(){return!n.isDisabled&&(n.isAddMode?!i.isNullOrWhiteSpace(n.text):!i.isNullOrUndefined(n.value))},n.onReset=function(){n.value=null,F(),t(function(){n.change({maValue:n.value})})},n.onFocus=function(e){"text"===e&&(n.isTextFocused=!0),m&&n.focus({item:n.value}),m=!1},c.focusout(function(e){T(e,"text")}),n.getAddItemTooltip=function(){return g?n.isAddMode?"Back to the list":n.addItemTooltip?n.addItemTooltip:"Add new item":""},n.getOptionValue=function(e){return n.itemValueField?n.getItemValue(e):e},n.toggleMode=function(e){if(n.canAddItem&&!(n.isAddMode&&"add"===e||!n.isAddMode&&"select"===e)){var i=!1;"select"===e?(n.isAddMode=!1,i=!0):"add"===e?(n.isAddMode=!0,i=!0):n.isAddMode=!n.isAddMode,n.isAddMode?(a&&a.select2("close"),n.previousSelectedItem=b(n.selectedItem),n.value=r,n.value&&(n.text="string"==typeof n.value?n.value:n.value[n.itemTextField])):(r=I(n.text),n.value=n.previousSelectedItem),i||t(function(){n.change({maValue:n.value}),F()})}},n.onChange=function(){var e=i.isJson(n.selectedItem)?JSON.parse(n.selectedItem):n.selectedItem;if(n.isAjax){if(e===n.previousSelectedItem)return;if(!angular.isObject(e))return}if(!n.isAjax&&n.itemValueField&&!i.isNullOrWhiteSpace(e))for(var l=0;l<n.items.length;l++)if(n.getItemValue(n.items[l])===e.toString()){e=n.items[l];break}if(e||n.value){if(n.itemValueField){var o=n.getItemValue(n.value);if(o&&o===n.getItemValue(e))return}else if(e===n.value)return;n.value=e,n.previousSelectedItem=e,t(function(){n.change({maValue:e})})}},n.$watch("value",function(e,t){e!==t&&A(e)}),n.$watch("text",function(e,t){e!==t&&(n.isTouched=!0,V(e))}),n.instance&&(n.instance.switchToSelectMode=function(){n.isAddMode&&n.toggleMode("select")},n.instance.switchToAddMode=function(){n.isAddMode||n.toggleMode("add")},n.instance.isValid=function(){return n.isValid},n.instance.validate=function(){n.isTouched=!0,V(n.value)});for(var M={name:"IsNotEmpty",validate:function(e){return!i.isNullOrWhiteSpace(e)&&!!(n.isAjax||n.isAddMode||h(e))}},S=0;S<p.length;S++)if("IsNotEmpty"===p[S].name){v=!0,p[S]=M;break}!v&&x&&p.unshift(M),v&&(x=!0),t(function(){A(n.value),a=angular.element(l[0].querySelector(".select2-container")),d=a.data().select2,u=$('label[for="'+n.id+'"]'),o=angular.element(l[0].querySelector(".ma-button-switch")),s=angular.element(l[0].querySelector(".ma-button-reset")),u.length>0&&$(e).on("click",'label[for="'+n.id+'"]',function(){F()}),d.focusser.on("focus",function(){n.onFocus("select")}),d.focusser.on("focusout",function(e){T(e,"select")}),d.dropdown.on("focus",".select2-input",function(){f=!0,n.onFocus()}),d.dropdown.on("focusout",".select2-input",function(e){T(e,"select")}),o.focusout(function(e){T(e)}),s.focusout(function(e){T(e)}),d.dropdown.on("mouseenter",".select2-result",function(){f=!0}),$(e).on("mouseenter",".select2-drop-mask",function(){f=!0})})}}}])}();
!function(){angular.module("marcuraUI.services").factory("MaDate",[function(){function e(t,r){if(this.date=t||null,this.offset=r||0,t instanceof e&&(this.date=t.date,this.offset=t.offset),angular.isString(t)){var n=s(t);this.date=n.date,this.offset=n.offset}}var t=[{language:"en",items:["January","February","March","April","May","June","July","August","September","October","November","December"]}],r=[31,28,31,30,31,30,31,31,30,31,30,31],n=function(e){return!!e&&("[object Date]"===Object.prototype.toString.call(e)&&e.getTime&&!isNaN(e.getTime()))},a=function(e,t){return e.match(new RegExp(t,"i"))},u=function(n,u,i,s,c,f,o){var l,d=new e;i=i.toString(),u=u.toString(),s=s||0,c=c||0,f=f||0,o=o||0,n<=99&&(n=n>=0&&n<30?"20"+n:"19"+n);var m=1===new Date(n,1,29).getMonth();if(m?r[1]=29:r[1]=28,null!==u.match(/([^\u0000-\u0080]|[a-zA-Z])$/)){for(var h=0;h<t.length;h++)for(var y=0;y<t[h].items.length;y++)if(a(u,t[h].items[y].slice(0,3))){l=y+1;break}if(!l)return d;u=l}return u>12?d:i>r[u-1]?d:(d.date=new Date(n,u-1,i,s,c,f),d.offset=o,d)},i=function(e,t,r){var n={day:e,month:t,isValid:!0};return"en-GB"===r&&t>12&&(n.isValid=!1),"en-US"===r&&(n.day=t,n.month=e,e>12&&(n.isValid=!1)),!r&&t>12&&(n.day=t,n.month=e),n},s=function(t,r){var n,a,s,c=new e;if(t instanceof Date||t instanceof e)return t;if(!angular.isString(t))return c;if(n=/^\d{1,2}$/,null!==t.match(n)){var f=new Date;return u(f.getFullYear(),f.getMonth()+1,t)}if(n=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})$/,null!==t.match(n))return a=n.exec(t),s=i(a[1],a[3],r),s.isValid?u((new Date).getFullYear(),s.month,s.day):c;if(n=/^(\d{1,2})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==t.match(n))return a=n.exec(t),u(a[5],a[3],a[1]);if(n=/([^\u0000-\u0080]|[a-zA-Z]{3})(\s|)(\d{1,2})(,)(\s|)(\d{2,4})$/,null!==t.match(n))return a=n.exec(t),u(a[6],a[1],a[3]);if(n=/^([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==t.match(n))return a=n.exec(t),u(a[5],a[1],a[3]);if(n=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})$/,null!==t.match(n))return a=n.exec(t),u(a[1],a[3],a[5]);if(n=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4})$/,null!==t.match(n))return a=n.exec(t),s=i(a[1],a[3],r),s.isValid?u(a[5],s.month,s.day):c;if(n=/^(\d{4})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})$/,null!==t.match(n))return a=n.exec(t),u(a[1],a[3],a[5]);if(n=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})T(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)(?:Z|([+-])(2[0-3]|[01][0-9]):([0-5][0-9]))$/,null!==t.match(n)){a=n.exec(t);var o=0;return 12===a.length&&(o=60*(Number(a[10])||0)+(Number(a[11])||0),"-"===a[9]&&0!==o&&(o=-o)),u(a[1],a[3],a[5],a[6],a[7],a[8],o)}return c},c=function(e,r,a){var u=0,i=e&&e.isValid&&e.isValid();if(a=a||"",!n(e)&&!i)return null;if(!angular.isString(r))return null;var s={s:["ss"],m:["mm"],H:["HH"],d:["d","dd"],M:["M","MM","MMM","MMMM"],y:["yy","yyyy"],Z:["Z"]},c=function(e){var t="";try{t=r.match(new RegExp(e+"+",""))[0]}catch(n){}return s[e].indexOf(t)},f=function(e,t){for(var r="",n=0;n<t;n++)r+="0";return(r+e).slice(-t)},o=i?e.date():e.getDate(),l=i?e.month():e.getMonth(),d=i?e.year():e.getFullYear(),m=i?e.hours():e.getHours(),h=i?e.minutes():e.getMinutes(),y=i?e.seconds():e.getSeconds(),g=function(e){var r="";switch(e){case s.d[0]:r=o;break;case s.d[1]:r=f(o,2);break;case s.M[0]:r=l+1;break;case s.M[1]:r=f(l+1,2);break;case s.M[2]:r=t[u].items[l].substr(0,3);break;case s.M[3]:r=t[u].items[l];break;case s.y[0]:r=f(d,2);break;case s.y[1]:r=d;break;case s.H[0]:r=f(m,2);break;case s.m[0]:r=f(h,2);break;case s.s[0]:r=f(y,2);break;case s.Z[0]:r=a||"Z";break;default:return""}return r},b={days:g(s.d[c("d")]),months:g(s.M[c("M")]),years:g(s.y[c("y")]),hours:g(s.H[c("H")]),minutes:g(s.m[c("m")]),seconds:g(s.s[c("s")]),timeZone:g(s.Z[0]),separator:/^\w+([^\w])/.exec(r)};return r.replace(/d+/,b.days).replace(/y+/,b.years).replace(/M+/,b.months).replace(/H+/,b.hours).replace(/m+/,b.minutes).replace(/s+/,b.seconds).replace(/Z+/,b.timeZone)},f=function(e,t){if(!e)return null;if(t=t||0,n(e)||e.isValid&&e.isValid())return moment(e).add(t,"m");if("string"==typeof e){var r=moment(e).minute(moment(e).minute()+moment().utcOffset()*-1+t);return r.isValid()?r:null}},o=function(e){if(!e)return null;var t=s(e);if(!t)return null;var r=t.date.valueOf();return 0!==t.offset&&(r-=6e4*t.offset),r},l=function(e,t){var r=e?o(e):0,n=t?o(t):0;return r-n},d=function(e){if(!e)return 0;e=e.replace(/GMT/gi,"");var t=/^(?:Z|([+-]?)(2[0-3]|[01][0-9]):([0-5][0-9]))$/.exec(e);if(!t||4!==t.length)return 0;if("Z"===t[0])return 0;var r=60*Number(t[2])+Number(t[3]);return 0!==r&&"-"===t[1]&&(r*=-1),r};return e.prototype.isEmpty=function(){return!this.date},e.prototype.difference=function(e){return l(this,e)},e.prototype.format=function(e,t){return c(this.date,e,t)},e.parse=s,e.parseTimeZone=d,e.format=c,e.offsetUtc=f,e.isDate=n,e.valueOf=o,e.difference=l,e}])}();
!function(){angular.module("marcuraUI.services").factory("maHelper",["MaDate",function(e){return{keyCode:{backspace:8,comma:188,"delete":46,down:40,end:35,enter:13,escape:27,home:36,left:37,pageDown:34,pageUp:33,period:190,right:39,shift:16,space:32,tab:9,up:38},isEmail:function(e){var r=/^([\+\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return r.test(e)},isNullOrWhiteSpace:function(e){return null===e||void 0===e||!angular.isArray(e)&&e.toString().replace(/\s/g,"").length<1},isNullOrUndefined:function(e){return null===e||angular.isUndefined(e)},formatString:function(e){for(var r="",n=0;;){var t=e.indexOf("{",n),i=e.indexOf("}",n);if(t<0&&i<0){r+=e.slice(n);break}if(i>0&&(i<t||t<0)){if("}"!==e.charAt(i+1))throw new Error("The format string contains an unmatched opening or closing brace.");r+=e.slice(n,i+1),n=i+2}else if(r+=e.slice(n,t),n=t+1,"{"!==e.charAt(n)){if(i<0)throw new Error("The format string contains an unmatched opening or closing brace.");if(i<0)break;var a=e.substring(n,i),s=a.indexOf(":"),o=parseInt(s<0?a:a.substring(0,s),10)+1;if(isNaN(o))throw new Error("The format string is invalid.");var c=arguments[o];"undefined"!=typeof c&&null!==c||(c=""),r+=c.toString(),n=i+1}else r+="{",n++}return r},changeSortingOrder:function(e,r){"-"===r.charAt(0)?e.orderedBy!==r?(e.direction="desc",e.orderedBy=r):(e.direction="asc",e.orderedBy=r.substr(1)):e.orderedBy!==r?(e.direction="asc",e.orderedBy=r):(e.direction="desc",e.orderedBy="-"+r)},getTextHeight:function(e,r,n,t){if(!r)return 0;var i=document.createElement("TEXTAREA");i.setAttribute("rows",1),i.style.font=r,i.style.width=n||"0px",i.style.border="0",i.style.overflow="hidden",i.style.padding="0",i.style.outline="0",i.style.resize="none",i.style.lineHeight=t||"normal",i.value=e,angular.element(document.querySelector("body")).append(i),i.style.height="auto",i.style.height=i.scrollHeight+"px";var a=parseInt(i.style.height);return angular.element(i).remove(),a},isGreaterThan:function(r,n){var t=new e(r),i=new e(n);return t.isEmpty()||i.isEmpty()?r>n:t.difference(i)>0},isGreaterThanOrEqual:function(r,n){var t=new e(r),i=new e(n);return t.isEmpty()||i.isEmpty()?r>=n:t.difference(i)>=0},isLessThan:function(r,n){var t=new e(r),i=new e(n);return t.isEmpty()||i.isEmpty()?r<n:t.difference(i)<0},isLessThanOrEqual:function(r,n){var t=new e(r),i=new e(n);return t.isEmpty()||i.isEmpty()?r<=n:t.difference(i)<=0},isJson:function(e){try{return JSON.parse(e),!0}catch(r){return!1}}}}])}();
!function(){angular.module("marcuraUI.services").factory("maValidators",["maHelper","MaDate",function(e,a){var n=function(e){if(!e)return null;var n=e.toString();return e instanceof a&&(n=e.format("dd MMM yyyy")),n};return{isNotEmpty:function(){return{name:"IsNotEmpty",message:"This field can not be empty.",validate:function(a){return angular.isArray(a)?a.length>0:!e.isNullOrWhiteSpace(a)}}},isGreaterThan:function(a,r){var t=null;return a&&(t="This field can not be less than or equal to "+n(a)+"."),{name:"IsGreaterThan",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isGreaterThan(n,a)}}},isGreaterThanOrEqual:function(a,r){var t=null;return a&&(t="This field can not be less than "+n(a)+"."),{name:"IsGreaterThanOrEqual",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isGreaterThanOrEqual(n,a)}}},isLessThan:function(a,r){var t=null;return a&&(t="This field can not be greater than or equal to "+n(a)+"."),{name:"IsLessThan",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isLessThan(n,a)}}},isLessThanOrEqual:function(a,r){var t=null;return a&&(t="This field can not be greater than "+n(a)+"."),{name:"IsLessThanOrEqual",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isLessThanOrEqual(n,a)}}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maSideMenu",["$state",function(e){return{restrict:"E",scope:{items:"=",select:"&",useState:"="},replace:!0,template:function(){var e='            <div class="ma-side-menu">                <div class="ma-side-menu-item" ng-repeat="item in items" ng-class="{                        \'ma-side-menu-item-is-selected\': isItemSelected(item),                        \'ma-side-menu-item-is-disabled\': item.isDisabled                    }"                    ng-click="onSelect(item)">                    <i ng-if="item.icon" class="fa fa-{{item.icon}}"></i>                    <div class="ma-side-menu-text">{{item.text}}</div>                    <div class="ma-side-menu-new" ng-if="item.new">{{item.new}}</div>                </div>            </div>';return e},link:function(t,i,s){t.$state=e;var a=t.useState!==!1;t.isItemSelected=function(t){return t.selector?t.selector():a?!(!t.state||!t.state.name)&&e.includes(t.state.name):t.isSelected},t.onSelect=function(i){i.isDisabled||(a?i.state&&i.state.name&&e.go(i.state.name,i.state.parameters):(angular.forEach(t.items,function(e){e.isSelected=!1}),i.isSelected=!0,t.select({item:i})))}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTabs",["$state","maHelper","$timeout",function(e,t,s){return{restrict:"E",scope:{items:"=",select:"&",useState:"="},replace:!0,template:function(){var e='            <div class="ma-tabs">                <ul class="ma-tabs-list clearfix">                    <li class="ma-tabs-item" ng-repeat="item in items"                        ng-focus="onFocus(item)"                        ng-blur="onBlur(item)"                        ng-keypress="onKeypress($event, item)"                        ng-class="{                            \'ma-tabs-item-is-selected\': isItemSelected(item),                            \'ma-tabs-item-is-disabled\': item.isDisabled,                            \'ma-tabs-item-is-focused\': item.isFocused                        }"                        ng-click="onSelect(item)">                        <a class="ma-tabs-link" href="" tabindex="-1">                            <span class="ma-tabs-text">{{item.text}}</span>                        </a>                    </li>                </ul>            </div>';return e},link:function(a,i,n){a.$state=e;var c=a.useState!==!1;a.isItemSelected=function(t){return t.selector?t.selector():c?!(!t.state||!t.state.name)&&e.includes(t.state.name):t.isSelected},a.onSelect=function(t){t.isDisabled||t.isSelected||(c?t.state&&t.state.name&&e.go(t.state.name,t.state.parameters):(angular.forEach(a.items,function(e){e.isSelected=!1}),t.isSelected=!0,a.select({item:t})))},a.onKeypress=function(e,s){e.keyCode===t.keyCode.enter&&a.onSelect(s)},a.onFocus=function(e){e.isFocused=!0},a.onBlur=function(e){e.isFocused=!1},s(function(){var e=angular.element(i[0].querySelectorAll(".ma-tabs-item"));e.each(function(e,t){var s=a.items[e];s.isDisabled||angular.element(t).attr("tabindex","0")})})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTextBox",["$timeout",function(e){return{restrict:"E",scope:{id:"@",value:"=",size:"=",change:"&",isDisabled:"="},replace:!0,template:function(e){var t='            <div class="ma-text-box"                ng-class="{                    \'ma-text-box-is-disabled\': isDisabled                }">                <input class="ma-text-box-value form-control input-{{_size}}"                    ng-disabled="isDisabled"                    type="text"                    ng-model="value"/>            </div>';return t},link:function(t,i){var a=angular.element(i[0].querySelector(".ma-text-box-value"));t._size=t.size?t.size:"sm",e(function(){i.removeAttr("id"),a.attr("id",t.id)})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTextArea",["$timeout","$window","maHelper","maValidators",function(e,t,a,i){return{restrict:"E",scope:{id:"@",value:"=",isDisabled:"=",fitContentHeight:"=",isResizable:"=",isRequired:"=",validators:"=",instance:"=",updateOn:"@"},replace:!0,template:function(){var e='            <div class="ma-text-area"                ng-class="{                    \'ma-text-area-is-disabled\': isDisabled,                    \'ma-text-area-is-focused\': isFocused,                    \'ma-text-area-fit-content-height\': fitContentHeight,                    \'ma-text-area-is-invalid\': !isValid,                    \'ma-text-area-is-touched\': isTouched                }">                <textarea class="ma-text-area-value"                    type="text"                    ng-focus="onFocus()"                    ng-blur="onBlur()"                    ng-keydown="onKeydown($event)"                    ng-keyup="onKeyup($event)"                    ng-disabled="isDisabled">                </textarea>            </div>';return e},link:function(n,r){var o,l,u=angular.element(r[0].querySelector(".ma-text-area-value")),d=n.validators?angular.copy(n.validators):[],s=n.isRequired,g=!1,p=n.updateOn?n.updateOn:"input",c=function(){var e=t.getComputedStyle(u[0],null),a={},i=parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom")),n=parseInt(e.getPropertyValue("padding-left"))+parseInt(e.getPropertyValue("padding-right")),r=parseInt(e.getPropertyValue("border-top-width"))+parseInt(e.getPropertyValue("border-bottom-width")),o=parseInt(e.getPropertyValue("border-left-width"))+parseInt(e.getPropertyValue("border-right-width"));return a.width=parseInt(t.getComputedStyle(u[0],null).getPropertyValue("width"))-n,a.height=parseInt(t.getComputedStyle(u[0],null).getPropertyValue("height"))-i,a.paddingHeight=i,a.paddingWidth=n,a.borderHeight=r,a.borderWidth=o,a.lineHeight=e.getPropertyValue("line-height"),a.font=e.getPropertyValue("font-style")+" "+e.getPropertyValue("font-variant")+" "+e.getPropertyValue("font-weight")+" "+e.getPropertyValue("font-size")+" "+e.getPropertyValue("font-height")+" "+e.getPropertyValue("font-family"),a},h=function(){if(n.fitContentHeight){var e=c(),t=a.getTextHeight(u.val(),e.font,e.width+"px",e.lineHeight),i=t+e.paddingHeight+e.borderHeight;i<40&&(i=30),u[0].style.height=i+"px",r[0].style.height=i+"px"}},f=function(){if(n.isValid=!0,d&&d.length)for(var e=0;e<d.length;e++)if(!d[e].validate(u.val())){n.isValid=!1;break}};n.isFocused=!1,n.isTouched=!1;for(var y=0;y<d.length;y++)if("IsNotEmpty"===d[y].name){g=!0;break}!g&&s&&d.unshift(i.isNotEmpty()),g&&(s=!0),n.onFocus=function(){n.isFocused=!0},n.onBlur=function(){n.isFocused=!1,n.isTouched=!0,n.isValid&&"blur"===p&&(n.value=u.val()),f()},n.onKeydown=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(o=angular.element(e.target).val())},n.onKeyup=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(l=angular.element(e.target).val(),o!==l&&(n.isTouched=!0))},u.on("input",function(e){f(),h(),n.isValid&&"input"===p&&n.$apply(function(){n.value=u.val()})}),angular.element(t).on("resize",function(){h()}),e(function(){if(h(),n.isResizable===!1&&u.css("resize","none"),r.removeAttr("id"),u.attr("id",n.id),n.fitContentHeight){var t=$(r[0]).closest(".ng-hide[ng-show]");if(1===t.length){var a=t.scope();a.$watch(t.attr("ng-show"),function(t){t&&e(function(){h()})})}}}),n.$watch("value",function(e,t){if(e!==t){n.isValid=!0,n.isTouched=!1;var a=u.prop("selectionStart");u.val(e),u.prop({selectionStart:a,selectionEnd:a}),h()}}),u.val(n.value),f(),n.instance&&(n.instance.isValid=function(){return n.isValid})}}}])}();