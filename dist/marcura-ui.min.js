!function(){angular.module("marcuraUI.services",[]),angular.module("marcuraUI.components",["marcuraUI.services"]),angular.module("marcuraUI",["marcuraUI.components"]),angular.element(document).ready(function(){var e=function(){for(var e=3,n=document.createElement("div"),t=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",t[0];);return e>4?e:null}();if(e){var n=angular.element(document.getElementsByTagName("body")[0]);n.addClass("ma-ie"+e)}$.fn.modal&&($.fn.modal.Constructor.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal"),0===$(".modal").length&&e.$body.removeClass("modal-open")})})}),String.prototype.endsWith||(String.prototype.endsWith=function(e,n){var t=this.toString();("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>t.length)&&(n=t.length),n-=e.length;var r=t.lastIndexOf(e,n);return r!==-1&&r===n})}();
!function(){angular.module("marcuraUI.components").directive("maButton",["MaHelper","$sce",function(n,t){return{restrict:"E",scope:{text:"@",kind:"@",leftIcon:"@",rightIcon:"@",isDisabled:"=",click:"&",size:"@",modifier:"@",isLoading:"="},replace:!0,template:function(){var n='                <button class="ma-button"                    ng-click="onClick()"                    ng-disabled="isDisabled"                    ng-class="{                        \'ma-button-link\': isLink(),                        \'ma-button-has-left-icon\': hasLeftIcon,                        \'ma-button-has-right-icon\': hasRightIcon,                        \'ma-button-is-disabled\': isDisabled,                        \'ma-button-has-text\': hasText(),                        \'ma-button-is-loading\': isLoading                    }">                    <span class="ma-button-spinner" ng-if="isLoading">                        <div class="pace">                            <div class="pace-activity"></div>                        </div>                    </span>                    <span ng-if="leftIcon" class="ma-button-icon ma-button-icon-left">                        <i class="fa fa-{{leftIcon}}"></i>                        <span class="ma-button-rim" ng-if="isLink()"></span>                    </span><span class="ma-button-text" ng-bind-html="getText()"></span><span ng-if="rightIcon" class="ma-button-icon ma-button-icon-right">                        <i class="fa fa-{{rightIcon}}"></i>                        <span class="ma-button-rim" ng-if="isLink()"></span>                    </span>                    <span class="ma-button-rim" ng-if="!isLink()"></span>                </button>';return n},link:function(i,a){i.hasLeftIcon=!1,i.hasRightIcon=!1,i.size=i.size?i.size:"md",i.hasLeftIcon=!!i.leftIcon,i.hasRightIcon=!!i.rightIcon,a.addClass("ma-button-"+i.size);var s=function(t){if(!n.isNullOrWhiteSpace(t)){t=t.split(" ");for(var s=0;s<t.length;s++)a.removeClass("ma-button-"+t[s])}var o="";n.isNullOrWhiteSpace(i.modifier)||(o=i.modifier.split(" "));for(var e=0;e<o.length;e++)a.addClass("ma-button-"+o[e])};i.onClick=function(){i.isDisabled||i.isLoading||i.click()},i.isLink=function(){return"link"===i.kind},i.hasText=function(){return!!i.text},i.getText=function(){return t.trustAsHtml(i.text?i.text:n.html.nbsp)},i.$watch("modifier",function(n,t){n!==t&&s(t)}),s()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCheckBox",["MaHelper","$timeout","$parse","MaValidators",function(e,a,i,s){return{restrict:"E",scope:{text:"@",value:"=",isDisabled:"=",change:"&",size:"@",rtl:"=",isRequired:"=",validators:"=",instance:"="},replace:!0,template:function(){var e='            <div class="ma-check-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-check-box-is-checked\': value === true,                    \'ma-check-box-is-disabled\': isDisabled,                    \'ma-check-box-has-text\': hasText,                    \'ma-check-box-rtl\': rtl,                    \'ma-check-box-is-focused\': isFocused,                    \'ma-check-box-is-invalid\': !isValid,                    \'ma-check-box-is-touched\': isTouched                }">                <span class="ma-check-box-text">{{text || \'&nbsp;\'}}</span>                <div class="ma-check-box-inner"></div>                <i class="ma-check-box-icon fa fa-check" ng-show="value === true"></i>            </div>';return e},link:function(n,t,c){var o=n.validators?angular.copy(n.validators):[],l=n.isRequired,u=!1,r=function(){n.isDisabled?t.removeAttr("tabindex"):t.attr("tabindex","0")},d=function(){n.hasText=!!n.text};n._size=n.size?n.size:"xs",n.cssClass=" ma-check-box-"+n._size,n.isFocused=!1,n.isValid=!0,n.isTouched=!1;var h=function(){var e=null,a=null,i=n.$parent,s=c.value;for(s.indexOf(".")!==-1&&(e=s.split("."),s=e[0]);i&&!a;)i.hasOwnProperty(s)?a=i:i=i.$parent;return a||n.$parent},v=h(),f=function(){n.isValid=!0,n.isTouched=!0;var e=n.value===!1?null:n.value;if(o&&o.length)for(var a=0;a<o.length;a++){var i=o[a];if(!i.validate("IsNotEmpty"===i.name?e:n.value)){n.isValid=!1;break}}};n.onChange=function(){if(!n.isDisabled){var e=i(c.value),s=e.assign,t=!e(v);n.value=t,s(v,t),f(),a(function(){n.change({maValue:n.value})})}},n.onFocus=function(){n.isDisabled||(n.isFocused=!0)},n.onBlur=function(){n.isDisabled||(n.isFocused=!1,f())},n.onKeypress=function(a){a.keyCode===e.keyCode.space&&(a.preventDefault(),n.isDisabled||n.onChange())},n.$watch("isDisabled",function(e,a){e!==a&&(e&&(n.isFocused=!1),r())}),n.$watch("text",function(e,a){e!==a&&d()});for(var b=0;b<o.length;b++)if("IsNotEmpty"===o[b].name){u=!0;break}!u&&l&&o.unshift(s.isNotEmpty()),u&&(l=!0),n.instance&&(n.instance.isInitialized=!0,n.instance.isEditor=function(){return!0},n.instance.isValid=function(){return n.isValid},n.instance.validate=function(){f()}),r(),d()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maCostsGrid",[function(){return{restrict:"E",scope:{costItems:"="},replace:!0,template:function(){var t='            <div class="ma-grid ma-grid-costs"                costs grid            </div>';return t},link:function(t){console.log("scope.costItems:",t.costItems)}}}])}();
!function(){angular.module("marcuraUI.components").provider("maDateBoxConfiguration",function(){this.$get=function(){return this}}).directive("maDateBox",["$timeout","MaDate","MaHelper","MaValidators",function(e,a,t,n){return{restrict:"E",scope:{id:"@",value:"=",timeZone:"=",culture:"=",isDisabled:"=",isRequired:"=",change:"&",validate:"&",canReset:"=",displayFormat:"=",format:"=",hasTime:"=",parser:"=",validators:"=",instance:"=",min:"=",max:"=",changeTimeout:"=",placeholder:"@",modifier:"@"},replace:!0,template:function(e){var a='                <div class="ma-date-box" ng-class="{                        \'ma-date-box-has-time\': hasTime,                        \'ma-date-box-is-invalid\': !isValid,                        \'ma-date-box-is-disabled\': isDisabled,                        \'ma-date-box-is-focused\': isFocused,                        \'ma-date-box-is-touched\': isTouched,                        \'ma-date-box-can-reset\': canReset,                        \'ma-date-box-is-reset-disabled\': canReset && !isDisabled && !isResetEnabled(),                        \'ma-date-box-has-value\': hasValue()                    }">                    <div class="ma-date-box-inner">                        <input class="ma-date-box-date" type="text" id="{{id}}"                            placeholder="{{placeholder}}"                            ng-disabled="isDisabled"                            ng-keydown="onKeydown($event)"                            ng-keyup="onKeyup($event)"/><input class="ma-date-box-hour"                                maxlength="2"                                ng-disabled="isDisabled"                                ng-show="hasTime"                                ng-keyup="onKeyup($event)"                                ng-keydown="onTimeKeydown($event)"                                /><div class="ma-date-box-colon" ng-if="hasTime">:</div><input                                 class="ma-date-box-minute" type="text"                                maxlength="2"                                ng-disabled="isDisabled"                                ng-show="hasTime"                                ng-keyup="onKeyup($event)"                                ng-keydown="onTimeKeydown($event)"/>                        <i class="ma-date-box-icon fa fa-calendar"></i>                    </div>                    <ma-button class="ma-button-reset"                        ng-show="canReset" size="xs" modifier="simple"                        right-icon="times-circle"                        click="onReset()"                        is-disabled="!isResetEnabled()">                    </ma-button>                </div>';return a},controller:["$scope","maDateBoxConfiguration",function(e,a){e.configuration={},e.configuration.displayFormat=(e.displayFormat||a.displayFormat||"dd MMM yyyy").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.format=(e.format||a.format||"yyyy-MM-ddTHH:mm:ssZ").replace(/Y/g,"y").replace(/D/g,"d"),e.configuration.timeZone=(e.timeZone||a.timeZone||"Z").replace(/GMT/g,"")}],link:function(i,o){var r,s,l,u,d,c,m,f=null,v=i.configuration.displayFormat,p=i.configuration.format,y=i.configuration.timeZone,b=angular.element(o[0].querySelector(".ma-date-box-date")),h=angular.element(o[0].querySelector(".ma-date-box-hour")),g=angular.element(o[0].querySelector(".ma-date-box-minute")),x=a.createEmpty(),E=a.parseTimeZone(y),k=0,w=[],D=i.isRequired,T=new a(i.min),C=new a(i.max),V=null,F=Number(i.changeTimeout),q=0,S=0,M=0,N=function(e){return!x.isEqual(e)&&(i.isTouched=!0,!0)},R=function(){var e=b.val().trim(),t=""===e,n=Number(h.val()),i=Number(g.val()),o=a.createEmpty();return n<0||n>23||i<0||i>59?null:t?o:(o=new a(e),o.isEmpty()?null:(o.add(n,"hour"),o.add(i,"minute"),o.offset(k),o))},K=function(a){var t=null;a&&!a.isEmpty()?(t=a.copy().toUtc().add(E,"minute"),b.val(t.format(v)),h.val(t.format("HH")),g.val(t.format("mm")),r||(r=b.val())):(b.val(""),h.val("00"),g.val("00")),i.isFocused&&(ae(),ne(),d&&b.prop({selectionStart:q,selectionEnd:q}),c&&h.prop({selectionStart:S,selectionEnd:S}),m&&g.prop({selectionStart:M,selectionEnd:M}),e(function(){ee(),te()})),f&&f.setDate(t?t.toDate():null,!0)},O=function(){f&&(C=new a(i.max),C.isEmpty()&&(C=(new a).add(100,"year")),f.setMaxDate(C.toDate()))},Z=function(){f&&(T=new a(i.min),T.isEmpty()&&(T=(new a).subtract(100,"year")),f.setMinDate(T.toDate()))},B=function(e){var t=a.createEmpty();return e?t=i.parser?i.parser(e):a.parse(e,i.culture):t},I=function(e){e.hour(Number(h.val())).minute(Number(g.val())).second(0)},H=function(){k=E},G=function(){f=new Pikaday({field:angular.element(o[0].querySelector(".ma-date-box-icon"))[0],position:"bottom right",onSelect:function(){var t=new a(f.getDate());return t.offset(E),i.hasTime&&(I(t),H()),e(function(){L(t)}),N(t)?void U(t):void K(t)}}),K(x),O(),Z()},A=function(){f&&f.destroy()},L=function(e,a){i.isValid=!0,V=null,a=void 0===a||a;var t=e?e.format(p):null;if(w&&w.length)for(var n=0;n<w.length;n++)if(!w[n].validate(t)){i.isValid=!1,V=w[n];break}a!==!1&&W(e)},z=function(){var e=!1;w=i.validators?angular.copy(i.validators):[];for(var a=0;a<w.length;a++)if("IsNotEmpty"===w[a].name){e=!0;break}!e&&D&&w.unshift(n.isNotEmpty()),e&&(D=!0),T.isEmpty()||w.push(n.isGreaterOrEqual(T,!0)),C.isEmpty()||w.push(n.isLessOrEqual(C,!0))},U=function(t){x=t||a.createEmpty(),i.value=t?t.format(p):null,e(function(){i.change({maValue:i.value})})},W=function(a){e(function(){i.validate({maValue:a?a.format(p):null})})},Y=function(){i.isTouched=!0;var e=b.val().trim(),t=""===e,n=Number(h.val()),o=Number(g.val()),s=a.createEmpty();return n>=0&&n<=23&&o>=0&&o<=59?(s=B(e),s.offset(k),t&&x.isEmpty()?void L(null):t?(L(s),void(i.isValid&&(K(null),U()))):s.isEmpty()?void(i.isValid=!1):(s.isEmpty()||!i.hasTime&&r!==e||(I(s),s.subtract(E-k,"minute")),L(s),N(s)?(s.isEmpty()||K(s),void(i.isValid&&U(s))):void K(s))):void(i.isValid=!1)},P=function(){d=!0,c=!1,m=!1,i.onFocus()},j=function(){c=!0,d=!1,m=!1,i.onFocus()},J=function(){m=!0,d=!1,c=!1,i.onFocus()},Q=function(){d=!1,i.onBlur()},X=function(){c=!1,i.onBlur()},_=function(){m=!1,i.onBlur()},ee=function(){ae(),$(".ma-date-box-date",o).on("focus",P),$(".ma-date-box-hour",o).on("focus",j),$(".ma-date-box-minute",o).on("focus",J)},ae=function(){$(".ma-date-box-date",o).off("focus",P),$(".ma-date-box-hour",o).off("focus",j),$(".ma-date-box-minute",o).off("focus",J)},te=function(){ne(),$(".ma-date-box-date",o).on("blur",Q),$(".ma-date-box-hour",o).on("blur",X),$(".ma-date-box-minute",o).on("blur",_)},ne=function(){$(".ma-date-box-date",o).off("blur",Q),$(".ma-date-box-hour",o).off("blur",X),$(".ma-date-box-minute",o).off("blur",_)},ie=function(e){if(!t.isNullOrWhiteSpace(e)){e=e.split(" ");for(var a=0;a<e.length;a++)o.removeClass("ma-date-box-"+e[a])}var n="";t.isNullOrWhiteSpace(i.modifier)||(n=i.modifier.split(" "));for(var r=0;r<n.length;r++)o.addClass("ma-date-box-"+n[r])};if(z(),i.isFocused=!1,i.isValid=!0,i.isTouched=!1,i.hasValue=function(){return b.val()||"00"!==h.val()||"00"!==g.val()},i.isResetEnabled=function(){return!i.isDisabled&&(b.val()||"00"!==h.val()||"00"!==g.val())},i.onFocus=function(){t.safeApply(function(){i.isFocused=!0})},i.onBlur=function(){u&&e.cancel(u),i.$apply(function(){i.isFocused=!1,Y()})},i.onKeydown=function(e){e.keyCode!==t.keyCode.tab&&e.keyCode!==t.keyCode.shift&&(s=angular.element(e.target).val())},i.onKeyup=function(a){if(a.keyCode!==t.keyCode.tab&&a.keyCode!==t.keyCode.shift){var n=!1;l=angular.element(a.target).val(),s!==l&&(n=!0,i.isTouched=!0,H()),n&&F>0&&(q=b.prop("selectionStart"),S=h.prop("selectionStart"),M=g.prop("selectionStart"),u&&e.cancel(u),u=e(function(){Y()},F))}},i.onTimeKeydown=function(e){$.inArray(e.keyCode,[t.keyCode.backspace,t.keyCode.tab,t.keyCode["delete"]])===-1&&37!==e.keyCode&&39!==e.keyCode&&(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},i.onReset=function(){i.isDisabled||(x=a.createEmpty(),i.isTouched=!0,L(null),U(),K(null),b.focus())},i.value){var oe=B(i.value);if(oe.isEmpty())return;K(oe),x=oe,k=oe.offset()}ee(),te(),e(function(){i.isDisabled||G(),o.removeAttr("id"),b.attr("id",i.id)}),i.$watch("value",function(e,t){if(null!==e||null!==t){var n=B(e);if(n.isEmpty()&&(x=a.createEmpty(),K(null)),!N(n))return void K(n);L(n,!1),K(n),x=n,k=n.offset()}}),i.$watch("isDisabled",function(e,a){e!==a&&(i.isDisabled?A():G())});var re=function(e,a,t){if(e!==a){var n=B(b.val().trim());n.offset(E),"max"===t?O():Z(),z();for(var o=[],r=0;r<w.length;r++)"IsGreaterOrEqual"!==w[r].name&&"IsLessOrEqual"!==w[r].name||o.push(w[r]);if(o.length){var s=n.format(p);for(!V||"IsGreaterOrEqual"!==V.name&&"IsLessOrEqual"!==V.name||(V=null,i.isValid=!0),r=0;r<o.length;r++)if(!o[r].validate(s)){i.isValid=!1,V=o[r];break}i.isValid||(i.isTouched=!0),W(n)}i.isValid&&N(n)&&U(n)}};i.$watch("max",function(e,a){re(e,a,"max")}),i.$watch("min",function(e,a){re(e,a,"min")}),i.$watch("modifier",function(e,a){e!==a&&ie(a)}),ie(),i.instance&&(i.instance.isInitialized=!0,i.instance.isEditor=function(){return!0},i.instance.validate=function(){i.isTouched=!0;var e=R();return!e||D&&e.isEmpty()?void(i.isValid=!1):void L(e,!1)},i.instance.isValid=function(){return i.isValid},i.instance.failedValidator=function(){return V},i.instance.refresh=function(){var e=B(i.value);K(e),L(e,!1)})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maGridOrder",["$timeout",function(r){return{require:"^^maGrid",restrict:"E",scope:{orderBy:"@"},replace:!0,template:function(){var r='            <div class="ma-grid-order{{isVisible() ? \' ma-grid-order-\' + direction : \'\'}}"                ng-click="order()">                <i class="fa fa-sort-asc"></i>                <i class="fa fa-sort-desc"></i>            </div>';return r},link:function(e,o,a,i){var n,t=o.closest(".ma-grid-header-col"),c=function(){for(var r=null,o=e.$parent;o&&!r;)o.hasOwnProperty("componentName")&&"maGrid"===o.componentName?r=o:o=o.$parent;return r};e.order=function(){if(n){var o="-"===n.orderBy.charAt(0);o=!o,n.orderBy=o?"-"+e.orderBy:e.orderBy,e.direction=o?"desc":"asc",r(function(){n.order()})}};var d=function(r){return"-"===r.charAt(0)?r.substring(1):r};t.hasClass("ma-grid-header-col-sortable")||t.addClass("ma-grid-header-col-sortable"),r(function(){n=c(),d(n.orderBy)===e.orderBy&&(e.direction="-"===n.orderBy.charAt(0)?"desc":"asc")}),e.isVisible=function(){return!!n&&d(n.orderBy)===e.orderBy}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maGrid",["MaHelper",function(e){return{restrict:"E",transclude:!0,scope:{orderBy:"=",modifier:"@",isResponsive:"=",responsiveSize:"@",order:"&"},replace:!0,template:function(){var e='            <div class="ma-grid">                <div class="ma-grid-inner"><ng-transclude></ng-transclude></div>            </div>';return e},controller:["$scope",function(e){e.componentName="maGrid"}],link:function(i,s){var r=i.responsiveSize?i.responsiveSize:"md",n=function(r){if(!e.isNullOrWhiteSpace(r)){r=r.split(" ");for(var n=0;n<r.length;n++)s.removeClass("ma-grid-"+r[n])}var o="";e.isNullOrWhiteSpace(i.modifier)||(o=i.modifier.split(" "));for(var a=0;a<o.length;a++)s.addClass("ma-grid-"+o[a])},o=function(e,i){var r;"boolean"==typeof i?(r="ma-grid-"+e,i===!0?s.addClass(r):s.removeClass(r)):i&&(s.removeClass(function(i,s){return(s.match(RegExp("ma-grid-"+e+"-.+","ig"))||[]).join(" ")}),s.addClass("ma-grid-"+e+"-"+i))};i.$watch("modifier",function(e,i){e!==i&&n(i)}),i.$watch("isResponsive",function(e,s){e!==s&&o("is-responsive",i.isResponsive)}),n(),o("is-responsive",i.isResponsive),i.isResponsive&&(i.$watch("responsiveSize",function(e,i){e!==i&&(r=e,o("responsive-size",r))}),o("responsive-size",r))}}}])}();
!function(){angular.module("marcuraUI.components").directive("maLabel",[function(){return{restrict:"E",transclude:!0,scope:{cutOverflow:"=","for":"@",isRequired:"=",hasWarning:"=",hasHint:"="},replace:!0,template:function(){var a='                <div class="ma-label" ng-class="{                    \'ma-label-is-required\': isRequired,                    \'ma-label-has-content\': hasContent,                    \'ma-label-has-warning\': hasWarning,                    \'ma-label-has-hint\': hasHint,                    \'ma-label-cut-overflow\': cutOverflow                }">                    <label class="ma-label-text" for="{{for}}"><ng-transclude></ng-transclude></label><!--                    --><div class="ma-label-star" ng-if="isRequired">&nbsp;<i class="fa fa-star"></i></div><!--                    --><div class="ma-label-warning" ng-if="hasWarning">&nbsp;                    <i class="fa fa-exclamation-triangle"></i></div><div class="ma-label-hint" ng-if="hasHint">&nbsp;<div class="ma-label-hint-inner"><i class="fa fa-question"></i><div></div>                </div>';return a},link:function(a,n){a.hasContent=n.find("span").contents().length>0}}}])}();
!function(){angular.module("marcuraUI.components").directive("maMessage",[function(){return{restrict:"E",transclude:!0,scope:{type:"@",state:"@",size:"@",textAlign:"@",hasIcon:"="},replace:!0,template:function(){var s="                <div class=\"ma-message{{cssClass}}\">                    <div class=\"ma-message-icon\" ng-if=\"_hasIcon\">                        <i class=\"fa\" ng-class=\"{                            'fa-info-circle': _state === 'info',                            'fa-check-circle': _state === 'success',                            'fa-exclamation-triangle': _state === 'warning',                            'fa-times-circle': _state === 'danger'                        }\"></i>                    </div>                    <div class=\"ma-message-text\"><ng-transclude></ng-transclude></div>                </div>";return s},link:function(s){var a=s.type||"message",e=s.size?s.size:"sm";s._hasIcon=s.hasIcon!==!1;var t=function(){s._state=s.state||"default"},n=function(){s.cssClass=" ma-message-"+a+" ma-message-"+s._state+" ma-message-"+e,s.textAlign&&(s.cssClass+=" ma-message-text-align-"+s.textAlign),s._hasIcon&&(s.cssClass+=" ma-message-has-icon")};s.$watch("state",function(s,a){s!==a&&(t(),n())}),t(),n()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maMultiCheckBox",["$timeout","MaValidators",function(e,i){return{restrict:"E",scope:{items:"=",itemTemplate:"=",itemTextField:"@",itemValueField:"@",value:"=",change:"&",isDisabled:"=",isRequired:"=",validators:"=",instance:"="},replace:!0,template:function(){var e='                <div class="ma-multi-check-box" ng-class="{                        \'ma-multi-check-box-is-disabled\': isDisabled,                        \'ma-multi-check-box-is-invalid\': !isValid,                        \'ma-multi-check-box-is-touched\': isTouched                    }">                    <div class="ma-multi-check-box-item" ng-repeat="item in items">                        <div class="ma-multi-check-box-background" ng-click="onChange(item)"></div>                        <ma-check-box                            size="sm"                            value="getItemMetadata(item).isSelected"                            is-disabled="isDisabled">                        </ma-check-box><div class="ma-multi-check-box-text">{{getItemText(item)}}</div>                    </div>                </div>';return e},link:function(t,a){var l=t.itemTextField||t.itemValueField,n=t.validators?angular.copy(t.validators):[],s=t.isRequired,c=!1,m={};t.isFocused=!1,t.isValid=!0,t.isTouched=!1;var u=function(e){if(t.isValid=!0,n&&n.length)for(var i=0;i<n.length;i++)if(!n[i].validate(e)){t.isValid=!1;break}},d=function(){if(t.value&&t.value.length&&t.items&&t.items.length)for(var e=0;e<t.value.length;e++)for(var i=0;i<t.items.length;i++)l?t.itemValueField&&t.items[i][t.itemValueField]===t.value[e][t.itemValueField]&&(t.getItemMetadata(t.items[i]).isSelected=!0):t.items[i]===t.value[e]&&(t.getItemMetadata(t.items[i]).isSelected=!0)};t.getItemMetadata=function(e){var i=l?e[t.itemValueField]:e;return m[i]||(m[i]={},m[i].item=e),m[i]},t.getItemText=function(e){return t.itemTemplate?t.itemTemplate(e):l?t.itemTextField?e[t.itemTextField]:void 0:e},t.onChange=function(i){if(!t.isDisabled){var a=t.value,l=[],n=t.getItemMetadata(i);n.isSelected=!n.isSelected;for(var s in m)m.hasOwnProperty(s)&&m[s].isSelected&&l.push(m[s].item);t.value=l.length?l:null,e(function(){u(t.value),t.change({maValue:t.value,maOldValue:a})})}},t.$watch("value",function(e,i){angular.equals(e,i)||d()}),e(function(){d()});for(var o=0;o<n.length;o++)if("IsNotEmpty"===n[o].name){c=!0;break}!c&&s&&n.unshift(i.isNotEmpty()),c&&(s=!0),t.instance&&(t.instance.isInitialized=!0,t.instance.isEditor=function(){return!0},t.instance.isValid=function(){return t.isValid},t.instance.validate=function(){u(t.value)})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maPager",["$timeout",function(e){return{restrict:"E",scope:{page:"=",totalItems:"=",visiblePages:"=",showItemsPerPage:"=",allowAllItemsPerPage:"=",itemsPerPageNumbers:"=",itemsPerPageText:"@",itemsPerPage:"=",change:"&"},replace:!0,template:function(){var e='<div class="ma-pager" ng-class="{                \'ma-pager-has-pager\': _hasPager            }">                <div class="ma-pager-items-per-page" ng-if="_showItemsPerPage">                    <div class="ma-pager-items-per-page-text" ng-show="itemsPerPageText">{{itemsPerPageText}}</div><ma-select-box                        items="_itemsPerPageNumbers"                        value="_itemsPerPage"                        change="itemsPerPageChange(maValue, maOldValue)">                    </ma-select-box>                </div><div class="ma-pager-pager">                    <div class="ma-pager-start">                        <ma-button                            class="ma-button-first"                            text="First"                            size="xs"                            modifier="default"                            click="firstClick()"                            is-disabled="_page <= 1"                        ></ma-button><ma-button                            class="ma-button-previous"                            text="Previous"                            size="xs"                            modifier="default"                            click="previousClick()"                            is-disabled="_page <= 1">                        </ma-button>                    </div                    ><div class="ma-pager-middle">                        <ma-button                            class="ma-button-previous-range"                            text="..."                            size="xs"                            modifier="default"                            click="previousRangeClick()"                            is-disabled="isFirstRange"                        ></ma-button><div class="ma-pager-pages"><ma-button                            ng-repeat="rangePage in rangePages"                            class="ma-button-page"                            text="{{rangePage}}"                            size="xs"                            modifier="{{_page === rangePage ? \'selected\' : \'default\'}}"                            click="pageClick(rangePage)"></div></ma-button                        ><ma-button                            class="ma-button-next-range"                            text="..."                            size="xs"                            modifier="default"                            click="nextRangeClick()"                            is-disabled="isLastRange"                        ></ma-button>                    </div                    ><div class="ma-pager-end">                        <ma-button                            class="ma-button-next"                            text="Next"                            size="xs"                            modifier="default"                            click="nextClick()"                            is-disabled="_page >= totalPages"                        ></ma-button><ma-button                            class="ma-button-last"                            text="Last"                            size="xs"                            modifier="default"                            click="lastClick()"                            is-disabled="_page >= totalPages">                        </ma-button>                    </div>                </div>            </div>';return e},link:function(a){a._page=a.page,a._showItemsPerPage=a.showItemsPerPage!==!1,a._itemsPerPageNumbers=["25","50","75","100"],a._itemsPerPage="25",a.hasItemsPerPageChanged=!1,a._totalItems=a.totalItems>=0?a.totalItems:0;var t=function(){a.totalPages=Math.ceil(a._totalItems/Number(a._itemsPerPage))},s=function(){a._showItemsPerPage&&a.itemsPerPage&&(a._itemsPerPage=a.itemsPerPage.toString())},i=function(){a._showItemsPerPage&&(angular.isArray(a.itemsPerPageNumbers)&&(a._itemsPerPageNumbers=a.itemsPerPageNumbers),a.allowAllItemsPerPage&&a._itemsPerPageNumbers.push("All"))},g=function(){a._visiblePages=a.visiblePages>1?a.visiblePages:5,a.totalPages<a._visiblePages&&(a._visiblePages=a.totalPages||1),a.rangePages=[],a.range=Math.ceil(a._page/a._visiblePages)-1,a.isFirstRange=0===a.range,a.isLastRange=a.range===Math.ceil(a.totalPages/a._visiblePages)-1;for(var e=a.range*a._visiblePages,t=1;t<=a._visiblePages&&e+t<=a.totalPages;t++)a.rangePages.push(e+t)},r=function(){if("All"===a._itemsPerPage)return void(a._hasPager=!1);var e=Number(a._itemsPerPage);a._hasPager=!a._showItemsPerPage||a.totalPages*e>e},l=function(){if(a.page!==a._page||a.hasItemsPerPageChanged){a.page=a._page||null,g();var t={maPage:a.page};a._showItemsPerPage&&(t.maItemsPerPage="All"===a._itemsPerPage?null:Number(a._itemsPerPage),a.hasItemsPerPageChanged=!1,void 0!==a.itemsPerPage&&(a.itemsPerPage=t.maItemsPerPage)),e(function(){a.change(t)})}};a.itemsPerPageChange=function(e,t){a._itemsPerPage=e,a.hasItemsPerPageChanged=!0;a.totalPages;if(a.totalPages=Math.ceil(a._totalItems/Number(a._itemsPerPage)),"All"===t)a._page=1;else{var s=t*a.page-t+1;a._page=Math.ceil(s/e)}r(),l()},a.firstClick=function(){a._page=1,l()},a.previousClick=function(){a._page=a._page<=1?1:a._page-1,l()},a.nextClick=function(){a._page=a._page>=a.totalPages?1:a._page+1,l()},a.lastClick=function(){a._page=a.totalPages,l()},a.pageClick=function(e){a._page=e,l()},a.previousRangeClick=function(){a._page=a.range*a._visiblePages,l()},a.nextRangeClick=function(){a._page=a.range*a._visiblePages+a._visiblePages+1,l()},a.$watch("totalItems",function(e,s){if(e!==s){if(a._totalItems=a.totalItems<0?0:a.totalItems,t(),0===a._totalItems||a._totalItems<=Number(a._itemsPerPage))return a._page=1,l(),void r();g(),r()}}),a.$watch("visiblePages",function(e,a){e!==a&&g()}),a.$watch("page",function(e,t){if(e!==t){var s=a.page;s<1?s=1:s>a.totalPages&&(s=a.totalPages),a._page=s||1,g(),r()}}),a.$watch("itemsPerPageNumbers",function(e,a){angular.equals(e,a)||i()}),a.$watch("itemsPerPage",function(e,a){e!==a&&(s(),r())}),i(),s(),t(),g(),r()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maProgress",[function(){return{restrict:"E",scope:{steps:"=",currentStep:"="},replace:!0,template:function(){var e='            <div class="ma-progress">                <div class="ma-progress-inner">                    <div class="ma-progress-background"></div>                    <div class="ma-progress-bar" ng-style="{                        width: (calculateProgress() + \'%\')                    }">                    </div>                    <div class="ma-progress-steps">                        <div class="ma-progress-step"                            ng-style="{                                left: (calculateLeft($index) + \'%\')                            }"                            ng-repeat="step in steps"                            ng-class="{                                \'ma-progress-step-is-current\': isCurrentStep($index)                            }">                            <div class="ma-progress-text">{{$index + 1}}</div>                        </div>                    </div>                </div>                <div class="ma-progress-labels">                    <div ng-repeat="step in steps"                        class="ma-progress-label">                        {{step.text}}                    </div>                </div>            </div>';return e},link:function(e){e.calculateLeft=function(s){return 100/(e.steps.length-1)*s},e.calculateProgress=function(){return e.currentStep?e.currentStep>e.steps.length?100:100/(e.steps.length-1)*(e.currentStep-1):0},e.isCurrentStep=function(s){return s+1<=e.currentStep}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maRadioBox",["MaHelper","$timeout","$sce","MaValidators",function(e,i,a,t){var s={};return{restrict:"E",scope:{item:"=",itemTemplate:"=",itemTextField:"@",itemValueField:"@",value:"=",isDisabled:"=",hideText:"=",change:"&",size:"@",isRequired:"=",validators:"=",instance:"=",id:"@",modifier:"@"},replace:!0,template:function(){var e='            <div class="ma-radio-box{{cssClass}}"                ng-focus="onFocus()"                ng-blur="onBlur()"                ng-keypress="onKeypress($event)"                ng-click="onChange()"                ng-class="{                    \'ma-radio-box-is-checked\': isChecked(),                    \'ma-radio-box-is-disabled\': isDisabled,                    \'ma-radio-box-has-text\': hasText(),                    \'ma-radio-box-is-focused\': isFocused,                    \'ma-radio-box-is-invalid\': !isValid,                    \'ma-radio-box-is-touched\': isTouched                }">                <span class="ma-radio-box-text" ng-bind-html="getItemText()"></span>                <div class="ma-radio-box-inner"></div>                <i class="ma-radio-box-icon" ng-show="isChecked()"></i>            </div>';return e},link:function(n,l,o){var d=null,r=!n.itemTextField&&!n.itemValueField,u=n.validators?angular.copy(n.validators):[],c=n.isRequired,m=!1,f=function(i){if(!e.isNullOrWhiteSpace(i)){i=i.split(" ");for(var a=0;a<i.length;a++)l.removeClass("ma-radio-box-"+i[a])}var t="";e.isNullOrWhiteSpace(n.modifier)||(t=n.modifier.split(" "));for(var s=0;s<t.length;s++)l.addClass("ma-radio-box-"+t[s])},v=function(){n.isDisabled?l.removeAttr("tabindex"):l.attr("tabindex","0")},h=function(){var e=null,i=n.$parent,a=o.value;for(a.indexOf(".")!==-1&&(d=a.split("."),a=d[0]);i&&!e;)i.hasOwnProperty(a)?e=i:i=i.$parent;return e},b=h();n._size=n.size?n.size:"xs",n.cssClass=" ma-radio-box-"+n._size,n.isFocused=!1,n.isValid=!0,n.isTouched=!1,n.id&&(s[n.id]||(s[n.id]=[]),s[n.id].push(n));var p=function(e){if(s[n.id])for(var i=0;i<s[n.id].length;i++){var a=s[n.id][i];a.isTouched=!0,a.validateThis(a.value)}else n.isTouched=!0,n.validateThis(e)};n.validateThis=function(e){if(n.isValid=!0,u&&u.length)for(var i=0;i<u.length;i++)if(!u[i].validate(e)){n.isValid=!1;break}},n.getItemText=function(){if(n.hideText)return e.html.nbsp;var i;return n.itemTemplate?i=n.itemTemplate(n.item):r?i=n.item:n.itemTextField&&(i=n.item[n.itemTextField]),angular.isString(i)&&i||(i=e.html.nbsp),a.trustAsHtml(i)},n.hasText=function(){return n.getItemText()!==e.html.nbsp},n.isChecked=function(){return r?n.item===n.value:!!n.itemValueField&&(n.item&&n.value&&n.item[n.itemValueField]===n.value[n.itemValueField])},n.onChange=function(){if(!n.isDisabled){var a,t=n.value;if(n.value=n.item,b&&d){a=b;for(var s=0;s<d.length;s++)a=a[d[s]];a=n.item}else a=b[o.value],b[o.value]=n.item;var l=!0;l=r?t!==n.item:n.itemValueField?!t&&!e.isNullOrWhiteSpace(n.item[n.itemValueField])||t[n.itemValueField]!==n.item[n.itemValueField]:!(t||!n.item)||JSON.stringify(t)===JSON.stringify(n.item),l&&i(function(){p(n.value),n.change({maValue:n.item,maOldValue:t})})}},n.onFocus=function(){n.isDisabled||(n.isFocused=!0)},n.onBlur=function(){n.isDisabled||(n.isFocused=!1,p(n.value))},n.onKeypress=function(i){i.keyCode===e.keyCode.space&&(i.preventDefault(),n.isDisabled||n.isChecked()||n.onChange())},n.$watch("isDisabled",function(e,i){e!==i&&(e&&(n.isFocused=!1),v())}),n.$watch("modifier",function(e,i){e!==i&&f(i)});for(var x=0;x<u.length;x++)if("IsNotEmpty"===u[x].name){m=!0;break}!m&&c&&u.unshift(t.isNotEmpty()),m&&(c=!0),n.instance&&(n.instance.isInitialized=!0,n.instance.isEditor=function(){return!0},n.instance.isValid=function(){return n.isValid},n.instance.validate=function(){p(n.value)}),i(function(){n.id&&l.removeAttr("id"),f()}),v()}}}])}();
!function(){angular.module("marcuraUI.components").directive("maRadioButton",["$timeout","MaValidators","MaHelper",function(e,i,t){return{restrict:"E",scope:{items:"=",itemTemplate:"=",itemTextField:"@",itemValueField:"@",value:"=",change:"&",isDisabled:"=",isRequired:"=",validators:"=",instance:"=",canUnselect:"="},replace:!0,template:function(){var e='                <div class="ma-radio-button" ng-class="{                        \'ma-radio-button-is-disabled\': isDisabled,                        \'ma-radio-button-is-invalid\': !isValid,                        \'ma-radio-button-is-touched\': isTouched,                        \'ma-radio-button-can-unselect\': canUnselect                    }">                    <div class="ma-radio-button-item" ng-class="{                            \'ma-radio-button-item-is-selected\': isItemSelected(item)                        }" ng-style="{ width: (100 / items.length) + \'%\' }"                        ng-repeat="item in items">                        <ma-button                            class="ma-button-radio"                            text="{{getItemText(item)}}"                            modifier="simple"                            size="xs"                            is-disabled="isDisabled"                            click="onChange(item)">                        </ma-button>                    </div>                </div>';return e},link:function(a,n){var l=a.itemTextField||a.itemValueField,s=a.validators?angular.copy(a.validators):[],d=a.isRequired,u=!1;a.isFocused=!1,a.isValid=!0,a.isTouched=!1;var m=function(e){if(a.isValid=!0,s&&s.length)for(var i=0;i<s.length;i++)if(!s[i].validate(e)){a.isValid=!1;break}};a.getItemText=function(e){return a.itemTemplate?a.itemTemplate(e):l?a.itemTextField?e[a.itemTextField]:void 0:e},a.isItemSelected=function(e){return l?!!a.itemValueField&&(e&&a.value&&e[a.itemValueField]===a.value[a.itemValueField]):e===a.value},a.onChange=function(i){if(!a.isDisabled){var n=a.value,s=!0;a.value=i,s=l?a.itemValueField?!(!t.isNullOrUndefined(n)||t.isNullOrUndefined(i[a.itemValueField]))||n[a.itemValueField]!==i[a.itemValueField]:!(!t.isNullOrUndefined(n)||t.isNullOrUndefined(i))||JSON.stringify(n)===JSON.stringify(i):n!==i,a.canUnselect&&!s&&(a.value=null),(s||a.canUnselect&&!s)&&e(function(){m(a.value),a.change({maValue:a.value,maOldValue:n})})}};for(var o=0;o<s.length;o++)if("IsNotEmpty"===s[o].name){u=!0;break}!u&&d&&s.unshift(i.isNotEmpty()),u&&(d=!0),a.instance&&(a.instance.isInitialized=!0,a.instance.isEditor=function(){return!0},a.instance.isValid=function(){return a.isValid},a.instance.validate=function(){m(a.value)})}}}])}();
!function(){angular.module("marcuraUI.components").filter("maSelectBoxOrderBy",["orderByFilter",function(e){return function(t,i){return i?e(t,i):t}}]).directive("maSelectBox",["$document","$timeout","MaHelper",function(e,t,i){return{restrict:"E",scope:{id:"@",items:"=",value:"=",isLoading:"=",change:"&",blur:"&",focus:"&",init:"&",itemTemplate:"=",itemTextField:"@",itemValueField:"@",isDisabled:"=",isRequired:"=",validators:"=",canAddItem:"=",addItemTooltip:"@",showAddItemTooltip:"=",instance:"=",orderBy:"=",ajax:"=",canReset:"=",placeholder:"@",textPlaceholder:"@",isMultiple:"=",storeItemValueOnly:"="},replace:!0,template:function(e,t){var l=!i.isNullOrWhiteSpace(t.ajax),a="true"===t.isMultiple,n="                    <div class=\"ma-select-box\"                        ng-class=\"{                            'ma-select-box-can-add-item': canAddItem,                            'ma-select-box-is-text-focused': isTextFocused,                            'ma-select-box-is-disabled': isDisabled,                            'ma-select-box-is-invalid': !isValid,                            'ma-select-box-is-touched': isTouched,                            'ma-select-box-mode-add': isAddMode,                            'ma-select-box-mode-select': !isAddMode,                            'ma-select-box-can-reset': canReset,                            'ma-select-box-is-reset-disabled': canReset && !isDisabled && !isResetEnabled(),                            'ma-select-box-is-loading': isLoading,                            'ma-select-box-has-value': hasValue()                        }\">                        <div class=\"ma-select-box-spinner\" ng-if=\"isLoading && !isDisabled\">                            <div class=\"pace\">                                <div class=\"pace-activity\"></div>                            </div>                        </div>";return n+=l?'<input class="ma-select-box-input" ma-select2="options"'+(a?" multiple":"")+'                        ng-show="!isAddMode"                        ng-disabled="isDisabled"                        ng-change="onChange()"                        ng-model="selectedItem"/>':'                        <select ma-select2="options"'+(a?" multiple":"")+'                            ng-show="!isAddMode"                            ng-disabled="isDisabled"                            ng-model="selectedItem"                            ng-change="onChange()"                            placeholder="{{placeholder}}">                            <option></option>                            <option ng-repeat="item in _items | maSelectBoxOrderBy:orderBy" value="{{getOptionValue(item)}}">                                {{formatItem(item)}}                            </option>                        </select>',n+='                    <input class="ma-select-box-text" type="text" ng-show="isAddMode"                        ng-model="text"                        ng-disabled="isDisabled"                        ng-focus="onFocus(\'text\')"                        placeholder="{{textPlaceholder}}"/>                    <ma-button class="ma-button-switch"                        ng-show="canAddItem" size="xs" modifier="simple"                        ma-tooltip="{{getAddItemTooltip()}}"                        right-icon="{{isAddMode ? \'bars\' : \'plus\'}}"                        click="toggleMode()"                        ng-focus="onFocus()"                        is-disabled="isDisabled">                    </ma-button>                    <ma-button class="ma-button-reset"                        ng-show="canReset" size="xs" modifier="simple"                        right-icon="times-circle"                        click="onReset()"                        ng-focus="onFocus(\'reset\')"                        is-disabled="!isResetEnabled()">                    </ma-button>                </div>'},controller:["$scope",function(e){e.getItemValue=function(t){if(i.isNullOrWhiteSpace(t)||!e.itemValueField)return null;if(e.storeItemValueOnly)return(angular.isObject(t)?t[e.itemValueField]:t).toString();for(var l=e.itemValueField.split("."),a=t[l[0]],n=1;n<l.length;n++)a=a[l[n]];return i.isNullOrUndefined(a)?null:a.toString()},e.formatItem=function(t){return e.itemTemplate?e.itemTemplate(t):t?e.itemTextField?t[e.itemTextField]:t.toString():""},e.options={},e.runInitSelection=!0,e.ajax&&(e.options.ajax=e.ajax,e.options.minimumInputLength=3,e.options.escapeMarkup=function(e){return e},e.options.initSelection=function(t,i){if(e.runInitSelection&&e.getItemValue(e.value)){var l=angular.copy(e.value);l.text=e.formatItem(l),l.id=e.getItemValue(l),e.previousSelectedItem=l,i(l)}else i();e.runInitSelection=!1},e.isMultiple&&(e.options.formatSelection=function(t){return e.formatItem(t)}))}],link:function(l,a,n){var s,o,u,c,d,r,m=angular.element(a[0].querySelector(".ma-select-box-text")),f=null,p=!0,g=!1,v=!1,h=l.showAddItemTooltip!==!1,x=l.validators?angular.copy(l.validators):[],I=l.itemTextField||l.itemValueField;l._items=angular.isArray(l.items)?angular.copy(l.items):[],l.previousSelectedItem=l.previousSelectedItem||null,l.isAddMode=!1,l.isTextFocused=!1,l.isValid=!0,l.isTouched=!1,l.hasAjax=angular.isObject(l.ajax);var b={name:"IsNotEmpty",validate:function(e){return l.isMultiple&&angular.isArray(e)?e.length>0:!i.isNullOrWhiteSpace(e)&&(!I&&!i.isNullOrWhiteSpace(e)||!!(l.hasAjax||l.isAddMode||A(e)))}},V=function(){for(var e=null,t=0;t<x.length;t++)if("IsNotEmpty"===x[t].name){e=t,x[t]=b;break}null===e&&l.isRequired?x.unshift(b):null===e||l.isRequired||x.splice(e,1)},A=function(e){if(!angular.isArray(l._items))return!1;for(var t=null!==l.getItemValue(e),i=0;i<l._items.length;i++)if(t){if(l.getItemValue(l._items[i])===l.getItemValue(e))return!0}else if(l._items[i]===e)return!0;return!1},M=function(e){if(i.isNullOrWhiteSpace(e))return null;if(!I)return e;if(angular.isArray(l._items))for(var t=0;t<l._items.length;t++)if(l.getItemValue(l._items[t])===e.toString())return l._items[t];return null},S=function(e){if(!I)return e;if(e){var t={};return t[l.itemTextField]=e,t}return null},y=function(e){if(l.isMultiple){var t,a=[];if(l.hasAjax){if(e&&e.length)for(t=0;t<e.length;t++)a.push(e[t]);a=JSON.stringify(a)}else if(e&&e.length)for(t=0;t<e.length;t++)a.push(l.getItemValue(e[t]));l.selectedItem=a,F(e)}else l.canAddItem&&e&&(l.isAddMode=!A(e)),F(e),l.isAddMode?(e?l.itemTextField&&e[l.itemTextField]?l.text=e[l.itemTextField].toString():l.text=e:l.text=null,f=e,l.toggleMode("add")):(i.isNullOrWhiteSpace(e)?l.selectedItem=null:l.hasAjax||(null!==l.getItemValue(e)?l.selectedItem=l.getItemValue(e):I||"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e||("boolean"==typeof e?l.selectedItem=e.toString():l.selectedItem=e)),l.previousSelectedItem=e,l.toggleMode("select"))},T=function(e,i){var n=angular.element(e.relatedTarget);l.isTextFocused=!1,"text"===i?(g=!1,l.$apply(function(){l.isTouched=!0;var e;if(l.itemTextField){if(l.value&&l.value[l.itemTextField]===l.text)return;e=S(l.text)}else{if(l.value===l.text)return;e=l.text}F(e),l.isValid&&(r=l.value||null,l.value=e,f=l.value,l.isValid&&t(function(){l.change({maValue:l.value,maOldValue:r})}))})):"select"===i&&l.$apply(function(){l.isTouched=!0}),p=!g&&n[0]!==s[0]&&n[0]!==o[0]&&n[0]!==m[0]&&n[0]!==c.search[0],l.isMultiple?v&&(p=!1):g||n[0]!==c.focusser[0]||(p=!1),p&&(a.removeClass("ma-select-box-is-select-focused"),l.blur({maValue:l.storeItemValueOnly?M(l.value):l.value})),g=!1},F=function(e){if(l.isValid=!0,x&&x.length)for(var t=0;t<x.length;t++)if(!x[t].validate(e)){l.isValid=!1;break}},O=function(){l.isAddMode?(m.focus(),l.isTextFocused=!0):u.select2("focus")};l.hasValue=function(){return l.isMultiple?!i.isNullOrUndefined(l.value)&&l.value.length:l.isAddMode?!i.isNullOrWhiteSpace(l.text):!i.isNullOrUndefined(l.value)&&!l.isLoading},l.isResetEnabled=function(){return!l.isDisabled&&l.hasValue()},l.reset=function(){r=l.value,l.value=l.isMultiple?[]:null},l.onReset=function(){l.isTouched=!0,l.reset(),O(),t(function(){l.change({maValue:l.value,maOldValue:r})})},l.onFocus=function(e){"text"===e&&(l.isTextFocused=!0),"reset"===e&&a.removeClass("ma-select-box-is-select-focused"),p&&l.focus({maValue:l.storeItemValueOnly?M(l.value):l.value}),p=!1},m.focusout(function(e){T(e,"text")}),l.getAddItemTooltip=function(){return h?l.isAddMode?"Back to the list":l.addItemTooltip?l.addItemTooltip:"Add new item":""},l.getOptionValue=function(e){return l.itemValueField?l.getItemValue(e):e},l.toggleMode=function(e){if(l.canAddItem&&!(l.isAddMode&&"add"===e||!l.isAddMode&&"select"===e)){var i=!1;r=l.value||null,"select"===e?(l.isAddMode=!1,i=!0):"add"===e?(l.isAddMode=!0,i=!0):l.isAddMode=!l.isAddMode,l.isAddMode?(u&&u.select2("close"),l.previousSelectedItem=M(l.selectedItem),l.value=f,l.value&&(l.text="string"==typeof l.value?l.value:l.value[l.itemTextField])):(f=S(l.text),l.value=l.previousSelectedItem),i||t(function(){l.change({maValue:l.value,maOldValue:r}),O()})}},l.onChange=function(){var e;if(l.isMultiple){var a=l.selectedItem,n=[];if(l.hasAjax){if(n=c.data(),angular.equals(n,l.value))return;r=l.value}else{r=l.value;for(var s=0;s<a.length;s++)e=M(a[s]),e&&n.push(e)}l.isTouched=!0,l.value=n,t(function(){l.change({maValue:n,maOldValue:r})}),c.dropdown.mouseleave()}else{if(e=i.isJson(l.selectedItem)?JSON.parse(l.selectedItem):l.selectedItem,"number"==typeof e&&(e=l.selectedItem),l.hasAjax){if(e===l.previousSelectedItem)return;if(!angular.isObject(e))return}if(!l.hasAjax&&l.itemValueField&&!i.isNullOrWhiteSpace(e))for(var o=0;o<l._items.length;o++)if(l.getItemValue(l._items[o])===e.toString()){e=l._items[o];break}if(i.isNullOrWhiteSpace(e)&&!l.value)return;if(l.itemValueField){var u=l.getItemValue(l.value);if(u&&u===l.getItemValue(e))return}else if(e===l.value)return;r=l.value,l.storeItemValueOnly?(l.value=l.getItemValue(e),l.previousSelectedItem=l.value,r=M(r)):(l.value=e,l.previousSelectedItem=e),t(function(){l.change({maValue:e,maOldValue:r})})}};var w=function(){l.hasAjax&&c&&(c.opts.placeholder=l.value?"":l.placeholder,l.runInitSelection=!0,c.initSelection())};l.$watch("items",function(e,i){angular.equals(e,i)||(l._items.splice(0,l._items.length),Array.prototype.push.apply(l._items,e),y(l.value),t(function(){var e,t;if(angular.isObject(l.value))if(l.isMultiple&&angular.isArray(l.value)){for(var i=[],a=0;a<l.value.length;a++)e=l.getItemValue(l.value[a]),t=angular.copy(M(e)||l.value[a]),t.text=l.formatItem(t),t.id=e,t&&i.push(t);c.data(i)}else e=l.getItemValue(l.value),t=angular.copy(M(e)||l.value),t.text=l.formatItem(t),t.id=e,c.data(t);else l.value?c.val(l.value):c.data(null)}))},!0),l.$watch("value",function(e,t){e!==t&&(w(),y(e))}),l.$watch("text",function(e,t){e!==t&&(l.isTouched=!0,F(e))}),l.$watch("isRequired",function(e,t){e!==t&&(V(),F(l.isAddMode?l.text:l.value))}),l.instance&&(l.instance.isInitialized=!0,l.instance.isEditor=function(){return!0},l.instance.switchToSelectMode=function(){l.isAddMode&&l.toggleMode("select")},l.instance.switchToAddMode=function(){l.isAddMode||l.toggleMode("add")},l.instance.isValid=function(){return l.isValid},l.instance.validate=function(){l.isTouched=!0,F(l.isAddMode?l.text:l.value)},l.instance.clear=function(){l.reset(),t(function(){l.isTouched=!1})}),V(),t(function(){if(l.hasAjax){var t=angular.element(a[0].querySelector(l.isMultiple?".select2-search-field":".select2-search"));t.append('<div class="pace"><div class="pace-activity"></div></div>'),l.isMultiple||t.append('<i class="ma-select-box-input-search-icon fa fa-search"></i>')}y(l.value),u=angular.element(a[0].querySelector(".select2-container")),c=u.data().select2,d=$('label[for="'+l.id+'"]'),s=angular.element(a[0].querySelector(".ma-button-switch")),o=angular.element(a[0].querySelector(".ma-button-reset")),w(),d.length>0&&$(e).on("click",'label[for="'+l.id+'"]',function(){O()}),l.isMultiple?(c.search.on("focus",function(){a.addClass("ma-select-box-is-select-focused"),l.onFocus()}),c.search.on("focusout",function(e){T(e,"select")}),c.selection.on("mouseenter",function(){v=!0}),c.selection.on("mouseleave",function(){v=!1}),c.dropdown.on("mouseenter",function(){v=!0}),c.dropdown.on("mouseleave",function(){v=!1}),c.dropdown.on("click",function(){c.search.focus()})):(c.focusser.on("focus",function(){l.onFocus("select")}),c.focusser.on("focusout",function(e){T(e,"select")})),c.dropdown.on("focus",".select2-input",function(){g=!0,l.onFocus()}),c.dropdown.on("focusout",".select2-input",function(e){T(e,"select")}),s.focusout(function(e){T(e)}),o.focusout(function(e){T(e)}),c.dropdown.on("mouseenter",".select2-result",function(){g=!0}),c.dropdown.on("mouseleave",".select2-result",function(){g=!1}),$(e).on("mouseenter",".select2-drop-mask",function(){l.isMultiple||(g=!0)}),l.init({maInstance:l.instance})})}}}])}();
!function(){angular.module("marcuraUI.components").value("maSelect2Config",{}).directive("maSelect2",["maSelect2Config","$timeout","MaHelper",function(e,t,i){var n={};return e&&angular.extend(n,e),{require:"ngModel",priority:1,compile:function(e,a){var l,r,s,u=e.is("select"),o=angular.isDefined(a.multiple);return e.is("select")&&(r=e.find("optgroup[ng-repeat], optgroup[data-ng-repeat], option[ng-repeat], option[data-ng-repeat]"),r.length&&(s=r.attr("ng-repeat")||r.attr("data-ng-repeat"),l=$.trim(s.split("|")[0]).split(" ").pop())),function(e,r,s,c){var g=angular.extend({},n,e.$eval(s.maSelect2)),p=function(e){var t;return g.simple_tags?(t=[],angular.forEach(e,function(e,i){t.push(e.id)})):t=e,t},$=function(e){var t=[];return e?(g.simple_tags?(t=[],angular.forEach(e,function(e,i){t.push({id:e,text:e})})):t=e,t):t};if(u?(delete g.multiple,delete g.initSelection):o&&(g.multiple=!0),c&&(e.$watch(a.ngModel,function(e,t){e&&e!==t&&c.$render()},!0),c.$render=function(){if(u)r.select2("val",c.$viewValue);else if(g.multiple){c.$isEmpty=function(e){return!e||0===e.length};var e=c.$viewValue;g.ajax?(e=i.isJson(c.$viewValue)?JSON.parse(c.$viewValue):c.$viewValue,angular.isObject(e)&&r.select2("data",e)):angular.isString(e)&&(e=e.split(","),r.select2("data",$(e)))}else angular.isObject(c.$viewValue)?r.select2("data",c.$viewValue):c.$viewValue?r.select2("val",c.$viewValue):r.select2("data",null)},l&&e.$watch(l,function(e,i,n){angular.equals(e,i)||t(function(){r.select2("val",c.$viewValue),c.$render(),e&&!i&&c.$setPristine&&c.$setPristine(!0)})}),c.$parsers.push(function(e){var t=r.prev();return t.toggleClass("ng-invalid",!c.$valid).toggleClass("ng-valid",c.$valid).toggleClass("ng-invalid-required",!c.$valid).toggleClass("ng-valid-required",c.$valid).toggleClass("ng-dirty",c.$dirty).toggleClass("ng-pristine",c.$pristine),e}),!u&&(r.bind("change",function(t){t.stopImmediatePropagation(),e.$$phase||e.$root.$$phase||e.$apply(function(){c.$setViewValue(p(r.select2("data")))})}),g.initSelection))){var d=g.initSelection;g.initSelection=function(e,t){d(e,function(e){var i=c.$pristine;g.ajax&&g.multiple||c.$setViewValue(p(e)),t(e),i&&c.$setPristine(),r.prev().toggleClass("ng-pristine",c.$pristine)})}}r.bind("$destroy",function(){r.select2("destroy")}),s.$observe("disabled",function(e){r.select2("enable",!e)}),s.$observe("readonly",function(e){r.select2("readonly",!!e)}),s.ngMultiple&&e.$watch(s.ngMultiple,function(e){s.$set("multiple",!!e),r.select2(g)}),t(function(){if(r.select2(g),r.select2("data",c.$modelValue),c.$render(),!g.initSelection&&!u){var e=c.$pristine;c.$pristine=!1,c.$setViewValue(p(r.select2("data"))),e&&c.$setPristine(),r.prev().toggleClass("ng-pristine",c.$pristine)}})}}}}])}();
!function(){angular.module("marcuraUI.services").factory("MaDate",[function(){function t(){var t,e=arguments;this._date=null,this._offset=0,this._isMaDate=!0,0===e.length?this._date=new Date:1===e.length?(t=e[0],i(t)?this._date=new Date(t.valueOf()):a(t)?(t.isEmpty()||(this._date=new Date(t.toDate().valueOf())),this._offset=t.offset()):"boolean"==typeof t?(this._date=new Date,this._offset=-this._date.getTimezoneOffset()):"string"==typeof t?(t=f(t),this._date=t.toDate(),this._offset=t.offset()):s(t)&&(this._date=new Date(t,0,1,0,0,0))):2===e.length?"string"==typeof e[0]&&"string"==typeof e[1]?(t=f(e[0],e[1]),this._date=t.toDate(),this._offset=t.offset()):s(e[0])&&s(e[1])&&(this._date=new Date(e[0],e[1],1,0,0,0)):3===e.length&&s(e[0])&&s(e[1])&&s(e[2])?this._date=new Date(e[0],e[1],e[2],0,0,0):4===e.length&&s(e[0])&&s(e[1])&&s(e[2])&&s(e[3])?this._date=new Date(e[0],e[1],e[2],e[3],0,0):5===e.length&&s(e[0])&&s(e[1])&&s(e[2])&&s(e[3])&&s(e[4])?this._date=new Date(e[0],e[1],e[2],e[3],e[4],0):6===e.length&&s(e[0])&&s(e[1])&&s(e[2])&&s(e[3])&&s(e[4])&&s(e[5])&&(this._date=new Date(e[0],e[1],e[2],e[3],e[4],e[5]))}var e=[{language:"en",full:["January","February","March","April","May","June","July","August","September","October","November","December"],"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}],r=[{language:"en",full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}],n=[31,28,31,30,31,30,31,31,30,31,30,31],s=function(t){return t===parseInt(t,10)},i=function(t){return!!t&&("[object Date]"===Object.prototype.toString.call(t)&&t.getTime&&!isNaN(t.getTime()))},a=function(e){return e instanceof t||!!e&&e._isMaDate},u=function(t,e){return t.match(new RegExp(e,"i"))},o=function(r,s,i,a,o,h,f,c){var l,d=t.createEmpty();i=i.toString(),s=s.toString(),a=Number(a)||0,o=Number(o)||0,h=Number(h)||0,f=Number(f)||0,c=c||0,r<=99&&(r=r>=0&&r<30?"20"+r:"19"+r);var p=1===new Date(r,1,29).getMonth();if(p?n[1]=29:n[1]=28,null!==s.match(/([^\u0000-\u0080]|[a-zA-Z])$/)){for(var y=0;y<e.length;y++)for(var m=0;m<e[y].full.length;m++)if(u(s,e[y].full[m].slice(0,3))){l=m+1;break}if(!l)return d;s=l}if(s>12)return d;if(i>n[s-1])return d;var g=new Date(Number(r),Number(s-1),Number(i),a,o,h);return g.setMilliseconds(f),d=new t(g),d.offset(c),d},h=function(t,e,r){var n={day:t,month:e,isValid:!0};return"en-GB"===r&&e>12&&(n.isValid=!1),"en-US"===r&&(n.day=e,n.month=t,t>12&&(n.isValid=!1)),!r&&e>12&&(n.day=e,n.month=t),n},f=function(e,r){var n,s,u,f=t.createEmpty();if(i(e)||a(e))return e;if("string"!=typeof e)return f;if(e=e.replace(/\s+/g," "),n=/^\d{1,2}$/,null!==e.match(n)){var c=new Date;return o(c.getFullYear(),c.getMonth()+1,e)}if(n=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})$/,null!==e.match(n))return s=n.exec(e),u=h(s[1],s[3],r),u.isValid?o((new Date).getFullYear(),u.month,u.day):f;if(n=/^(\d{1,2})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==e.match(n))return s=n.exec(e),o(s[5],s[3],s[1]);if(n=/([^\u0000-\u0080]|[a-zA-Z]{3})(\s|)(\d{1,2})(,)(\s|)(\d{2,4})$/,null!==e.match(n))return s=n.exec(e),o(s[6],s[1],s[3]);if(n=/^([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4}\b)/,null!==e.match(n))return s=n.exec(e),o(s[5],s[1],s[3]);if(n=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})$/,null!==e.match(n))return s=n.exec(e),o(s[1],s[3],s[5]);if(n=/^(\d{1,2})(\/|-|\.|\s|)(\d{1,2})(\/|-|\.|\s|)(\d{2,4})$/,null!==e.match(n))return s=n.exec(e),u=h(s[1],s[3],r),u.isValid?o(s[5],u.month,u.day):f;if(n=/^(\d{4})(\/|-|\.|\s|)([^\u0000-\u0080]|[a-zA-Z]{1,12})(\/|-|\.|\s|)(\d{1,2})$/,null!==e.match(n))return s=n.exec(e),o(s[1],s[3],s[5]);if(n=/^(\d{4})(\/|-|\.|\s)(\d{1,2})(\/|-|\.|\s)(\d{1,2})T(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)(\.(\d{3}))?(?:Z|([+-])(2[0-3]|[01][0-9]):([0-5][0-9]))$/,null!==e.match(n)){s=n.exec(e);var l=0;return 14===s.length&&(l=60*(Number(s[12])||0)+(Number(s[13])||0),"-"===s[11]&&0!==l&&(l=-l)),o(s[1],s[3],s[5],s[6],s[7],s[8],s[10],l)}return f},c=function(t,e){for(var r="",n=0;n<e;n++)r+="0";return(r+t).slice(-e)},l=function(t){return t>=-720&&t<=840},d=function(t){if(0===t)return"Z";if(!s(t))return null;if(t<-720||t>840)return null;var e="+";t<0&&(t*=-1,e="-");var r=t%60,n=(t-r)/60;return e+c(n,2)+":"+c(r,2)},p=function(t){if(!i(t)&&!a(t))return null;var n,s=arguments,u=0;if(2===s.length){if("string"==typeof s[1])n=s[1];else if(u=s[1],!l(u))return null}else if(3===s.length&&(n=s[1],u=s[2],!l(u)))return null;n=n||"yyyy-MM-ddTHH:mm:ssZ";var o=0,h=d(u),f=a(t)?t.toDate():t,p={f:["fff"],s:["ss"],m:["mm"],H:["HH"],d:["d","dd","ddd","dddd"],M:["M","MM","MMM","MMMM"],y:["yy","yyyy"],Z:["Z"]},y=f.getDate(),m=f.getDay(),g=f.getMonth(),_=f.getFullYear(),b=f.getHours(),M=f.getMinutes(),D=f.getSeconds(),v=f.getMilliseconds(),w=function(t){var e="";try{e=n.match(new RegExp(t+"+",""))[0]}catch(r){}return p[t].indexOf(e)},E=function(t){var n="";switch(t){case p.d[0]:n=y;break;case p.d[1]:n=c(y,2);break;case p.d[2]:n=r[o]["short"][m];break;case p.d[3]:n=r[o].full[m];break;case p.M[0]:n=g+1;break;case p.M[1]:n=c(g+1,2);break;case p.M[2]:n=e[o]["short"][g];break;case p.M[3]:n=e[o].full[g];break;case p.y[0]:n=c(_,2);break;case p.y[1]:n=_;break;case p.H[0]:n=c(b,2);break;case p.m[0]:n=c(M,2);break;case p.s[0]:n=c(D,2);break;case p.f[0]:n=c(v,3);break;case p.Z[0]:n=h||"Z";break;default:return""}return n},k={days:E(p.d[w("d")]),months:E(p.M[w("M")]),years:E(p.y[w("y")]),hours:E(p.H[w("H")]),minutes:E(p.m[w("m")]),seconds:E(p.s[w("s")]),milliseconds:E(p.f[w("f")]),timeZone:E(p.Z[0]),separator:/^\w+([^\w])/.exec(n)};return n.replace(/d+/,k.days).replace(/y+/,k.years).replace(/M+/,k.months).replace(/H+/,k.hours).replace(/m+/,k.minutes).replace(/s+/,k.seconds).replace(/f+/,k.milliseconds).replace(/Z+/,k.timeZone)},y=function(t){if(!t)return 0;t=t.replace(/GMT/gi,"");var e=/^(?:Z|([+-]?)(2[0-3]|[01][0-9]):([0-5][0-9]))$/.exec(t);if(!e||4!==e.length)return 0;if("Z"===e[0])return 0;var r=60*Number(e[2])+Number(e[3]);return 0!==r&&"-"===e[1]&&(r*=-1),r};return t.createEmpty=function(){return new t(null)},t.createLocal=function(){return new t((!0))},t.prototype.copy=function(){return new t(this)},t.prototype.toDate=function(){return this._date},t.prototype.offset=function(t){return 0===arguments.length?this._offset:(this._offset=t,this)},t.prototype.toUtc=function(){return this.isEmpty()||0===this._offset?this:(this.subtract(this._offset,"minute"),this._offset=0,this)},t.prototype.isEmpty=function(){return!this._date},t.prototype.isUtc=function(){return!this.isEmpty()&&0===this._offset},t.prototype.isEqual=function(t){return 0===this.difference(t)},t.prototype.isLess=function(t){return this.difference(t)<0},t.prototype.isLessOrEqual=function(t){return this.difference(t)<=0},t.prototype.isGreater=function(t){return this.difference(t)>0},t.prototype.isGreaterOrEqual=function(t){return this.difference(t)>=0},t.prototype.isBetween=function(e,r,n){var s=new t(e),i=new t(r);return!(this.isEmpty()||s.isEmpty()||i.isEmpty())&&(n?this.isGreaterOrEqual(s)&&this.isLessOrEqual(i):this.isGreater(s)&&this.isLess(i))},t.prototype.difference=function(e){return this.valueOf()-new t(e).valueOf()},t.prototype.valueOf=function(){if(this.isEmpty())return 0;var t=this._date.valueOf();return 0!==this._offset&&(t-=6e4*this._offset),t},t.prototype.format=function(t){return this.isEmpty()?null:p(this._date,t,this._offset)},t.prototype.add=function(t,e){if(this.isEmpty()||!t)return this;var r=new Date(this._date);switch(e){case"year":r.setFullYear(r.getFullYear()+t);break;case"quarter":r.setMonth(r.getMonth()+3*t);break;case"month":r.setMonth(r.getMonth()+t);break;case"week":r.setDate(r.getDate()+7*t);break;case"day":r.setDate(r.getDate()+t);break;case"hour":r.setTime(r.getTime()+36e5*t);break;case"minute":r.setTime(r.getTime()+6e4*t);break;case"second":r.setTime(r.getTime()+1e3*t);break;case"millisecond":r.setTime(r.getTime()+t)}return this._date=r,this},t.prototype.subtract=function(t,e){return this.add(t*-1,e)},t.prototype.millisecond=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getMilliseconds():(this._date.setMilliseconds(t),this)},t.prototype.second=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getSeconds():(this._date.setSeconds(t),this)},t.prototype.minute=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getMinutes():(this._date.setMinutes(t),this)},t.prototype.hour=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getHours():(this._date.setHours(t),this)},t.prototype.date=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getDate():(this._date.setDate(t),this)},t.prototype.month=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getMonth():(this._date.setMonth(t),this)},t.prototype.year=function(t){return this.isEmpty()?0:0===arguments.length?this._date.getFullYear():(this._date.setFullYear(t),this)},t.prototype.startOf=function(t){switch(t){case"year":this.month(0);case"month":this.date(1);case"day":this.hour(0);case"hour":this.minute(0);case"minute":this.second(0);case"second":this.millisecond(0)}return this},t.prototype.endOf=function(t){return t?this.startOf(t).add(1,t).subtract(1,"millisecond"):this},t.parse=f,t.parseTimeZone=y,t.offsetToTimeZone=d,t.isDate=i,t.isMaDate=a,t}])}();
!function(){angular.module("marcuraUI.services").factory("MaHelper",["MaDate","$rootScope",function(e,r){return{keyCode:{backspace:8,comma:188,"delete":46,down:40,end:35,enter:13,escape:27,home:36,left:37,pageDown:34,pageUp:33,period:190,right:39,shift:16,space:32,tab:9,up:38,dash:109,dash2:189,numLock:{period:110}},html:{nbsp:"&nbsp;"},isEmail:function(e){var r=/^([\+\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return r.test(e)},isNullOrWhiteSpace:function(e){return null===e||void 0===e||!angular.isArray(e)&&e.toString().replace(/\s/g,"").length<1},isNullOrUndefined:function(e){return null===e||angular.isUndefined(e)},formatString:function(e){for(var r="",t=0;;){var n=e.indexOf("{",t),a=e.indexOf("}",t);if(n<0&&a<0){r+=e.slice(t);break}if(a>0&&(a<n||n<0)){if("}"!==e.charAt(a+1))throw new Error("The format string contains an unmatched opening or closing brace.");r+=e.slice(t,a+1),t=a+2}else if(r+=e.slice(t,n),t=n+1,"{"!==e.charAt(t)){if(a<0)throw new Error("The format string contains an unmatched opening or closing brace.");if(a<0)break;var i=e.substring(t,a),s=i.indexOf(":"),o=parseInt(s<0?i:i.substring(0,s),10)+1;if(isNaN(o))throw new Error("The format string is invalid.");var u=arguments[o];"undefined"!=typeof u&&null!==u||(u=""),r+=u.toString(),t=a+1}else r+="{",t++}return r},getTextHeight:function(e,r,t,n){if(!r)return 0;var a=document.createElement("TEXTAREA");a.setAttribute("rows",1),a.style.font=r,a.style.width=t||"0px",a.style.border="0",a.style.overflow="hidden",a.style.padding="0",a.style.outline="0",a.style.resize="none",a.style.lineHeight=n||"normal",a.value=e,angular.element(document.querySelector("body")).append(a),a.style.height="auto",a.style.height=a.scrollHeight+"px";var i=parseInt(a.style.height);return angular.element(a).remove(),i},isGreater:function(r,t){var n=new e(r),a=new e(t),i="number"==typeof r||"number"==typeof t;return i?parseFloat(r)>parseFloat(t):n.isEmpty()||a.isEmpty()?r>t:n.isGreater(a)},isGreaterOrEqual:function(r,t){var n=new e(r),a=new e(t),i="number"==typeof r||"number"==typeof t;return i?parseFloat(r)>=parseFloat(t):n.isEmpty()||a.isEmpty()?r>=t:n.isGreaterOrEqual(a)},isLengthGreaterOrEqual:function(e,r){var t=(e||"").toString().length;return t>=r},isLess:function(r,t){var n=new e(r),a=new e(t),i="number"==typeof r||"number"==typeof t;return i?parseFloat(r)<parseFloat(t):n.isEmpty()||a.isEmpty()?r<t:n.isLess(a)},isLessOrEqual:function(r,t){var n=new e(r),a=new e(t),i="number"==typeof r||"number"==typeof t;return i?parseFloat(r)<=parseFloat(t):n.isEmpty()||a.isEmpty()?r<=t:n.isLessOrEqual(a)},isLengthLessOrEqual:function(e,r){var t=(e||"").toString().length;return t<=r},isNumber:function(e){return"number"==typeof e||!this.isNullOrWhiteSpace(e)&&null!==e.match(/^-?\d+\.?\d*$/)},isJson:function(e){try{return JSON.parse(e),!0}catch(r){return!1}},safeApply:function(e){var t=r.$$phase;return"$apply"!==t&&"$digest"!==t?void r.$apply(e):void(e&&"function"==typeof e&&e())}}}])}();
!function(){angular.module("marcuraUI.services").factory("MaPosition",["$document","$window",function(t,e){function o(t,o){return t.currentStyle?t.currentStyle[o]:e.getComputedStyle?e.getComputedStyle(t)[o]:t.style[o]}function n(t){return"static"===(o(t,"position")||"static")}var f=function(e){for(var o=t[0],f=e.offsetParent||o;f&&f!==o&&n(f);)f=f.offsetParent;return f||o};return{position:function(e){var o=this.offset(e),n={top:0,left:0},r=f(e[0]);r!=t[0]&&(n=this.offset(angular.element(r)),n.top+=r.clientTop-r.scrollTop,n.left+=r.clientLeft-r.scrollLeft);var i=e[0].getBoundingClientRect();return{width:i.width||e.prop("offsetWidth"),height:i.height||e.prop("offsetHeight"),top:o.top-n.top,left:o.left-n.left}},offset:function(o){var n=o[0].getBoundingClientRect();return{width:n.width||o.prop("offsetWidth"),height:n.height||o.prop("offsetHeight"),top:n.top+(e.pageYOffset||t[0].documentElement.scrollTop),left:n.left+(e.pageXOffset||t[0].documentElement.scrollLeft)}},positionElements:function(t,e,o,n){var f,r,i,l,u=o.split("-"),p=u[0],c=u[1]||"center";f=n?this.offset(t):this.position(t),r=e.prop("offsetWidth"),i=e.prop("offsetHeight");var s={center:function(){return f.left+f.width/2-r/2},left:function(){return f.left},right:function(){return f.left+f.width}},h={center:function(){return f.top+f.height/2-i/2},top:function(){return f.top},bottom:function(){return f.top+f.height}};switch(p){case"right":l={top:h[c](),left:s[p]()};break;case"left":l={top:h[c](),left:f.left-r};break;case"bottom":l={top:h[p](),left:s[c]()};break;default:l={top:f.top-i,left:s[c]()}}return l}}}])}();
!function(){angular.module("marcuraUI.services").factory("MaValidators",["MaHelper","MaDate",function(e,a){var n=function(e){if(!e)return null;var n=e.toString();return a.isMaDate(e)&&(n=e.format("dd MMM yyyy")),n};return{isNotEmpty:function(){return{name:"IsNotEmpty",message:"This field cannot be empty.",validate:function(a){return angular.isArray(a)?a.length>0:!e.isNullOrWhiteSpace(a)}}},isGreater:function(a,r){var t=null;return a&&(t="This field cannot be less than or equal to "+n(a)+"."),{name:"IsGreater",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isGreater(n,a)}}},isGreaterOrEqual:function(a,r){var t=null;return a&&(t="This field cannot be less than "+n(a)+"."),{name:"IsGreaterOrEqual",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isGreaterOrEqual(n,a)}}},isLengthGreaterOrEqual:function(a,r){var t=null;return a&&(t="Length cannot be less than "+n(a)+"."),{name:"IsLengthGreaterOrEqual",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isLengthGreaterOrEqual(n,a)}}},isLess:function(a,r){var t=null;return a&&(t="This field cannot be greater than or equal to "+n(a)+"."),{name:"IsLess",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isLess(n,a)}}},isLessOrEqual:function(a,r){var t=null;return a&&(t="This field cannot be greater than "+n(a)+"."),{name:"IsLessOrEqual",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isLessOrEqual(n,a)}}},isLengthLessOrEqual:function(a,r){var t=null;return a&&(t="Length cannot be greater than "+n(a)+"."),{name:"IsLengthLessOrEqual",message:t,validate:function(n){return!(!r||!e.isNullOrWhiteSpace(n))||e.isLengthLessOrEqual(n,a)}}},isNumber:function(a){return{name:"IsNumber",message:"This field should be a number.",validate:function(n){return!(!a||!e.isNullOrWhiteSpace(n))||e.isNumber(n)}}},isEmail:function(a){return{name:"IsEmail",message:"This field should be an email.",validate:function(n){return!(!a||!e.isNullOrWhiteSpace(n))||e.isEmail(n)}}}}}])}();
!function(){angular.module("marcuraUI.components").directive("maSpinner",[function(){return{restrict:"E",transclude:!0,scope:{isVisible:"=",size:"@",position:"@"},replace:!0,template:function(){var i='                <div class="ma-spinner{{cssClass}}" ng-show="isVisible">                    <div class="pace">                        <div class="pace-activity"></div>                    </div>                </div>';return i},link:function(i){var s=i.size?i.size:"xs",n=i.position?i.position:"center";i.cssClass=" ma-spinner-"+s+" ma-spinner-"+n}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTabs",["$state","MaHelper","$timeout",function(e,t,s){return{restrict:"E",scope:{items:"=",select:"&",useState:"="},replace:!0,template:function(){var e='            <div class="ma-tabs">                <ul class="ma-tabs-list clearfix">                    <li class="ma-tabs-item{{item.modifier ? (\' ma-tabs-item-\' + item.modifier) : \'\'}}" ng-repeat="item in items"                        ng-focus="onFocus(item)"                        ng-blur="onBlur(item)"                        ng-keypress="onKeypress($event, item)"                        ng-class="{                            \'ma-tabs-item-is-selected\': isItemSelected(item),                            \'ma-tabs-item-is-disabled\': item.isDisabled,                            \'ma-tabs-item-is-focused\': item.isFocused                        }"                        ng-click="onSelect(item)">                        <a class="ma-tabs-link" href="" tabindex="-1">                            <span class="ma-tabs-text">{{item.text}}</span>                        </a>                    </li>                </ul>            </div>';return e},link:function(a,i,n){a.$state=e;var c=a.useState!==!1;a.isItemSelected=function(t){return t.selector?t.selector():c?!(!t.state||!t.state.name)&&e.includes(t.state.name):t.isSelected},a.onSelect=function(t){t.isDisabled||t.isSelected||(c?t.state&&t.state.name&&e.go(t.state.name,t.state.parameters):(angular.forEach(a.items,function(e){e.isSelected=!1}),t.isSelected=!0,a.select({maItem:t})))},a.onKeypress=function(e,s){e.keyCode===t.keyCode.enter&&a.onSelect(s)},a.onFocus=function(e){e.isFocused=!0},a.onBlur=function(e){e.isFocused=!1},s(function(){var e=angular.element(i[0].querySelectorAll(".ma-tabs-item"));e.each(function(e,t){var s=a.items[e];s.isDisabled||angular.element(t).attr("tabindex","0")})})}}}])}();
!function(){angular.module("marcuraUI.components").directive("maTextArea",["$timeout","$window","MaHelper","MaValidators",function(e,t,a,i){return{restrict:"E",scope:{id:"@",value:"=",isDisabled:"=",fitContentHeight:"=",isResizable:"=",isRequired:"=",validators:"=",instance:"=",change:"&",blur:"&",focus:"&"},replace:!0,template:function(){var e='            <div class="ma-text-area"                ng-class="{                    \'ma-text-area-is-disabled\': isDisabled,                    \'ma-text-area-is-focused\': isFocused,                    \'ma-text-area-fit-content-height\': fitContentHeight,                    \'ma-text-area-is-invalid\': !isValid,                    \'ma-text-area-is-touched\': isTouched                }">                <textarea class="ma-text-area-value"                    type="text"                    ng-focus="onFocus()"                    ng-blur="onBlur()"                    ng-keydown="onKeydown($event)"                    ng-keyup="onKeyup($event)"                    ng-disabled="isDisabled">                </textarea>            </div>';return e},link:function(n,r){var o,l,u,s,d=angular.element(r[0].querySelector(".ma-text-area-value")),g=n.validators?angular.copy(n.validators):[],c=n.isRequired,p=!1;n.isFocused=!1,n.isTouched=!1;for(var h=function(){var e=t.getComputedStyle(d[0],null),a={},i=parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom")),n=parseInt(e.getPropertyValue("padding-left"))+parseInt(e.getPropertyValue("padding-right")),r=parseInt(e.getPropertyValue("border-top-width"))+parseInt(e.getPropertyValue("border-bottom-width")),o=parseInt(e.getPropertyValue("border-left-width"))+parseInt(e.getPropertyValue("border-right-width"));return a.width=parseInt(t.getComputedStyle(d[0],null).getPropertyValue("width"))-n,a.height=parseInt(t.getComputedStyle(d[0],null).getPropertyValue("height"))-i,a.paddingHeight=i,a.paddingWidth=n,a.borderHeight=r,a.borderWidth=o,a.lineHeight=e.getPropertyValue("line-height"),a.font=e.getPropertyValue("font-style")+" "+e.getPropertyValue("font-variant")+" "+e.getPropertyValue("font-weight")+" "+e.getPropertyValue("font-size")+" "+e.getPropertyValue("font-height")+" "+e.getPropertyValue("font-family"),a},f=function(){if(n.fitContentHeight){var e=h(),t=a.getTextHeight(d.val(),e.font,e.width+"px",e.lineHeight),i=t+e.paddingHeight+e.borderHeight;i<40&&(i=30),d[0].style.height=i+"px",r[0].style.height=i+"px"}},v=function(){if(n.isValid=!0,g&&g.length)for(var e=0;e<g.length;e++)if(!g[e].validate(d.val())){n.isValid=!1;break}},y=function(){var t=d.val();u!==t&&(u=n.value,n.value=t,e(function(){n.change({maValue:n.value,maOldValue:u})}))},m=0;m<g.length;m++)if("IsNotEmpty"===g[m].name){p=!0;break}!p&&c&&g.unshift(i.isNotEmpty()),p&&(c=!0),n.onFocus=function(){n.isFocused=!0,s=n.value,n.focus({maValue:n.value})},n.onBlur=function(){n.isFocused=!1,n.isTouched=!0,v(),n.blur({maValue:n.value,maOldValue:s,maHasValueChanged:s!==n.value})},n.onKeydown=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(o=angular.element(e.target).val())},n.onKeyup=function(e){e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(l=angular.element(e.target).val(),o!==l&&(n.isTouched=!0))},d.on("input",function(e){var t=!1;l=angular.element(e.target).val(),o!==l&&(t=!0),t&&(v(),f(),n.isValid&&n.$apply(function(){y()}))}),angular.element(t).on("resize",function(){f()}),e(function(){if(f(),n.isResizable===!1&&d.css("resize","none"),r.removeAttr("id"),d.attr("id",n.id),n.fitContentHeight){var t=$(r[0]).closest(".ng-hide[ng-show]");if(1===t.length){var a=t.scope();a.$watch(t.attr("ng-show"),function(t){t&&e(function(){f()})})}}}),n.$watch("value",function(e,t){if(e!==t){n.isValid=!0,n.isTouched=!1;var a=d.prop("selectionStart");d.val(e);var i=$(r).is(":visible");i&&d.prop({selectionStart:a,selectionEnd:a}),f()}}),d.val(n.value),v(),u=n.value,n.instance&&(n.instance.isInitialized=!0,n.instance.isEditor=function(){return!0},n.instance.isValid=function(){return n.isValid},n.instance.focus=function(){n.isFocused||d.focus()})}}}])}();
!function(){angular.module("marcuraUI.components").provider("maTextBoxConfiguration",function(){this.$get=function(){return this}}).directive("maTextBox",["$timeout","MaHelper","MaValidators",function(e,a,i){return{restrict:"E",scope:{id:"@",type:"@",value:"=",isDisabled:"=",isRequired:"=",validators:"=",instance:"=",change:"&",changeWhenIsInvalid:"=",blur:"&",focus:"&",validate:"&",changeTimeout:"=",canReset:"=",placeholder:"@",hasShowPasswordButton:"=",trim:"=",max:"=",min:"=",decimals:"=",useFormat:"=",reset:"&",defaultValue:"="},replace:!0,template:function(e,a){var i="password"===a.type?"password":"text";"number"!==i&&"email"!==i||(i="text");var n="            <div class=\"ma-text-box\"                ng-class=\"{                    'ma-text-box-is-disabled': isDisabled,                    'ma-text-box-is-focused': isValueFocused,                    'ma-text-box-is-invalid': !isValid,                    'ma-text-box-is-touched': isTouched,                    'ma-text-box-can-reset': canReset,                    'ma-text-box-is-reset-disabled': canReset && !isDisabled && !isResetEnabled(),                    'ma-text-box-can-toggle-password': canTogglePassword,                    'ma-text-box-is-toggle-password-disabled': canTogglePassword && !isDisabled && !isTogglePasswordEnabled(),                    'ma-text-box-has-value': hasValue()                }\">                <input class=\"ma-text-box-value\" type=\""+i+'" id="{{id}}"                    autocomplete="off"                    placeholder="{{placeholder}}"                    ng-focus="onFocus(\'value\')"                    ng-keydown="onKeydown($event)"                    ng-disabled="isDisabled"/>                <ma-button class="ma-button-toggle-password"                    ng-show="canTogglePassword" size="xs" modifier="simple"                    right-icon="{{isPasswordVisible ? \'eye-slash\' : \'eye\'}}"                    click="togglePassword()"                    ng-focus="onFocus()"                    is-disabled="!isTogglePasswordEnabled()">                </ma-button>                <ma-button class="ma-button-reset"                    ng-show="canReset" size="xs" modifier="simple"                    right-icon="times-circle"                    click="onReset()"                    ng-focus="onFocus()"                    is-disabled="!isResetEnabled()">                </ma-button>            </div>';return n},controller:["$scope","maTextBoxConfiguration",function(e,a){e.configuration={},e.decimals>=0?e.configuration.decimals=e.decimals:a.decimals>=0?e.configuration.decimals=a.decimals:e.configuration.decimals=2}],link:function(n,t,s){var o,u,l,r,d,c=angular.element(t[0].querySelector(".ma-text-box-value")),f=angular.element(t[0].querySelector(".ma-button-reset")),m=angular.element(t[0].querySelector(".ma-button-toggle-password")),v=[],p=Number(n.changeTimeout),b=!0,g=n.trim!==!1,h=!1,y=null,x=n.configuration.decimals,V=void 0!==s.defaultValue,w=a.isNullOrUndefined(n.defaultValue)?"":n.defaultValue,k="number"==typeof n.min,C="number"==typeof n.max,T=void 0===n.useFormat||n.useFormat;"number"===n.type&&(w="number"==typeof n.defaultValue?n.defaultValue:null);var O=function(e){e=a.isNullOrUndefined(e)?"":e,"number"!==n.type&&g&&(e=e.trim()),l=e},E=function(){var e=c.val();return"number"===n.type?I(e):e},N=function(e){n.isValid=!0,y=null,e=void 0===e||e;var a=c.val();if("number"===n.type&&(a=D(a)),v&&v.length)for(var i=0;i<v.length;i++)if(!v[i].validate(a)){n.isValid=!1,y=v[i];break}e!==!1&&P(a)},F=function(i){if(R(i)){h=!0;var t=l;"number"!==n.type&&g&&(t=t.trim(),i=i.trim()),V&&(a.isNullOrUndefined(i)&&(i=w),a.isNullOrUndefined(t)&&(t=w)),n.value=i,O(i),e(function(){n.change({maValue:i,maOldValue:t})})}},P=function(a){e(function(){n.validate({maValue:a})})},R=function(e){e=a.isNullOrUndefined(e)?"":e;var i=a.isNullOrUndefined(l)?"":l,t=!1;return t="number"!==n.type&&g?i.trim()!==e.trim():i!==e},q=function(){return n.isTouched=!0,R(E())?(N(),void((n.isValid||n.changeWhenIsInvalid)&&F(E()))):void N()},I=function(e,i){return a.isNullOrWhiteSpace(e)?null:(e=parseFloat(D(e)),i||(e=parseFloat(e.toFixed(x))),isNaN(e)?null:e)},S=function(e){if(a.isNullOrWhiteSpace(e))return"";var i=e.indexOf(".")==-1?"":e.replace(/^-?\d+(?=\.)/,""),n=e.replace(/(\.\d+)$/,""),t=n.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return""+t+i},D=function(e){return a.isNullOrWhiteSpace(e)?"":e.trim().replace(/,/g,"")},U=function(e){if(a.isNullOrWhiteSpace(e))return e;var i=e;return"number"===n.type&&(e="number"==typeof e?e:Number(e),i=T?S(e.toFixed(x)):e.toFixed(0)),i},L=function(){var e=!1;v=n.validators?angular.copy(n.validators):[];for(var a=0;a<v.length;a++)if("IsNotEmpty"===v[a].name){e=!0;break}!e&&n.isRequired&&v.unshift(i.isNotEmpty()),"number"===n.type&&v.push(i.isNumber(!0)),k&&("number"===n.type?v.push(i.isGreaterOrEqual(n.min,!0)):v.push(i.isLengthGreaterOrEqual(n.min,!0))),C&&("number"===n.type?v.push(i.isLessOrEqual(n.max,!0)):v.push(i.isLengthLessOrEqual(n.max,!0))),"email"===n.type&&v.push(i.isEmail(!0))};L(),n.isValueFocused=!1,n.isTouched=!1,n.canTogglePassword=!1,n.isPasswordVisible=!1,"password"===n.type&&(n.canTogglePassword=n.hasShowPasswordButton!==!1),n.hasValue=function(){if("number"===n.type){var e=c.val();return""!==e&&!a.isNumber(e)||I(e,!0)!==w&&""!==e}return c.val()!==w},n.isResetEnabled=function(){if(n.isDisabled)return!1;if("number"===n.type){var e=c.val();return""!==e&&!a.isNumber(e)||I(e,!0)!==w&&""!==e}return c.val()!==w},n.doReset=function(){O(E()),c.val(w)},n.onReset=function(){n.isDisabled||(n.doReset(),n.isTouched=!0,F(w),N(),c.focus(),e(function(){n.reset()}))},n.onFocus=function(e){if("value"===e&&(n.isValueFocused=!0,"number"===n.type&&!a.isNullOrUndefined(n.value)&&n.isValid)){var i=n.value.toFixed(T?x:0);c.val(i)}b&&(d=n.value,n.focus({maValue:n.value})),b=!1},c.focusout(function(e){W(e,"value")}),f.focusout(function(e){W(e)}),m.focusout(function(e){W(e)}),n.togglePassword=function(){n.isPasswordVisible=!n.isPasswordVisible,c[0].type=n.isPasswordVisible?"text":"password"},n.isTogglePasswordEnabled=function(){return!n.isDisabled&&""!==c.val()};var W=function(i,t){var s=angular.element(i.relatedTarget),o=c.val();b=n.canTogglePassword?s[0]!==c[0]&&s[0]!==m[0]&&s[0]!==f[0]:s[0]!==c[0]&&s[0]!==f[0],r&&e.cancel(r),"value"===t&&(V&&""===o.trim()&&(h=!0,o=w,n.value=o,c.val(U(o))),n.isResetEnabled()||s[0]!==f[0]||(b=!0),N(),n.isValid&&c.val(U(o))),a.safeApply(function(){n.isValueFocused=!1}),b&&(q(),a.safeApply(function(){n.blur({maValue:n.value,maOldValue:d,maHasValueChanged:d!==n.value})}))};n.onKeydown=function(e){if(e.keyCode!==a.keyCode.tab&&e.keyCode!==a.keyCode.shift&&(o=angular.element(e.target).val(),"number"===n.type)){if($.inArray(e.keyCode,[a.keyCode.backspace,a.keyCode["delete"],a.keyCode.home,a.keyCode.end,a.keyCode.period,a.keyCode.numLock.period,a.keyCode.dash,a.keyCode.dash2])!==-1||37===e.keyCode||39===e.keyCode)return;(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}},c.on("input",function(i){if(i.keyCode!==a.keyCode.tab&&i.keyCode!==a.keyCode.shift){var n=!1;u=angular.element(i.target).val(),o!==u&&(n=!0),n&&(r&&e.cancel(r),r=e(function(){q()},p))}}),e(function(){t.removeAttr("id"),n.id?c.attr("id",n.id):c.removeAttr("id")}),n.$watch("value",function(e,a){if(h)return void(h=!1);if(e!==a){R(e)&&(n.isTouched=!0);var i=c.prop("selectionStart");O(e),c.val(U(e)),N(!1),n.isValueFocused&&c.prop({selectionStart:i,selectionEnd:i})}}),n.$watch("isRequired",function(e,a){e!==a&&(L(),N())});var A=function(e,a){if(e!==a){var i=E();L();for(var t=[],s=0;s<v.length;s++)"IsGreaterOrEqual"!==v[s].name&&"IsLessOrEqual"!==v[s].name||t.push(v[s]);if(t.length){for(!y||"IsGreaterOrEqual"!==y.name&&"IsLessOrEqual"!==y.name||(y=null,n.isValid=!0),s=0;s<t.length;s++)if(!t[s].validate(i)){n.isValid=!1,y=t[s];break}n.isValid||(n.isTouched=!0)}(n.isValid||n.changeWhenIsInvalid)&&F(i)}};n.$watch("max",function(e,a){A(e,a)}),n.$watch("min",function(e,a){A(e,a)}),V&&a.isNullOrUndefined(n.value)&&(n.value=w),c.val(U(n.value)),N(),O(n.value),n.instance&&(n.instance.isInitialized=!0,n.instance.isEditor=function(){return!0},n.instance.validate=function(){n.isTouched=!0,N(!1)},n.instance.isValid=function(){return n.isValid},n.instance.focus=function(){n.isValueFocused||c.focus()},n.instance.failedValidator=function(){return y},n.instance.clear=function(){n.doReset(),e(function(){n.isTouched=!1})},n.instance.isTouched=function(){return n.isTouched})}}}])}();
!function(){angular.module("marcuraUI.components").provider("MaTooltip",function(){var i={position:"top",animation:!0,delay:0,useContentExp:!1},o={mouseenter:"mouseleave",click:"click",focus:"blur"},n={};this.options=function(i){angular.extend(n,i)},this.$get=["$window","$compile","$timeout","$document","$interpolate","MaPosition","MaHelper",function(t,e,s,l,a,c,p){return function(t,l){l=angular.extend({},i,n,l);var u=function(i){var n=i||l.trigger||t,e=o[n]||n;return{show:n,hide:e}},r=a.startSymbol(),m=a.endSymbol(),d="                    <div ma-tooltip-popup                        "+(l.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+m+'" ')+'                        position="'+r+"position"+m+'"                        popup-class="'+r+"popupClass"+m+'"                        animation="animation"                        is-visible="isVisible"                        can-close="canClose"                        origin-scope="origScope"                        tooltip-scope="getTooltipScope">                    </div>';return{restrict:"EA",compile:function(i,o){var n=e(d);return function(i,o,t,e){var a,r,m,d,f=u(),v=angular.isDefined(t.maTooltipIsDisabled),C=i.$new(!0),b=i.$eval(t.maTooltipAnimation),T=i.$eval(t.maTooltipCanClose),$=parseInt(t.maTooltipDelay),g=i.$eval(t.maTooltipInstance);C.delay=isNaN($)?l.delay:$,C.popupClass=t.maTooltipClass,C.position=t.maTooltipPosition?t.maTooltipPosition:l.position,C.animation=void 0!==b?!!b:l.animation,C.isVisible=!1,C.canClose=void 0!==T&&!!T,C.origScope=i,C.contentExp=function(){return i.$eval(t.maTooltip)},C.getTooltipScope=function(){return C};var h=function(){if(a){var i=c.positionElements(o,a,C.position,!1);i.top+="px",i.left+="px",a.css(i)}},V=function(){C.isVisible?E():C.isVisible||x()},w=function(){C.isVisible||x()},x=function(){v&&i.$eval(t.maTooltipIsDisabled)||(C.delay?d||(d=s(y,C.delay,!1),d.then(function(i){i()})):y()())},y=function(){return d=null,m&&(s.cancel(m),m=null),(l.useContentExp?C.contentExp():C.content)?(A(),a.css({top:0,left:0,display:"block"}),h(),p.safeApply(function(){C.isVisible=!0}),h):angular.noop},E=function(){p.safeApply(function(){C.isVisible=!1,s.cancel(d),d=null,C.animation?m||(m=s(S,500)):S()})};C.close=function(){E()};var A=function(){a&&S(),r=C.$new(),a=n(r,function(i){o.after(i)}),r.$watch(function(){s(h,0,!1)}),l.useContentExp&&r.$watch("contentExp()",function(i){!i&&C.isVisible&&E()})},S=function(){m=null,a&&(a.remove(),a=null),r&&(r.$destroy(),r=null)},k=function(){I(),f=u(t.maTooltipOn),f.show===f.hide?o.bind(f.show,V):(o.bind(f.show,w),C.canClose||o.bind(f.hide,E))},I=function(){o.unbind(f.show,w),o.unbind(f.hide,E)};t.$observe("maTooltip",function(i){C.content=i,!i&&C.isVisible&&E()}),t.maTooltipCanClose&&i.$watch(t.maTooltipCanClose,function(i,o){i!==o&&(C.canClose=i,k(),!C.canClose&&C.isVisible&&E())}),k(),s(function(){C&&C.isVisible&&x()}),g&&(g.isInitialized=!0,g.show=function(){C.isVisible||x()},g.hide=function(){C.isVisible&&E()}),i.$on("$destroy",function(){s.cancel(m),s.cancel(d),I(),S(),C=null})}}}}}]}).directive("maTooltipPopup",["$sce",function(i){return{restrict:"EA",replace:!0,scope:{content:"@",position:"@",popupClass:"@",animation:"&",isVisible:"&",canClose:"&",tooltipScope:"="},template:function(){var i='<div class="ma-tooltip" ma-tooltip-animation-class="fade" ma-tooltip-classes                    ng-class="{                        \'in\': isVisible(),                        \'ma-tooltip-can-close\': canClose()                    }">                    <div class="ma-tooltip-arrow"></div>                    <div class="ma-tooltip-inner" ng-bind-html="getContent()"></div>                    <div class="ma-tooltip-close" ng-if="canClose()" ng-click="tooltipScope().close()">                        <i class="fa fa-close"></i>                    </div>                </div>';return i},link:function(o){o.getContent=function(){return i.trustAsHtml(o.content)}}}}]).directive("maTooltip",["MaTooltip",function(i){return i("mouseenter")}]).directive("maTooltipClasses",function(){return{restrict:"A",link:function(i,o,n){i.position&&o.addClass(i.position),i.popupClass&&o.addClass(i.popupClass),i.animation()&&o.addClass(n.maTooltipAnimationClass)}}})}();